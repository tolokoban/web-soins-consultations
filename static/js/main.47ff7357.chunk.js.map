{"version":3,"sources":["../../src/index.ts","../../../src/converter/boolean.ts","../../../src/converter/string.ts","../../../src/view/icon.tsx","../../../src/converter/integer.ts","../../../../src/view/button/index.ts","../../../src/converter/unit.ts","../../../../src/view/input/index.ts","../../../../src/view/label/index.ts","../../../src/gesture/index.ts","../../../src/converter/double.ts","../../../src/converter/string-array.ts","../../../src/color/index.ts","../../../src/converter/array.ts","../../../src/layout/flex.tsx","../../../src/behavior/touchable.ts","../../src/listeners.ts","../../src/intl.ts","../../../src/font/font.ts","../../../src/async/debouncer.ts","../../src/escape-handler.ts","../../../src/factory/dialog.tsx","../../../../src/view/combo/index.ts","../../../src/view/touchable.tsx","../../../src/util/index.ts","../../../src/converter/function.ts","../../src/icons.ts","../../src/theme.ts","../../../../src/pointer/multi-tap/index.ts","../../src/storage.ts","../../../../src/view/ok-cancel/index.ts","../../../../src/view/checkbox/index.tsx","../../../../src/view/color-picker/index.ts","../../../../src/view/slider/index.ts","../../../../src/view/input-file/index.ts","../external \"crypto\"","../../../src/async/index.ts","../../../src/async/throttler.ts","../../../src/async/update-tasks.ts","../../../src/color/color.ts","../../../src/util/util.ts","../../../src/converter/index.ts","../../../src/converter/enum.ts","../../../src/converter/object.ts","../../src/dom.ts","../../../src/factory/index.ts","../../../../src/view/button/button.tsx","../../../../src/pointer/multi-tap/multi-tap.ts","../../../src/factory/image.ts","../../../src/factory/input.tsx","../../../../src/view/input/input.tsx","../../../../src/view/label/label.tsx","../../../../src/view/ok-cancel/ok-cancel.tsx","../../src/fileapi.ts","../../../src/font/index.ts","../../../src/font/fredericka.ts","../../../src/font/josefin.ts","../../../src/font/mystery-quest.ts","../../../src/font/roboto.ts","../../../src/gesture/gesture.ts","../../../src/gesture/moves.ts","../../../src/gesture/basic-handler.ts","../../../src/gesture/finger.ts","../../../src/layout/index.ts","../../../src/layout/sidemenu.tsx","../../../src/layout/stack.tsx","../../../src/layout/tabstrip.tsx","../../../src/permissive-json/index.ts","../../../src/permissive-json/permissive-json.ts","../../../src/permissive-json/tokenizer.ts","../../../src/pointer/index.ts","../../../src/pointer/pointer.ts","../../../src/pointer/pointer-manager.ts","../../src/random.ts","../../src/url-args.ts","../../../src/validator/index.ts","../../../src/validator/validator.ts","../../../src/view/index.ts","../../../../src/view/checkbox/checkbox.tsx","../../../../src/view/color-picker/color-picker.tsx","../../../../src/view/combo/combo.tsx","../../../../src/view/combo-lang/index.tsx","../../../../src/view/combo-lang/combo-lang.tsx","../../../../src/view/expand/index.ts","../../../../src/view/expand/expand.tsx","../../../../src/view/input-color/index.tsx","../../../../src/view/input-color/input-color.tsx","../../../../src/view/slider/slider.tsx","../../../../src/view/input-date/index.ts","../../../../src/view/input-date/input-date.tsx","../../../../src/view/input-file/input-file.tsx","../../../../src/view/input-float/index.ts","../../../../src/view/input-float/input-float.tsx","../../../../src/view/input-image/index.tsx","../../tfw/dist/view/input-image/input-image.yaml","../../../../src/view/input-integer/index.ts","../../../../src/view/input-integer/input-integer.tsx","../../../../src/view/list/index.tsx","../../../../src/view/list/list.tsx","../../../../../src/view/optional/optional-checkbox/index.tsx","../../../../../src/view/optional/optional-checkbox/optional-checkbox.tsx","../../../../../src/view/optional/optional-input/index.tsx","../../../../../src/view/optional/optional-input/optional-input.tsx","../../../../src/view/progress/index.ts","../../../../src/view/progress/progress.tsx","../../../src/watcher/index.ts","../../../src/watcher/watcher.ts","../../../../src/watcher/resize/index.ts","../../../../src/watcher/resize/resize.ts","../../../../src/watcher/resize/resize-observer.ts","../../../src/web-service/index.ts","../../../src/web-service/web-service.ts","../../../src/web-service/user.ts","../../../src/web-service/encryption.ts","../external \"path\"","../external \"fs\"","date-util/date-util.ts","state/state.ts","app/splash.ts","translate/translate.ts","service/mkdirp.ts","service/file-system.ts","settings/settings.ts","view/patient-short-desc/patient-short-desc.tsx","guid.ts","manager/patient.ts","service/patient.ts","manager/structure/structure.ts","view/field/text/text.tsx","view/consultation-form/consultation-form.tsx","view/page/consultation/consultation.tsx","view/page/patient/section/consultations/consultations.tsx","view/page/patient/section/prescriptions/prescriptions.tsx","view/page/patient/section/vaccins/vaccin-form/vaccin-form.tsx","view/page/patient/section/vaccins/vaccins.tsx","view/patient-form/patient-form.tsx","view/page/patient/patient.tsx","view/patient-summary-button/patient-summary-button.tsx","view/page/patients/patients-filter.ts","view/page/patients/patients.tsx","service/patient-import.ts","view/page/import-patient/import-patient.tsx","app/app.tsx","app/app.container.tsx","manager/structure/parser.ts","service/structure/parser.ts","service/structure/structure.ts","serviceWorker.ts","index.tsx"],"names":["default","v","isNaN","hexa","defVal","text","startsWith","num","this","_element","element","evt","rect","ripple","Object","val","Intl","keys","name","dialog","value","defaultValue","draw","hand","exports","color_1","has3","COLOR","style","light","storage","key","module","require","color","R","chroma","shift","G","B","parseRGB","call","input","INV6","delta","hexa2","parseInt","charAt","INV15","substr","INV255","cursor","url","Promise","fetch","then","k","minLine","maxLine","output","push","line","abort","eventDoubleTap","fire","eventTripleTap","timeStamp","lastEvent","type","_this","p","React","createElement","anchorElem","document","body","appendChild","click","Gesture","prototype","handlers","pan","swipe","dx","dy","Finger","index","fingers","length","Sidemenu","componentDidMount","componentDidUpdate","Tabstrip","Parser","tokenizer_1","listeners_1","state","duration","int","min","Math","floor","float","max","itemWithSpacesInsteadOfPlus","setState","hue","react_1","percent","classes","reader","onerror","reject","err","readAsText","file","handler","files","console","error","InputFile","wide","that","List","visibleItemsCount","clear","i","set","login","username","createUndefinedDate","Date","date2seconds","date","getTime","formatDate","dateFormatter","format","isDefinedDate","seconds2date","seconds","DateTimeFormat","weekday","year","month","day","INITIAL_STATE","consultationId","page","patient","id","lastname","firstname","secondname","gender","size","country","birth","DateUtil","patients","store","createStore","action","clearPatient","dispatch","setConsultationId","uuid","setPage","setPatient","setPatients","param","trace","splash","getElementById","classList","add","window","setTimeout","removeChild","_","Tfw","make","genderValue","trim","toUpperCase","path","fs","_0777","mkdirP","opts","f","made","mode","xfs","undefined","process","umask","cb","resolve","mkdir","er","code","dirname","stat","er2","isDirectory","sync","mkdirSync","err0","statSync","err1","FS","Path","deleteFolder","foldername","a","fullPath","ROOT","removeDirectory","exists","filename","existsSync","readText","readFile","data","writeText","content","mkdirp","writeFile","cwd","readdir","withFileTypes","entries","entry","isFile","removeFile","rmdir","unlink","DATA","remoteServer","secretCode","organizationId","structureId","save","Async","Debouncer","FileSystem","JSON","stringify","parse","Error","structure","REACT_APP_WEBSOINS","PatientShortDesc","Converter","StringArray","props","className","Settings","age","getFullYear","join","title","toLowerCase","hasSecondName","Component","UuidV4","createPatientFromSummary","summary","Guid","now","admissions","created","attachments","edited","exams","picture","vaccins","getAllConsultationsBefore","timeInSeconds","consultations","admission","visits","consultation","enter","sort","c1","c2","getConsultationFromUuid","warn","getSummary","getSummaryFromRecord","removeConsultation","filter","setSummary","patientSummary","updateConsultation","newConsultation","version","record","Integer","Util","normalizeFirstname","Enum","normalizeLastname","deletePatient","getAllPatients","getPatient","PatientManager","patientFilename","PATIENTS_FILENAME","PATIENTS","Map","loadPatientsFile","patientsFile","listToSort","records","map","sortedList","b","A","item","info","has","cachedPatient","get","log","patientContent","sanitizePatient","addUniqueIdIfMissing","addPatientToPatientsFile","savePatientsFile","delete","patientId","removePatientFromPatientsFile","patientsFileContent","count","createPatientsFieldsFromStructure","getCurrentStructure","patientsFields","patientFields","forEach","patientField","createPatientsFieldsCaptionsFromStructure","patientsFieldsCaptions","toText","caption","getFieldCaption","fieldKey","formFields","getValueCaption","typeKey","valueKey","types","values","children","subType","Input","View","Text","handleChange","onChange","getTypeKey","suggestions","typeName","t","getSuggestionsForType","label","width","StructureManager","normalizedValue","Expand","Checkbox","InputDate","ConsultationForm","renderPrevConsultation","field","getFieldValue","updateField","sanitizedValue","updateBooleanField","overrideConsultation","fields","renderField","hasChildren","renderFields","prevConsultations","tags","Array","isArray","isBool","getFieldValueAsBoolean","bind","indexOf","getFieldValueAsDate","form","forms","Button","Consultations","oldPatientSummary","oldConsultationId","refresh","PatientService","copy","handleOK","onBack","handleCancel","handleDataChange","time","consultationDate","Translate","ok","icon","small","warning","onClick","cancel","flat","obj","renderAdmission","renderConsultation","dat","dark","onConsultationClick","onNewConsultationClick","Storage","PrefixedLocalStorage","Prescriptions","prescripteur","service","selection","update","newState","handlePrint","pages","groupSelectionByPage","itemKey","selected","selectionWithoutItem","sectionKey","renderSection","section","subSectionElements","subSectionKey","subSection","renderCheckbox","isSelected","setItemSelection","renderSections","sortedSelection","split","exam","getPageElement","newElement","VaccinForm","handleLotChange","lot","onLotChange","handleDateChange","onDateChange","vaccinDate","vaccinLot","Touchable","Vaccins","renderVaccin","vaccin","currentVaccin","today","yy","mm","getMonth","dd","getDate","bad","handleVaccinClick","getVaccinCaption","Factory","Dialog","confirm","onUpdateVaccin","vaccinIds","gridTemplate","ceil","InputInteger","PatientForm","newPatientSummary","fireChange","handleLastnameChange","handleFirstnameChange","handleSecondnameChange","handleCountryChange","handleGenderChange","handleSizeChange","handleBirthChange","birthTime","lastName","transform","focus","firstName","secondName","birthday","TabStrip","Layout","Patient","oldPatientId","handleConsultationClick","State","handleNewConsultationClick","handleUpdateVaccin","handleBack","handleEditPatient","show","editPatient","handleDeletePatient","footer","hide","confirmDeletePatient","back","headers","prescriptions","PatientSummaryButton","handleClick","PatientsExport","patientSummaries","_filteredList","footPrints","slice","simplifyName","simpleLastName","simpleFirstName","idx","match","test","LETTERS_TO_CHANGE","out","letter","replacement","findReplacement","candidates","Patients","oldPatient","oldPatients","patientsFilter","filteredPatients","refreshPatientsFilter","filteredList","handlePatientChange","onPatientChange","renderPatientSummaryButton","handlePatientSummaryClick","onPatientClick","handleAddNewPatient","wait","addPatient","newPatient","newPatients","PatientsFilter","exit","Package","importPatients","enabled","canAddNewPatient","itemHeight","items","mapper","PatientImport","_patientsCount","_records","ex","patientsFilePath","Progress","Flex","ImportPatient","progress","addedPatientsCount","rejectedPatientsCount","handleFilesClick","PatientImportService","create","importer","patientsCount","patientIndex","patientBio","getPatientBio","isWorking","accept","height","Stack","App","handlePatientClick","handleEndOfConsultationEdition","onEndOfConsultationEdition","Splash","fullscreen","scrollable","connect","AppView","RX_LINE","levels","lineNumber","level","computeLevel","pop","m","exec","parseLine","message","parseLazy","flattenFormsFields","list","recursiveFlattenFormsFields","child","captionA","captionB","parseExams","examsDef","raw","sectionName","examsSection","subSectionName","examsSubSection","parseFormFields","result","fringe","toIntl","parsePatient","stringifiedPatientDef","parseVaccins","stringifiedVaccins","def","WebService","structures","find","parsedStructure","sources","Boolean","location","hostname","addEventListener","preventDefault","nw","Window","toggleFullscreen","initialize","StructureService","ReactDOM","render","StrictMode","Theme","register","white","black","bg0","bg1","bg2","bg3","bgP","bgPL","bgPD","bgS","bgSD","bgSL","apply","Font","loadJosefin","start","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.47ff7357.chunk.js","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar async_1 = __importDefault(require(\"./async\"));\nvar color_1 = __importDefault(require(\"./color\"));\nvar converter_1 = __importDefault(require(\"./converter\"));\nvar dom_1 = __importDefault(require(\"./dom\"));\nvar escape_handler_1 = __importDefault(require(\"./escape-handler\"));\nvar factory_1 = __importDefault(require(\"./factory\"));\nvar fileapi_1 = __importDefault(require(\"./fileapi\"));\nvar font_1 = __importDefault(require(\"./font\"));\nvar gesture_1 = __importDefault(require(\"./gesture\"));\nvar icons_1 = __importDefault(require(\"./icons\"));\nvar intl_1 = __importDefault(require(\"./intl\"));\nvar layout_1 = __importDefault(require(\"./layout\"));\nvar listeners_1 = __importDefault(require(\"./listeners\"));\nvar permissive_json_1 = __importDefault(require(\"./permissive-json\"));\nvar pointer_1 = __importDefault(require(\"./pointer\"));\nvar random_1 = __importDefault(require(\"./random\"));\nvar storage_1 = __importDefault(require(\"./storage\"));\nvar theme_1 = __importDefault(require(\"./theme\"));\nvar url_args_1 = __importDefault(require(\"./url-args\"));\nvar util_1 = __importDefault(require(\"./util\"));\nvar validator_1 = __importDefault(require(\"./validator\"));\nvar view_1 = __importDefault(require(\"./view\"));\nvar watcher_1 = __importDefault(require(\"./watcher\"));\nvar web_service_1 = __importDefault(require(\"./web-service\"));\nvar cfg_json_1 = __importDefault(require(\"./cfg.json\"));\nexports.default = {\n    Async: async_1.default,\n    Color: color_1.default,\n    Converter: converter_1.default,\n    Dom: dom_1.default,\n    EscapeHandler: escape_handler_1.default,\n    Factory: factory_1.default,\n    Fileapi: fileapi_1.default,\n    Font: font_1.default,\n    Gesture: gesture_1.default,\n    Icons: icons_1.default,\n    Intl: intl_1.default,\n    Layout: layout_1.default,\n    Listeners: listeners_1.default,\n    PermissiveJSON: permissive_json_1.default,\n    Pointer: pointer_1.default,\n    Random: random_1.default,\n    Storage: storage_1.default,\n    Theme: theme_1.default,\n    UrlArgs: url_args_1.default,\n    Util: util_1.default,\n    Validator: validator_1.default,\n    View: view_1.default,\n    Watcher: watcher_1.default,\n    WebService: web_service_1.default,\n    description: cfg_json_1.default.description,\n    name: cfg_json_1.default.name,\n    version: cfg_json_1.default.version\n};\nconsole.log(\"Using ToloFrameWork Library v\" + cfg_json_1.default.version);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction castBoolean(v, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = false; }\n    switch (typeof v) {\n        case \"undefined\":\n            return defaultValue;\n        case \"boolean\":\n            return v;\n        case \"number\":\n            return v !== 0;\n        case \"string\":\n            var text = v.trim().toLowerCase();\n            if (text === \"true\" || text === \"yes\")\n                return true;\n            var num = parseInt(text, 10);\n            if (!isNaN(num))\n                return num !== 0;\n            return false;\n        default:\n            return false;\n    }\n}\nexports.default = castBoolean;\n//# sourceMappingURL=boolean.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction castString(value, defaultValue) {\n    var t = typeof value;\n    if (t === \"number\" && !isNaN(value)) {\n        return \"\" + value;\n    }\n    if (t === \"string\")\n        return value;\n    return defaultValue;\n}\nexports.default = castString;\n//# sourceMappingURL=string.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar boolean_1 = __importDefault(require(\"../converter/boolean\"));\nvar integer_1 = __importDefault(require(\"../converter/integer\"));\nvar unit_1 = __importDefault(require(\"../converter/unit\"));\nvar icons_1 = require(\"../icons\");\nrequire(\"./icon.css\");\nvar EnumPenColor;\n(function (EnumPenColor) {\n    EnumPenColor[EnumPenColor[\"B\"] = 0] = \"B\";\n    EnumPenColor[EnumPenColor[\"W\"] = 1] = \"W\";\n    EnumPenColor[EnumPenColor[\"P\"] = 2] = \"P\";\n    EnumPenColor[EnumPenColor[\"PD\"] = 3] = \"PD\";\n    EnumPenColor[EnumPenColor[\"PL\"] = 4] = \"PL\";\n    EnumPenColor[EnumPenColor[\"S\"] = 5] = \"S\";\n    EnumPenColor[EnumPenColor[\"SD\"] = 6] = \"SD\";\n    EnumPenColor[EnumPenColor[\"SL\"] = 7] = \"SL\";\n})(EnumPenColor || (EnumPenColor = {}));\nvar Icon = /** @class */ (function (_super) {\n    __extends(Icon, _super);\n    function Icon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Icon.isValidIconName = function (name) {\n        return typeof icons_1.iconsBook[name] !== 'undefined';\n    };\n    Icon.getAllIconNames = function () {\n        return Object.keys(icons_1.iconsBook).sort();\n    };\n    Icon.prototype.render = function () {\n        var p = this.props;\n        var visible = boolean_1.default(p.visible, true);\n        if (!visible)\n            return null;\n        var enabled = boolean_1.default(p.enabled, true);\n        var animate = boolean_1.default(p.animate, false);\n        var flipH = boolean_1.default(p.flipH, false);\n        var flipV = boolean_1.default(p.flipV, false);\n        var size = unit_1.default(p.size, \"28px\");\n        var content = castContent(p.content);\n        var rotate = integer_1.default(p.rotate, 0);\n        var onClick = p.onClick;\n        var classes = [\"tfw-view-Icon\"];\n        if (typeof p.className === 'string')\n            classes.push(p.className);\n        var svgContent = createSvgContent(content, p);\n        if (!svgContent)\n            return null;\n        if (!enabled)\n            classes.push(\"disabled\");\n        if (animate)\n            classes.push(\"animate\");\n        if (typeof onClick === 'function' && enabled)\n            classes.push(\"active\");\n        var transform = \"\";\n        if (rotate !== 0) {\n            transform += \"rotate(\" + rotate + \"deg) \";\n        }\n        if (flipH || flipV) {\n            transform += \"scale(\" + (flipH ? -1 : 1) + \",\" + (flipV ? -1 : 1) + \")\";\n        }\n        var style = { width: size, height: size };\n        if (transform.length > 0)\n            style.transform = transform;\n        return (React.createElement(\"svg\", { className: classes.join(\" \"), viewBox: \"-65 -65 130 130\", preserveAspectRatio: \"xMidYMid\", width: size, height: size, onClick: enabled ? onClick : undefined, style: style },\n            svgContent,\n            React.createElement(\"g\", { strokeWidth: \"6\", fill: \"none\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }, createSvgContent(content, p))));\n    };\n    return Icon;\n}(React.Component));\nexports.default = Icon;\nfunction createSvgContent(def, props, key) {\n    if (key === void 0) { key = \"\"; }\n    var elementName = def[0];\n    var _a = parseDef(def), attributes = _a.attributes, children = _a.children;\n    if (typeof elementName === 'undefined')\n        return React.createElement(\"g\", { key: key });\n    var attribs = manageColors(__assign({}, attributes), props);\n    if (key.length > 0)\n        attribs.key = key;\n    return React.createElement(elementName, attribs, children.map(function (child, index) { return createSvgContent(child, props, \"\" + index); }));\n}\nvar CLASSES = [\"P\", \"PL\", \"PD\", \"S\", \"SL\", \"SD\"];\nvar PENS = \"01234567\";\n/**\n * If the value of the attribute \"fill\" is an element of CLASSES,\n * it will be removed and replace with a class.\n * Same thing for the attibute \"stroke\".\n *\n * @example\n * manageColors({ fill: \"1\" }) === { className: \"thn-svg-fill-1\" }\n *\n * @param   attribs [description]\n * @param   props   [description]\n * @returns         [description]\n */\nfunction manageColors(attribs, props) {\n    var e_1, _a;\n    // @TODO For special forms of \"fill\" and \"stroke\", add classes.\n    var classes = (attribs.className || \"\").split(\" \");\n    try {\n        for (var _b = __values([\"fill\", \"stroke\"]), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var attribName = _c.value;\n            var attribValue = \"\" + attribs[attribName];\n            if (typeof attribValue === 'undefined')\n                continue;\n            if (attribValue === 'undefined')\n                continue;\n            var key = (\"\" + attribValue).toUpperCase();\n            if (CLASSES.indexOf(key) === -1 && PENS.indexOf(key) === -1)\n                continue;\n            if (PENS.indexOf(attribValue) !== -1) {\n                // If we find fill=\"3\", then we must look for property pen3.\n                var pen = getPen(attribValue, props);\n                if (typeof pen === 'string') {\n                    if (CLASSES.indexOf(pen) === -1) {\n                        attribs[attribName] = pen;\n                    }\n                    else {\n                        delete attribs[attribName];\n                        classes.push(\"thm-svg-\" + attribName + pen);\n                    }\n                    continue;\n                }\n            }\n            delete attribs[attribName];\n            classes.push(\"thm-svg-\" + attribName + key);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    attribs.className = classes.join(\" \").trim();\n    return attribs;\n}\nfunction getPen(penIndex, props) {\n    switch (penIndex) {\n        case \"0\": return props.pen0;\n        case \"1\": return props.pen1;\n        case \"2\": return props.pen2;\n        case \"3\": return props.pen3;\n        case \"4\": return props.pen4;\n        case \"5\": return props.pen5;\n        case \"6\": return props.pen6;\n        case \"7\": return props.pen7;\n        default: return \"#000\";\n    }\n}\nfunction parseDef(_a) {\n    var _b = __read(_a, 3), name = _b[0], arg1 = _b[1], arg2 = _b[2];\n    var attributes;\n    var children;\n    if (Array.isArray(arg1))\n        children = arg1;\n    else if (typeof arg1 !== 'undefined')\n        attributes = arg1;\n    if (Array.isArray(arg2))\n        children = arg2;\n    else if (typeof arg2 !== 'undefined')\n        attributes = arg2;\n    if (typeof attributes === 'undefined')\n        attributes = {};\n    if (typeof children === 'undefined')\n        children = [];\n    return { attributes: attributes, children: children };\n}\nfunction castContent(content) {\n    if (content === void 0) { content = \"ok\"; }\n    if (Array.isArray(content))\n        return content;\n    return icons_1.iconsBook[content] || [];\n}\n//# sourceMappingURL=icon.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction castInteger(v, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = 0; }\n    var defVal = Math.floor(0.5 + defaultValue);\n    switch (typeof v) {\n        case \"boolean\":\n            return v ? 1 : 0;\n        case \"number\":\n            return Math.floor(0.5 + v);\n        case \"string\":\n            var text = v.trim().toLowerCase();\n            if (text.startsWith(\"0x\")) {\n                var hexa = parseInt(text.substr(2), 16);\n                return isNaN(hexa) ? defVal : hexa;\n            }\n            if (text.startsWith(\"0b\")) {\n                var hexa = parseInt(text.substr(2), 2);\n                return isNaN(hexa) ? defVal : hexa;\n            }\n            if (text.startsWith(\"0o\")) {\n                var hexa = parseInt(text.substr(2), 8);\n                return isNaN(hexa) ? defVal : hexa;\n            }\n            var num = parseFloat(text);\n            if (isNaN(num))\n                return defVal;\n            return Math.floor(0.5 + num);\n        default:\n            return defVal;\n    }\n}\nexports.default = castInteger;\n//# sourceMappingURL=integer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar button_1 = require(\"./button\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return button_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RX_CSS_UNIT = /^(-?[.0-9]+)[ \\n\\r]*([a-z%]*)/;\nfunction castUnit(v, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = \"100%\"; }\n    if (typeof v === \"number\")\n        return v + \"px\";\n    if (typeof v !== \"string\")\n        return defaultValue;\n    var text = (\"\" + v).trim().toLowerCase();\n    if (text === \"auto\" || text === \"inherit\")\n        return text;\n    if (text.startsWith(\"calc(\"))\n        return text;\n    var m = RX_CSS_UNIT.exec(text);\n    if (!m)\n        return defaultValue;\n    var scalar = parseFloat(m[1]);\n    if (isNaN(scalar) || scalar === 0)\n        return \"0\";\n    var unit = m[2].length < 1 ? \"px\" : m[2];\n    return \"\" + scalar + unit;\n}\nexports.default = castUnit;\n//# sourceMappingURL=unit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar input_1 = require(\"./input\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return input_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar label_1 = require(\"./label\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return label_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gesture_1 = require(\"./gesture\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return gesture_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction castDouble(v, defVal) {\n    if (defVal === void 0) { defVal = 0; }\n    switch (typeof v) {\n        case \"boolean\":\n            return v ? 1 : 0;\n        case \"number\":\n            return v;\n        case \"string\":\n            var text = v.trim().toLowerCase();\n            if (text.startsWith(\"0x\")) {\n                var hexa = parseInt(text.substr(2), 16);\n                return isNaN(hexa) ? defVal : hexa;\n            }\n            if (text.startsWith(\"0b\")) {\n                var hexa = parseInt(text.substr(2), 2);\n                return isNaN(hexa) ? defVal : hexa;\n            }\n            if (text.startsWith(\"0o\")) {\n                var hexa = parseInt(text.substr(2), 8);\n                return isNaN(hexa) ? defVal : hexa;\n            }\n            var num = parseFloat(text);\n            if (isNaN(num))\n                return defVal;\n            return num;\n        default:\n            return defVal;\n    }\n}\nexports.default = castDouble;\n//# sourceMappingURL=double.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar string_1 = __importDefault(require(\"./string\"));\n/**\n * If `value` is not an array, return `defaultArray`.\n * Else if `defaultString` is undefined, return `value`.\n * Else return a copy of `value` with a castString on all its elements.\n *\n * @param   value         [description]\n * @param   defaultArray  [description]\n * @param   defaultString [description]\n * @returns               [description]\n */\nfunction castStringArray(value, defaultArray, defaultString) {\n    if (defaultArray === void 0) { defaultArray = []; }\n    if (defaultString === void 0) { defaultString = \"\"; }\n    if (typeof value === \"string\")\n        return [value];\n    if (!Array.isArray(value))\n        return defaultArray;\n    if (typeof defaultString === \"undefined\")\n        return value;\n    return value.map(function (item) { return string_1.default(item, defaultString); });\n}\nexports.default = castStringArray;\n//# sourceMappingURL=string-array.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar color_1 = require(\"./color\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return color_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction castArray(v, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = []; }\n    if (typeof v === \"undefined\")\n        return defaultValue;\n    if (Array.isArray(v))\n        return v;\n    return [v];\n}\nexports.default = castArray;\n//# sourceMappingURL=array.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar string_1 = __importDefault(require(\"../converter/string\"));\nvar boolean_1 = __importDefault(require(\"../converter/boolean\"));\nrequire(\"./flex.css\");\nvar Flex = /** @class */ (function (_super) {\n    __extends(Flex, _super);\n    function Flex() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Flex.prototype.render = function () {\n        var p = this.props;\n        var wide = boolean_1.default(p.wide, true);\n        var dir = string_1.default(p.dir, \"row\");\n        var style = {\n            justifyContent: string_1.default(p.justifyContent, \"space-around\"),\n            alignItems: string_1.default(p.alignItems, \"center\"),\n            flexWrap: castWrap(string_1.default(p.wrap, ''))\n        };\n        var classes = [\"tfw-view-flex\", \"dir-\" + dir, string_1.default(p.className, '')];\n        if (wide)\n            classes.push(\"wide\");\n        return (React.createElement(\"div\", { className: classes.join(\" \"), style: style }, p.children));\n    };\n    return Flex;\n}(React.Component));\nexports.default = Flex;\nfunction castWrap(v) {\n    switch (v) {\n        case 'nowrap': return 'nowrap';\n        case 'wrap': return 'wrap';\n        case 'wrap-reverse': return 'wrap-reverse';\n        case 'inherit': return 'inherit';\n        case 'initial': return 'initial';\n        case 'unset': return 'unset';\n        default: return 'nowrap';\n    }\n}\n//# sourceMappingURL=flex.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar theme_1 = __importDefault(require(\"../theme\"));\nvar multi_tap_1 = __importDefault(require(\"../pointer/multi-tap\"));\nvar string_1 = __importDefault(require(\"../converter/string\"));\nvar boolean_1 = __importDefault(require(\"../converter/boolean\"));\nvar function_1 = __importDefault(require(\"../converter/function\"));\nrequire(\"./touchable.css\");\nvar Touchable = /** @class */ (function () {\n    function Touchable(args) {\n        this._enabled = true;\n        this.accent = false;\n        this.color = \"#000\";\n        this.removeTouchDisk = undefined;\n        this.element = args.element;\n        this.enabled = boolean_1.default(args.enabled, true);\n        this.color = string_1.default(args.color, \"\");\n        this.onTap = function_1.default(args.onTap);\n    }\n    Object.defineProperty(Touchable.prototype, \"element\", {\n        get: function () { return this._element; },\n        set: function (element) {\n            var that = this;\n            if (typeof element === \"undefined\")\n                return;\n            element.addEventListener(\"keydown\", function (evt) {\n                if (!that.enabled)\n                    return;\n                var key = evt.key;\n                if (key === \" \" || key === \"Enter\") {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                    var rect = element.getBoundingClientRect();\n                    that.fire({\n                        x: rect.width / 2,\n                        y: rect.height / 2,\n                        target: element\n                    });\n                }\n            });\n            var multitap = new multi_tap_1.default();\n            element.addEventListener(\"pointerdown\", function (evt) {\n                multitap.handlePointerDown(evt);\n            });\n            element.addEventListener(\"pointerup\", function (evt) {\n                multitap.handlePointerUp(evt);\n                if (!that.removeTouchDisk)\n                    return;\n                that.removeTouchDisk();\n                delete that.removeTouchDisk;\n            });\n            multitap.eventTap.add(function (evt) {\n                if (!that.enabled)\n                    return;\n                var rect = element.getBoundingClientRect();\n                var style = window.getComputedStyle(element);\n                var screen = createScreen(rect);\n                screen.style.borderRadius = style.getPropertyValue(\"border-radius\");\n                var x = evt.x || 0;\n                var y = evt.y || 0;\n                var w = Math.max(x, rect.width - x);\n                var h = Math.max(y, rect.height - y);\n                var radius = Math.ceil(1.1 * Math.sqrt(w * w + h * h));\n                var ripple = document.createElement(\"div\");\n                screen.appendChild(ripple);\n                ripple.style.left = x - radius + \"px\";\n                ripple.style.top = y - radius + \"px\";\n                ripple.style.width = 2 * radius + \"px\";\n                ripple.style.height = 2 * radius + \"px\";\n                if (that.color.length > 0) {\n                    ripple.style.background = that.color;\n                }\n                else {\n                    ripple.style.background = theme_1.default.isDark() ? \"#fff\" : \"#000\";\n                }\n                window.setTimeout(function () { return ripple.className = \"open\"; });\n                window.setTimeout(function () { return document.body.removeChild(screen); }, 500);\n                that.fire({ x: x, y: y, target: element });\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Touchable.prototype, \"enabled\", {\n        get: function () { return this._enabled; },\n        set: function (value) { this._enabled = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Touchable.prototype.fire = function (point) {\n        if (!this.enabled)\n            return;\n        var handler = this.onTap;\n        if (typeof handler === \"function\") {\n            handler(point);\n        }\n    };\n    return Touchable;\n}());\nexports.default = Touchable;\nfunction createScreen(rect) {\n    var div = document.createElement(\"div\");\n    div.className = \"tfw-behavior-touchable\";\n    div.style.left = rect.left + \"px\";\n    div.style.top = rect.top + \"px\";\n    div.style.width = rect.width + \"px\";\n    div.style.height = rect.height + \"px\";\n    document.body.appendChild(div);\n    return div;\n}\n//# sourceMappingURL=touchable.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Listeners are function with only one argument of type TArgument.\n * @param name [description]\n */\nvar Listeners = /** @class */ (function () {\n    function Listeners(name) {\n        if (name === void 0) { name = \"Listener\"; }\n        this.name = name;\n        this.listeners = [];\n    }\n    Object.defineProperty(Listeners.prototype, \"length\", {\n        /**\n         * How many listeners are currently registred.\n         */\n        get: function () {\n            return this.listeners.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Listeners.prototype.add = function (listener) {\n        this.remove(listener);\n        this.listeners.push(listener);\n    };\n    Listeners.prototype.fire = function (argument) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(this.listeners), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var listener = _c.value;\n                try {\n                    listener(argument);\n                }\n                catch (ex) {\n                    console.error(\"[\" + this.name + \"] Error in a listener!\");\n                    console.error(\">  ex.: \", ex);\n                    console.error(\">  arg.: \", argument);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    Listeners.prototype.remove = function (listener) {\n        this.listeners = this.listeners.filter(function (x) { return x !== listener; });\n    };\n    Listeners.prototype.removeAll = function () {\n        this.listeners.splice(0, this.listeners.length);\n    };\n    return Listeners;\n}());\nexports.default = Listeners;\n//# sourceMappingURL=listeners.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar string_1 = __importDefault(require(\"./converter/string\"));\nvar gCurrentLanguage = localStorage.getItem(\"CurrentLanguage\") || navigator.language.split(\"-\")[0];\nvar Intl = /** @class */ (function () {\n    function Intl(translations) {\n        this.translations = translations;\n    }\n    Object.defineProperty(Intl, \"lang\", {\n        get: function () {\n            if (typeof gCurrentLanguage === 'string' && gCurrentLanguage.length > 1) {\n                return gCurrentLanguage;\n            }\n            return \"en\";\n        },\n        set: function (_value) {\n            if (typeof _value !== \"string\")\n                return;\n            var value = _value.split(\"-\")[0];\n            gCurrentLanguage = value;\n            localStorage.setItem(\"CurrentLanguage\", value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Intl.addTextToIntl = function (lang, text, intlOrText) {\n        var e_1, _a;\n        var intl = Intl.toIntl(intlOrText, lang);\n        intl[lang] = text;\n        var result = {};\n        try {\n            for (var _b = __values(Object.keys(intl)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var key = _c.value;\n                var val = intl[key];\n                if (val.trim().length === 0)\n                    continue;\n                result[key] = val;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n    };\n    Intl.make = function (translations) {\n        var instance = new Intl(translations);\n        return instance.translate.bind(instance);\n    };\n    Intl.toIntl = function (text, optionalLang) {\n        var _a, _b, e_2, _c, _d;\n        var lang = string_1.default(optionalLang, Intl.lang);\n        if (!text)\n            return _a = {}, _a[lang] = \"\", _a;\n        if (Array.isArray(text)) {\n            return _b = {}, _b[lang] = text.map(function (item) { return \"\" + item; }).join(\"\"), _b;\n        }\n        if (typeof text === \"object\") {\n            var obj = {};\n            var keys = Object.keys(text)\n                .filter(function (key) { return typeof key === 'string'; })\n                .filter(function (key) { return key.trim().length > 1; });\n            try {\n                for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n                    var key = keys_1_1.value;\n                    obj[key] = text[key];\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (keys_1_1 && !keys_1_1.done && (_c = keys_1.return)) _c.call(keys_1);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            return obj;\n        }\n        return _d = {}, _d[lang] = text, _d;\n    };\n    Intl.toText = function (intl, optionalLang) {\n        if (!intl)\n            return \"\";\n        if (typeof intl === \"string\")\n            return intl;\n        var lang = string_1.default(optionalLang, Intl.lang);\n        var text = intl[lang];\n        if (typeof text === \"string\")\n            return text;\n        var defaultText = intl[Object.keys(intl)[0]];\n        if (typeof defaultText === \"string\")\n            return defaultText;\n        return \"\";\n    };\n    Intl.prototype.translate = function (item) {\n        var e_3, _a;\n        var params = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            params[_i - 1] = arguments[_i];\n        }\n        try {\n            if (this.translations[gCurrentLanguage]) {\n                var translation = this.translations[gCurrentLanguage][item];\n                if (translation)\n                    return addParams(translation, params);\n            }\n            // If we don't find a translation in the current language,\n            // We look in the other languages.\n            var languages = Object.keys(this.translations);\n            try {\n                for (var languages_1 = __values(languages), languages_1_1 = languages_1.next(); !languages_1_1.done; languages_1_1 = languages_1.next()) {\n                    var lang = languages_1_1.value;\n                    var vocabulary = this.translations[lang];\n                    var translation = vocabulary[item];\n                    if (typeof translation !== \"string\")\n                        continue;\n                    return addParams(translation, params);\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (languages_1_1 && !languages_1_1.done && (_a = languages_1.return)) _a.call(languages_1);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            console.error(\"Missing translation for item \\\"\" + item + \"\\\"!\", params);\n            return \"\";\n        }\n        catch (ex) {\n            throw Error(\"Error while looking for a translation of \\\"\" + item + \"\\\":\\n\" + ex);\n        }\n    };\n    return Intl;\n}());\nexports.default = Intl;\n// Used for the states automate in order to parse a translation\n// With placeholders.\nvar Mode;\n(function (Mode) {\n    Mode[Mode[\"Text\"] = 0] = \"Text\";\n    Mode[Mode[\"Escape\"] = 1] = \"Escape\";\n    Mode[Mode[\"Placeholder\"] = 2] = \"Placeholder\";\n})(Mode || (Mode = {}));\n/**\n * In a translation, you can find placeholders for potential params.\n * They are marked with a dollar and a digit from 1 to 9.\n * For instance: \"Welcome mister $1!\".\n *\n * Order doesn't matter and you can have several occurences of the same\n * placeholder.\n * For instance: \"Hello $2! Welcome into $1. $1 is the best...\".\n *\n * @param   translation - A string which can own placeholders.\n * @param   params - Array of replacements for placeholders.\n * @returns The transformed string.\n */\nfunction addParams(translation, params) {\n    var output = \"\";\n    var mark = 0;\n    var mode = Mode.Text;\n    var paramIndex = -1;\n    var paramValue = \"\";\n    for (var index = 0; index < translation.length; index++) {\n        var c = translation.charAt(index);\n        switch (mode) {\n            case Mode.Text:\n                if (c === \"\\\\\") {\n                    mode = Mode.Escape;\n                    output += translation.substr(mark, index - mark);\n                    mark = index + 1;\n                }\n                else if (c === \"$\") {\n                    mode = Mode.Placeholder;\n                    output += translation.substr(mark, index - mark);\n                    mark = index + \"$1\".length;\n                }\n                break;\n            case Mode.Escape:\n                mode = Mode.Text;\n                break;\n            case Mode.Placeholder:\n                mode = Mode.Text;\n                paramIndex = parseInt(c, 10);\n                if (isNaN(paramIndex))\n                    throw Error(\"Parsing error at position \" + index + \" for translation \\\"\" + translation + \"\\\"!\\nEscape \\\"$\\\" if you don't want to use a placeholder.\");\n                paramValue = params[paramIndex - 1] || \"\";\n                output += paramValue;\n                break;\n            default:\n                mode = Mode.Text;\n        }\n    }\n    return output + translation.substr(mark);\n}\n//# sourceMappingURL=intl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Font = /** @class */ (function () {\n    function Font(name) {\n        this.name = name;\n    }\n    Font.prototype.load = function () {\n        console.log(\"Font loaded: \", this.name);\n    };\n    return Font;\n}());\nexports.default = Font;\n//# sourceMappingURL=font.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The function to call as much as you want. It will perform the debouce for you.\n * Put in the same args as the `action` function.\n *\n * * action -  Action to call. Two consecutive actions cannot be  called if there is\n * less than `delay` ms between them.\n * * delay - Number of milliseconds.\n */\nfunction default_1(action, delay) {\n    var timer = 0;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (timer)\n            window.clearTimeout(timer);\n        timer = window.setTimeout(function () {\n            timer = 0;\n            action.apply(void 0, __spread(args));\n        }, delay);\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=debouncer.js.map","\"use strict\";\n/**\n * The ESCAPE key is often used to close a dialog, collapse a combo list, ...\n * This module helps you nesting closable things.\n *\n * @example\n * import * from EscapeHandler from \"./tfw/escape-handler\"\n * EscapeHandler.add(() => myDialog.close());\n * EscapeHandler.fire();\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fire = exports.add = void 0;\nexports.default = { add: add, fire: fire };\nvar handlers = [];\nvar initialized = false;\nfunction add(listener) {\n    if (!initialized) {\n        initialized = true;\n        addKeyboardListener();\n    }\n    handlers.push(listener);\n}\nexports.add = add;\nfunction fire() {\n    if (handlers.length === 0)\n        return;\n    var handler = handlers.pop();\n    if (typeof handler === \"function\")\n        handler();\n}\nexports.fire = fire;\nfunction addKeyboardListener() {\n    document.addEventListener(\"keydown\", function (evt) {\n        if (evt.key !== \"Escape\")\n            return;\n        evt.stopPropagation();\n        evt.preventDefault();\n        fire();\n    }, true);\n}\n//# sourceMappingURL=escape-handler.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Dialog = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_dom_1 = __importDefault(require(\"react-dom\"));\nvar icon_1 = __importDefault(require(\"../view/icon\"));\nvar flex_1 = __importDefault(require(\"../layout/flex\"));\nvar escape_handler_1 = __importDefault(require(\"../escape-handler\"));\nvar boolean_1 = __importDefault(require(\"../converter/boolean\"));\nvar string_1 = __importDefault(require(\"../converter/string\"));\nvar unit_1 = __importDefault(require(\"../converter/unit\"));\nrequire(\"./dialog.css\");\nvar button_1 = __importDefault(require(\"../view/button\"));\nvar intl_1 = __importDefault(require(\"../intl\"));\nvar _ = intl_1.default.make(require(\"./dialog.json\"));\nexports.default = {\n    alert: alert,\n    confirm: confirm,\n    error: error,\n    show: show,\n    wait: wait\n};\n/**\n * Ensure a string is an enum for modal alignement.\n */\nfunction castAlign(value, defaultValue) {\n    switch (value) {\n        case \"TL\": return \"TL\";\n        case \"TR\": return \"TR\";\n        case \"BL\": return \"BL\";\n        case \"BR\": return \"BR\";\n        default: return defaultValue;\n    }\n}\n/**\n * Ensure a string is an enum for modal background.\n */\nfunction castBackground(value, defaultValue) {\n    switch (value) {\n        case \"none\": return \"none\";\n        case \"dark\": return \"dark\";\n        case \"light\": return \"light\";\n        case \"darker\": return \"darker\";\n        case \"lighter\": return \"lighter\";\n        case \"darkest\": return \"darkest\";\n        case \"lightest\": return \"lightest\";\n        default: return defaultValue;\n    }\n}\nvar Dialog = /** @class */ (function () {\n    function Dialog(options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        this.footer = null;\n        this.hide = function () {\n            if (!_this._options.closeOnEscape) {\n                _this._hide();\n            }\n            else {\n                escape_handler_1.default.fire();\n            }\n        };\n        this._options = __assign({ closeOnEscape: true, footer: React.createElement(button_1.default, { icon: \"close\", label: _('close'), flat: true, onClick: function () { return _this.hide(); } }) }, options);\n        this._options.align = castAlign(this._options.align, \"\");\n        this._options.background = castBackground(this._options.background, \"darker\");\n        this._options.closeOnEscape = boolean_1.default(this._options.closeOnEscape, true);\n        this._options.closeOnBackgroundClick = boolean_1.default(this._options.closeOnBackgroundClick, false);\n        this._options.padding = unit_1.default(this._options.padding, \"0.5rem\");\n        this.footer = this._options.footer || null;\n        var screen = document.createElement(\"div\");\n        var classNames = [\n            \"tfw-factory-dialog\",\n            \"align-\" + this._options.align,\n            \"background-\" + this._options.background\n        ];\n        screen.className = classNames.join(\" \");\n        document.body.appendChild(screen);\n        this._screen = screen;\n        if (this._options.closeOnBackgroundClick) {\n            screen.addEventListener(\"pointerup\", function (evt) {\n                if (evt.target !== screen)\n                    return;\n                _this.hide();\n            });\n        }\n        if (this._options.closeOnEscape) {\n            escape_handler_1.default.add(function () { return _this._hide(); });\n        }\n    }\n    Object.defineProperty(Dialog.prototype, \"onClose\", {\n        set: function (slot) {\n            this._options.onClose = slot;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Dialog.prototype.show = function () {\n        var _this = this;\n        var opt = this._options;\n        var title = string_1.default(opt.title, \"\").trim();\n        var icon = string_1.default(opt.icon, \"\").trim();\n        var footer = this.footer ? (React.createElement(\"footer\", { className: \"thm-bg2 thm-ele-button\" }, this.footer)) : null;\n        var header = null;\n        if (title.length > 0) {\n            header = (React.createElement(\"header\", { className: \"thm-bgPD\" },\n                icon.length > 0 ? React.createElement(icon_1.default, { content: icon }) : null,\n                React.createElement(\"div\", null, title)));\n        }\n        react_dom_1.default.render((React.createElement(\"div\", { className: \"thm-ele-dialog thm-bg1\", style: {\n                maxWidth: typeof opt.maxWidth === 'number' ? opt.maxWidth + \"px\" : \"auto\",\n                padding: \"0\"\n            } },\n            header,\n            React.createElement(\"div\", { style: { padding: opt.padding } }, opt.content),\n            footer)), this._screen);\n        setTimeout(function () { return _this._screen.classList.add(\"show\"); }, 10);\n        setTimeout(function () { return _this._screen.classList.add(\"active\"); }, 200);\n    };\n    Dialog.prototype._hide = function () {\n        var screen = this._screen;\n        screen.classList.remove(\"show\");\n        setTimeout(function () {\n            document.body.removeChild(screen);\n        }, 200);\n        var onClose = this._options.onClose;\n        if (typeof onClose === 'function') {\n            requestAnimationFrame(onClose);\n        }\n    };\n    return Dialog;\n}());\nexports.Dialog = Dialog;\nfunction alert(content) {\n    return new Promise(function (resolve, reject) {\n        var dialog = new Dialog({ onClose: resolve, content: content, maxWidth: 420 });\n        var close = function () {\n            try {\n                resolve();\n            }\n            catch (ex) {\n                console.error(\"Error in the resolution of tfw/factory/dialog/alert!\", ex);\n                reject(ex);\n            }\n            finally {\n                dialog.hide();\n            }\n        };\n        dialog.footer = (React.createElement(button_1.default, { icon: \"close\", label: _('close'), flat: true, onClick: close }));\n        dialog.show();\n    });\n}\nfunction error(content) {\n    return new Promise(function (resolve, reject) {\n        var dialog = new Dialog({ onClose: resolve, content: content, maxWidth: 420 });\n        var close = function () {\n            try {\n                resolve();\n            }\n            catch (ex) {\n                console.error(\"Error in the resolution of tfw/factory/dialog/error!\", ex);\n                reject(ex);\n            }\n            finally {\n                dialog.hide();\n            }\n        };\n        dialog.footer = (React.createElement(button_1.default, { icon: \"close\", label: _('close'), flat: true, onClick: close }));\n        dialog.show();\n    });\n}\n/**\n * ```\n * const isConfirmed = await Dialog.confirm(\"Delete file\", <p>Are you sure?</p>)\n * ```\n * @param caption - Title and button caption.\n * @param content - Content to display.\n */\nfunction confirm(caption, content) {\n    return new Promise(function (resolve) {\n        var dialog = new Dialog({ title: caption, content: content });\n        var close = function (confirmed) {\n            dialog.hide();\n            // Wait a bit to prevent the click from going to the next window.\n            window.setTimeout(function () { return resolve(confirmed); }, 200);\n        };\n        dialog.onClose = function () { return close(false); };\n        var btnCancel = (React.createElement(button_1.default, { key: \"cancel\", flat: true, label: _(\"cancel\"), onClick: function () { return close(false); } }));\n        var btnOK = (React.createElement(button_1.default, { key: \"ok\", warning: true, label: caption, onClick: function () { return close(true); } }));\n        dialog.footer = [btnCancel, btnOK];\n        dialog.show();\n    });\n}\nfunction show(options) {\n    var dialog = new Dialog(options);\n    dialog.show();\n    return dialog;\n}\nfunction wait(label, task, blocking) {\n    if (blocking === void 0) { blocking = true; }\n    return __awaiter(this, void 0, void 0, function () {\n        var content, dialog, close;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!!blocking) return [3 /*break*/, 2];\n                    return [4 /*yield*/, task];\n                case 1: return [2 /*return*/, _a.sent()];\n                case 2:\n                    content = (React.createElement(flex_1.default, { dir: \"row\", justifyContent: \"flex-start\", alignItems: \"center\" },\n                        React.createElement(icon_1.default, { content: \"wait\", animate: true }),\n                        React.createElement(\"div\", null, label)));\n                    dialog = new Dialog({ content: content, footer: null, closeOnEscape: false });\n                    dialog.show();\n                    close = dialog.hide.bind(dialog);\n                    return [2 /*return*/, new Promise(function (resolve, reject) {\n                            task.then(function (result) {\n                                close();\n                                resolve(result);\n                            }, function (error) {\n                                console.error(error);\n                                close();\n                                reject(error);\n                            });\n                        })];\n            }\n        });\n    });\n}\n//# sourceMappingURL=dialog.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar combo_1 = require(\"./combo\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return combo_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar string_1 = __importDefault(require(\"../converter/string\"));\nvar boolean_1 = __importDefault(require(\"../converter/boolean\"));\nvar touchable_1 = __importDefault(require(\"../behavior/touchable\"));\nrequire(\"./touchable.css\");\nvar Touchable = /** @class */ (function (_super) {\n    __extends(Touchable, _super);\n    function Touchable(props) {\n        var _this = _super.call(this, props) || this;\n        _this.ref = React.createRef();\n        _this.handleClick = function (point) {\n            var handler = _this.props.onClick;\n            if (typeof handler === 'function') {\n                handler(point);\n            }\n        };\n        _this.touchable = new touchable_1.default({\n            onTap: _this.handleClick,\n            color: props.color\n        });\n        return _this;\n    }\n    Touchable.prototype.componentDidMount = function () {\n        var element = this.ref.current;\n        if (!element)\n            return;\n        this.touchable.element = element;\n    };\n    Touchable.prototype.render = function () {\n        var p = this.props;\n        var enabled = boolean_1.default(p.enabled, true);\n        var classes = [\"tfw-view-Touchable\"]\n            .concat(string_1.default(p.className, \"\").split(\" \"));\n        if (enabled)\n            classes.push(\"enabled\");\n        return React.createElement(\"div\", { ref: this.ref, tabIndex: 0, className: classes.join(\" \"), title: p.title }, p.children);\n    };\n    return Touchable;\n}(React.Component));\nexports.default = Touchable;\n//# sourceMappingURL=touchable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return util_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EMPTY_FUNCTION = function () { };\nfunction castBoolean(value, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = EMPTY_FUNCTION; }\n    if (typeof value === \"function\")\n        return value;\n    return defaultValue;\n}\nexports.default = castBoolean;\n//# sourceMappingURL=function.js.map","\"use strict\";\n/**\n * This module provides a list of SVG icons definitions.\n * You can register new one if you wish.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar e_1, _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.iconsBook = exports.register = void 0;\n/**\n * Register new icons.\n * @param icons - The  keys are the  name of the  icons, the\n * value is the object representing an SVG image.\n */\nfunction register(icons) {\n    var e_2, _a;\n    try {\n        for (var _b = __values(Object.keys(icons)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var key = _c.value;\n            var val = icons[key];\n            exports.iconsBook[key] = val;\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n}\nexports.register = register;\n/**\n * @param d - Path definition, as in the attribute `d` of the\n * SVG tag `path`.\n * @returns SVG description.\n */\nfunction draw(d) {\n    return [\"path\", { d: d, stroke: \"none\", fill: 0 }];\n}\nexports.iconsBook = {\n    \"3d\": draw('M-35,-25H-15A10,10,0,0,1,-5,-15V15A10,10,0,0,1,-15,25H-35V15H-15V5H-30V-5H-15V-15H-35V-25M5,-25H20A15,15,0,0,1,35,-10V10A15,15,0,0,1,20,25H5V-25M20,15A5,5,0,0,0,25,10V-10A5,5,0,0,0,20,-15H15V15H20Z'),\n    android: draw(\"M15,-35H10V-40H15M-10,-35H-15V-40H-10M18,-49L24,-56C25,-57,25,-58,24,-59C23,-60,22,-60,21,-59L13,-52C9,-54,5,-55,0,-55C-5,-55,-9,-54,-13,-52L-21,-59C-22,-60,-23,-60,-24,-59C-25,-58,-25,-57,-24,-56L-18,-49C-25,-44,-30,-35,-30,-25H30C30,-35,25,-44,18,-49M43,-20A8,8,0,0,0,35,-12V23A8,8,0,0,0,43,30A8,8,0,0,0,50,23V-12A8,8,0,0,0,43,-20M-42,-20A8,8,0,0,0,-50,-12V23A8,8,0,0,0,-42,30A8,8,0,0,0,-35,23V-12A8,8,0,0,0,-42,-20M-30,30A5,5,0,0,0,-25,35H-20V53A8,8,0,0,0,-12,60A8,8,0,0,0,-5,53V35H5V53A8,8,0,0,0,13,60A8,8,0,0,0,20,53V35H25A5,5,0,0,0,30,30V-20H-30V30Z\"),\n    bug: draw(\"M10,0H-10V-10H10M10,20H-10V10H10M40,-20H26C24,-24 21,-27 17,-30L25,-38L18,-45L7,-34C5,-35 3,-35 0,-35C-2,-35 -5,-35 -7,-34L-18,-45L-25,-38L-17,-30C-21,-27 -24,-24 -26,-20H-40V-10H-30C-30,-8 -30,-7 -30,-5V0H-40V10H-30V15C-30,17 -30,18 -30,20H-40V30H-26C-21,39 -11,45 0,45C11,45 21,39 26,30H40V20H30C30,18 30,17 30,15V10H40V0H30V-5C30,-7 30,-8 30,-10H40V-20Z\"),\n    camera: draw(\"M-40,-40H-25L-15,-50H15L25,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M0,-25A25,25,0,0,0,-25,0A25,25,0,0,0,0,25A25,25,0,0,0,25,0A25,25,0,0,0,0,-25M0,-15A15,15,0,0,1,15,0A15,15,0,0,1,0,15A15,15,0,0,1,-15,0A15,15,0,0,1,0,-15Z\"),\n    cancel: draw(\"M7,0L35,28V35H28L0,7L-28,35H-35V28L-7,0L-35,-28V-35H-28L0,-7L28,-35H35V-28L7,0Z\"),\n    center: draw(\"M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M35,35H15V45H35A10,10,0,0,0,45,35V15H35M35,-45H15V-35H35V-15H45V-35A10,10,0,0,0,35,-45M-35,-35H-15V-45H-35A10,10,0,0,0,-45,-35V-15H-35M-35,15H-45V35A10,10,0,0,0,-35,45H-15V35H-35V15Z\"),\n    child: draw(\"M5,-50V-10H45A40,40,0,0,0,5,-50M37,19C42,13,45,4,45,-5H-28L-32,-15H-50V-5H-39C-39,-5,-29,15,-28,17C-34,20,-37,26,-37,33A18,18,0,0,0,-20,50C-11,50,-4,44,-3,35H8C9,44,16,50,25,50A18,18,0,0,0,43,33C43,27,40,23,37,19M-20,40A8,8,0,0,1,-27,33A8,8,0,0,1,-20,25A8,8,0,0,1,-12,33A8,8,0,0,1,-20,40M25,40A8,8,0,0,1,18,33A8,8,0,0,1,25,25A8,8,0,0,1,33,33A8,8,0,0,1,25,40Z\"),\n    clipboard: draw('M35,-45H14C12,-51,7,-55,0,-55C-7,-55,-12,-51,-14,-45H-35A10,10,0,0,0,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35A10,10,0,0,0,35,-45M0,-45A5,5,0,0,1,5,-40A5,5,0,0,1,0,-35A5,5,0,0,1,-5,-40A5,5,0,0,1,0,-45M-25,-25H25V-35H35V35H-35V-35H-25V-25Z'),\n    close: draw(\"M0,-50C28,-50,50,-28,50,0C50,28,28,50,0,50C-28,50,-50,28,-50,0C-50,-28,-28,-50,0,-50M18,-25L0,-7L-18,-25L-25,-18L-7,0L-25,18L-18,25L0,7L18,25L25,18L7,0L25,-18L18,-25Z\"),\n    code: draw(\"M13,23L36,0L13,-23L20,-30L50,0L20,30L13,23M-13,23L-36,0L-13,-23L-20,-30L-50,0L-20,30L-13,23Z\"),\n    copy: draw(\"M35,45H-20V-25H35M35,-35H-20A10,10,0,0,0,-30,-25V45A10,10,0,0,0,-20,55H35A10,10,0,0,0,45,45V-25A10,10,0,0,0,35,-35M20,-55H-40A10,10,0,0,0,-50,-45V25H-40V-45H20V-55Z\"),\n    counter: draw(\"M-40,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M-40,-30V30H-5V-30H-40M40,30V-30H34C35,-27,35,-25,35,-24C34,-21,32,-17,31,-16L20,-3L36,-4L36,3L10,2L10,-3C10,-3,25,-19,26,-20C27,-22,30,-30,23,-30C16,-30,17,-23,17,-23L9,-23C9,-23,9,-27,11,-30H5V30H18L18,26L23,26C23,26,27,25,27,20C28,15,23,15,23,15C22,15,17,16,17,20H10C10,20,10,9,23,9C36,9,35,20,35,20C35,20,35,26,29,28L32,30H40M-15,20H-23V-9L-32,-6V-12L-16,-18H-15V20Z\"),\n    cut: draw(\"M35,-45L5,-15L15,-5L50,-40V-45M0,3A3,3,0,0,1,-2,0A3,3,0,0,1,0,-2A3,3,0,0,1,3,0A3,3,0,0,1,0,3M-30,40A10,10,0,0,1,-40,30C-40,24,-35,20,-30,20A10,10,0,0,1,-20,30C-20,36,-24,40,-30,40M-30,-20A10,10,0,0,1,-40,-30C-40,-36,-35,-40,-30,-40A10,10,0,0,1,-20,-30C-20,-24,-24,-20,-30,-20M-12,-22C-11,-24,-10,-27,-10,-30A20,20,0,0,0,-30,-50A20,20,0,0,0,-50,-30A20,20,0,0,0,-30,-10C-27,-10,-24,-11,-22,-12L-10,0L-22,12C-24,11,-27,10,-30,10A20,20,0,0,0,-50,30A20,20,0,0,0,-30,50A20,20,0,0,0,-10,30C-10,27,-11,24,-12,22L0,10L35,45H50V40L-12,-22Z\"),\n    delete: draw(\"M35,-40H18L13,-45H-12L-17,-40H-35V-30H35M-30,35A10,10,0,0,0,-20,45H20A10,10,0,0,0,30,35V-25H-30V35Z\"),\n    direction: draw(\"M10,13V0H-10V15H-20V-5A5,5,0,0,1,-15,-10H10V-22L28,-5M49,-4L4,-49H3C2,-50,-2,-50,-4,-49L-49,-4C-50,-2,-50,2,-49,4L-4,49C-2,50,2,51,4,49L49,4C51,2,51,-2,49,-4Z\"),\n    \"double-tap\": draw('M-10,-15A5,5,0,0,1,-5,-20A5,5,0,0,1,0,-15V7L6,8L31,19C33,20,35,23,35,26V48C35,52,32,55,28,55H-5C-7,55,-9,54,-10,53L-34,32L-31,28C-30,27,-28,26,-27,26H-26L-10,35V-15M-5,-35A20,20,0,0,1,15,-15C15,-7,11,-1,5,2V-4C8,-7,10,-11,10,-15A15,15,0,0,0,-5,-30A15,15,0,0,0,-20,-15C-20,-11,-18,-7,-15,-4V2C-21,-1,-25,-7,-25,-15A20,20,0,0,1,-5,-35M-5,-45A30,30,0,0,1,25,-15C25,-7,21,1,16,7L11,4C16,0,20,-7,20,-15A25,25,0,0,0,-5,-40A25,25,0,0,0,-30,-15C-30,-5,-24,4,-15,8V13C-27,9,-35,-2,-35,-15A30,30,0,0,1,-5,-45Z'),\n    down: draw(\"M-30,-30L0,30,30,-30\"),\n    \"down-double\": draw(\"M-30,-40L0,-10,30,-40M-30,10L0,40,30,10\"),\n    earth: draw(\"M29,27C28,23,24,20,20,20H15V5A5,5,0,0,0,10,0H-20V-10H-10A5,5,0,0,0,-5,-15V-25H5A10,10,0,0,0,15,-35V-37C30,-31,40,-17,40,0C40,10,36,20,29,27M-5,40C-25,37,-40,20,-40,0C-40,-3,-40,-6,-39,-9L-15,15V20A10,10,0,0,0,-5,30M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50Z\"),\n    edit: draw(\"M24,-46C22,-46,20,-46,19,-44L8,-34L35,-7L45,-17C48,-21,48,-25,45,-28L29,-44C28,-46,26,-46,24,-46M5,-30L-36,11L-23,12L-22,23L-11,24L-9,37L31,-3M-39,15L-47,49L-14,40L-15,29L-27,28L-28,16\"),\n    eraser: draw(\"M21,-42L46,-17C50,-14,50,-7,46,-3L0,43C-8,50,-20,50,-28,43L-46,25C-50,21,-50,15,-46,11L7,-42C11,-46,17,-46,21,-42M-39,18L-21,36C-17,39,-11,39,-7,36L11,18L-14,-7L-39,18Z\"),\n    export: draw(\"M-35,40H35V30H-35M35,-15H15V-45H-15V-15H-35L0,20L35,-15Z\"),\n    fan: draw(\"M0,-5A5,5,0,0,0,-5,0A5,5,0,0,0,0,5A5,5,0,0,0,5,0A5,5,0,0,0,0,-5M3,-50C25,-50,26,-32,14,-26C9,-24,7,-19,6,-14C8,-13,10,-11,12,-9C30,-19,50,-15,50,3C50,25,32,26,26,14C24,9,19,7,14,6C13,8,11,10,9,12C19,30,15,50,-2,50C-25,50,-25,32,-14,26C-9,24,-7,19,-6,14C-8,13,-10,11,-12,9C-30,19,-50,15,-50,-2C-50,-25,-32,-26,-26,-14C-24,-9,-19,-7,-14,-6C-13,-8,-11,-10,-9,-12C-19,-30,-15,-50,3,-50Z\"),\n    file: draw(\"M10,-50H-30A10,10,0,0,0,-40,-40V40A10,10,0,0,0,-30,50H30A10,10,0,0,0,40,40V-20L10,-50M30,40H-30V-40H5V-15H30V40Z\"),\n    \"flag-jp\": [\n        \"g\", {\n            stroke: \"none\",\n        },\n        [\n            [\"path\", {\n                    fill: \"#000\",\n                    d: \"M-65,50h130v-100h-130z\",\n                }],\n            [\"path\", {\n                    fill: \"#fff\",\n                    d: \"M-60,45h120v-90h-120z\",\n                }],\n            [\"circle\", {\n                    fill: \"#bc002d\",\n                    r: 24,\n                }],\n        ],\n    ],\n    \"flag-fr\": [\n        \"g\", {\n            stroke: \"none\",\n        },\n        [\n            [\"path\", {\n                    fill: \"#000\",\n                    d: \"M-65,50h130v-100h-130z\",\n                }],\n            [\"path\", {\n                    fill: \"#002395\",\n                    d: \"M-60,45h40v-90h-40z\",\n                }],\n            [\"path\", {\n                    fill: \"#fff\",\n                    d: \"M-20,45h40v-90h-40z\",\n                }],\n            [\"path\", {\n                    fill: \"#ed2939\",\n                    d: \"M20,45h40v-90h-40z\",\n                }],\n        ],\n    ],\n    \"flag-it\": [\n        \"g\", {\n            stroke: \"none\",\n        },\n        [\n            [\"path\", {\n                    fill: \"#000\",\n                    d: \"M-65,50h130v-100h-130z\",\n                }],\n            [\"path\", {\n                    fill: \"#009246\",\n                    d: \"M-60,45h40v-90h-40z\",\n                }],\n            [\"path\", {\n                    fill: \"#fff\",\n                    d: \"M-20,45h40v-90h-40z\",\n                }],\n            [\"path\", {\n                    fill: \"#ce2b37\",\n                    d: \"M20,45h40v-90h-40z\",\n                }],\n        ],\n    ],\n    \"flag-de\": [\n        \"g\", {\n            stroke: \"none\",\n        },\n        [\n            [\"path\", {\n                    fill: \"#000\",\n                    d: \"M-65,41h130v-82h-130z\",\n                }],\n            [\"path\", {\n                    fill: \"#ffce00\",\n                    d: \"M-60,36h120v-24h-120z\",\n                }],\n            [\"path\", {\n                    fill: \"#dd0000\",\n                    d: \"M-60,12h120v-24h-120z\",\n                }],\n        ],\n    ],\n    \"flag-en\": [\n        \"g\", {\n            stroke: \"none\",\n        },\n        [\n            [\"path\", {\n                    fill: \"#000\",\n                    d: \"M-65,37h130v-75h-130z\",\n                }],\n            [\"path\", {\n                    fill: \"#bb133e\",\n                    d: \"M-60,32h120v-65h-120z\",\n                }],\n            [\"path\", {\n                    fill: \"#fff\",\n                    d: \"M-60,22h120v5h-120z\",\n                }],\n            [\"path\", {\n                    fill: \"#fff\",\n                    d: \"M-60,12h120v5h-120z\",\n                }],\n            [\"path\", {\n                    fill: \"#fff\",\n                    d: \"M-60,2h120v5h-120z\",\n                }],\n            [\"path\", {\n                    fill: \"#fff\",\n                    d: \"M-60,-8h120v5h-120z\",\n                }],\n            [\"path\", {\n                    fill: \"#fff\",\n                    d: \"M-60,-18h120v5h-120z\",\n                }],\n            [\"path\", {\n                    fill: \"#fff\",\n                    d: \"M-60,-28h120v5h-120z\",\n                }],\n            [\"path\", {\n                    fill: \"#002664\",\n                    d: \"M-60,-33h48v35h-48z\",\n                }],\n        ],\n    ],\n    folder: draw(\"M40,30H-40V-20H40M40,-30H0L-10,-40H-40C-46,-40,-50,-36,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-20C50,-26,46,-30,40,-30Z\"),\n    font: draw(\"M25,-20H40V40H45V45H25V40H30V25H10L3,40H10V45H-10V40H-5L25,-20M30,-15L13,20H30V-15M-35,-45H-10C-4,-45,0,-41,0,-35V20H-15V-5H-30V20H-45V-35C-45,-41,-41,-45,-35,-45M-30,-35V-15H-15V-35H-30Z\"),\n    \"format-align-center\": draw(\"M-45,-45H45V-35H-45V-45M-25,-25H25V-15H-25V-25M-45,-5H45V5H-45V-5M-25,15H25V25H-25V15M-45,35H45V45H-45V35Z\"),\n    \"format-align-justify\": draw(\"M-45,-45H45V-35H-45V-45M-45,-25H45V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H45V25H-45V15M-45,35H45V45H-45V35Z\"),\n    \"format-align-left\": draw(\"M-45,-45H45V-35H-45V-45M-45,-25H15V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H15V25H-45V15M-45,35H45V45H-45V35Z\"),\n    \"format-align-right\": draw(\" M-45,-45H45V-35H-45V-45M-15,-25H45V-15H-15V-25M-45,-5H45V5H-45V-5M-15,15H45V25H-15V15M-45,35H45V45H-45V35Z \"),\n    \"format-bold\": draw(\"M8,18H-10V3H8A8,8,0,0,1,15,10A8,8,0,0,1,8,18M-10,-27H5A8,8,0,0,1,13,-20A8,8,0,0,1,5,-12H-10M18,-6C23,-9,26,-15,26,-20C26,-31,18,-40,6,-40H-25V30H10C21,30,29,22,29,11C29,3,24,-3,18,-6Z\"),\n    \"format-italic\": draw(\"M-10,-40V-25H1L-16,15H-30V30H10V15H-1L16,-25H30V-40H-10Z\"),\n    \"format-float-center\": draw(\"M-15,-25H15V5H-15V-25M-45,-45H45V-35H-45V-45M-45,15H45V25H-45V15M-45,35H25V45H-45V35Z\"),\n    \"format-float-left\": draw(\"M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-25V-15H-5V-25H45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z\"),\n    \"format-float-none\": draw(\"M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z\"),\n    \"format-float-right\": draw(\"M15,-25H45V5H15V-25M-45,-45H45V-35H-45V-45M5,-25V-15H-45V-25H5M-15,-5V5H-45V-5H-15M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z\"),\n    \"format-header\": draw(\"M-40,-40H-30V-10H-10V-40H0V30H-10V0H-30V30H-40V-40M13,-23L31,-5L13,13L20,20L45,-5L20,-30L13,-23Z\"),\n    \"format-underline\": draw(\"M-35,45H35V35H-35V45M0,25A30,30,0,0,0,30,-5V-45H18V-5A18,18,0,0,1,0,13A18,18,0,0,1,-17,-5V-45H-30V-5A30,30,0,0,0,0,25Z\"),\n    fullscreen: draw(\"M-35,-35H-10V-25H-25V-10H-35V-35M10,-35H35V-10H25V-25H10V-35M25,10H35V35H10V25H25V10M-10,25V35H-35V10H-25V25H-10Z\"),\n    gamepad: draw('M-30,-15H-20V-5H-10V5H-20V15H-30V5H-40V-5H-30V-15M33,-15A8,8,0,0,1,40,-7A8,8,0,0,1,33,0A8,8,0,0,1,25,-7A8,8,0,0,1,33,-15M18,0A8,8,0,0,1,25,8A8,8,0,0,1,18,15A8,8,0,0,1,10,8A8,8,0,0,1,18,0M25,-35A35,35,0,0,1,60,0A35,35,0,0,1,25,35C15,35,6,31,0,24C-6,31,-15,35,-25,35A35,35,0,0,1,-60,0A35,35,0,0,1,-25,-35H25M-25,-25A25,25,0,0,0,-50,0A25,25,0,0,0,-25,25C-17,25,-10,21,-5,15H5C10,21,17,25,25,25A25,25,0,0,0,50,0A25,25,0,0,0,25,-25H-25Z'),\n    gear: draw(\"M0,18A18,18,0,0,1,-17,0A18,18,0,0,1,0,-17A18,18,0,0,1,18,0A18,18,0,0,1,0,18M37,5C37,3,38,2,38,0C38,-2,37,-3,37,-5L48,-13C49,-14,49,-15,48,-16L38,-34C38,-35,36,-35,35,-35L23,-30C20,-32,18,-33,14,-35L13,-48C12,-49,11,-50,10,-50H-10C-11,-50,-12,-49,-12,-48L-14,-35C-17,-33,-20,-32,-23,-30L-35,-35C-36,-35,-38,-35,-38,-34L-48,-16C-49,-15,-49,-14,-48,-13L-37,-5C-37,-3,-37,-2,-37,0C-37,2,-37,3,-37,5L-48,13C-49,14,-49,15,-48,16L-38,34C-38,35,-36,35,-35,35L-23,30C-20,32,-17,33,-14,35L-12,48C-12,49,-11,50,-10,50H10C11,50,12,49,13,48L14,35C18,33,20,32,23,30L35,35C36,35,38,35,38,34L48,16C49,15,49,14,48,13L37,5Z\"),\n    gps: draw(\"M0,-20A20,20,0,0,1,20,0A20,20,0,0,1,0,20A20,20,0,0,1,-20,0A20,20,0,0,1,0,-20M-45,5H-55V-5H-45C-42,-26,-26,-42,-5,-45V-55H5V-45C26,-42,43,-26,45,-5H55V5H45C43,26,26,43,5,45V55H-5V45C-26,43,-42,26,-45,5M0,-35A35,35,0,0,0,-35,0A35,35,0,0,0,0,35A35,35,0,0,0,35,0A35,35,0,0,0,0,-35Z\"),\n    hand: draw(\"M-10,-50A10,10,0,0,1,0,-40V-17C0,-17,10,-19,10,-14C10,-14,20,-15,20,-10C20,-10,30,-11,30,-6C30,-6,40,-7,40,-2V15C40,20,25,45,25,50H-15C-15,50,-25,15,-40,5C-40,5,-45,-25,-20,0V-40A10,10,0,0,1,-10,-50Z\"),\n    heart: draw(\"M0,47L-7,40C-33,17,-50,1,-50,-17C-50,-33,-38,-45,-22,-45C-14,-45,-5,-41,0,-35C5,-41,14,-45,23,-45C38,-45,50,-33,50,-17C50,1,33,17,7,40L0,47Z\"),\n    help: draw('M-5,30H5V20H-5V30M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-30A20,20,0,0,0,-20,-10H-10A10,10,0,0,1,0,-20A10,10,0,0,1,10,-10C10,0,-5,-1,-5,15H5C5,4,20,3,20,-10A20,20,0,0,0,0,-30Z'),\n    hide: draw(\"M-1,-15L15,1C15,1,15,0,15,0A15,15,0,0,0,0,-15C0,-15,-1,-15,-1,-15M-22,-11L-15,-3C-15,-2,-15,-1,-15,0A15,15,0,0,0,0,15C1,15,2,15,3,15L11,22C8,24,4,25,0,25A25,25,0,0,1,-25,0C-25,-4,-24,-8,-22,-11M-50,-39L-39,-27L-36,-25C-45,-18,-51,-10,-55,0C-46,22,-25,38,0,38C8,38,15,36,22,33L24,35L39,50L45,44L-44,-45M0,-25A25,25,0,0,1,25,0C25,3,24,6,23,9L38,24C45,18,51,9,55,0C46,-22,25,-37,0,-37C-7,-37,-14,-36,-20,-34L-9,-23C-6,-24,-3,-25,0,-25Z\"),\n    home: draw(\"M-10,40V10H10V40H35V0H50L0,-45L-50,0H-35V40H-10Z\"),\n    image: draw(\"M5,-15H33L5,-42V-15M-30,-50H10L40,-20V40A10,10,0,0,1,30,50H-30C-36,50,-40,46,-40,40V-40C-40,-46,-36,-50,-30,-50M-30,40H15L30,40V0L10,20L0,10L-30,40M-20,-15A10,10,0,0,0,-30,-5A10,10,0,0,0,-20,5A10,10,0,0,0,-10,-5A10,10,0,0,0,-20,-15Z\"),\n    import: draw(\"M-15,20V-10H-35L0,-45L35,-10H15V20H-15M-35,40V30H35V40H-35Z\"),\n    improvement: draw(\"M0,50A50,50,0,0,1,-50,0A50,50,0,0,1,0,-50A50,50,0,0,1,50,0A50,50,0,0,1,0,50M0,-25L-25,0H-10V20H10V0H25L0,-25Z\"),\n    info: draw(\"M8,-40A8,8,0,0,0,0,-32A8,8,0,0,0,8,-25A8,8,0,0,0,15,-32A8,8,0,0,0,8,-40M6,-16C0,-16,-17,-3,-17,-3C-17,-2,-17,-2,-16,-1C-16,1,-16,1,-15,0C-14,0,-12,-2,-9,-3C1,-10,-8,6,-12,32C-14,45,-2,39,1,37C4,35,12,29,13,28C14,28,13,27,12,26C12,25,11,26,11,26C8,28,2,32,1,29C0,27,6,7,9,-6C10,-10,12,-17,6,-16Z\"),\n    invert: draw('M45,-15L25,-35V-20H-10V-10H25V5M-25,-5L-45,15L-25,35V20H10V10H-25V-5Z'),\n    left: [\"path\", { fill: 0, d: \"M40,-5V5H-20L8,33L0,40L-39,0L0,-40L8,-32L-20,-5H40Z\" }],\n    \"left-double\": draw(\"M-10,-30L-40,0,-10,30M40,-30L10,0,40,30\"),\n    link: draw(\"M-7,7C-5,9,-5,12,-7,14C-9,16,-12,16,-14,14C-24,4,-24,-11,-14,-21V-21L4,-39C13,-49,29,-49,39,-39C49,-29,49,-13,39,-4L31,4C32,0,31,-4,29,-8L32,-11C38,-16,38,-26,32,-32C26,-38,16,-38,11,-32L-7,-14C-13,-8,-13,1,-7,7M7,-14C9,-16,12,-16,14,-14C24,-4,24,11,14,21V21L-4,39C-13,49,-29,49,-39,39C-49,29,-49,13,-39,4L-31,-4C-31,0,-31,4,-29,8L-32,11C-38,16,-38,26,-32,32C-26,38,-16,38,-11,32L7,14C13,8,13,-1,7,-7C5,-9,5,-12,7,-14Z\"),\n    location: draw(\"M0,-2A13,13,0,0,1,-12,-15A13,13,0,0,1,0,-27A13,13,0,0,1,13,-15A13,13,0,0,1,0,-2M0,-50A35,35,0,0,0,-35,-15C-35,11,0,50,0,50C0,50,35,11,35,-15A35,35,0,0,0,0,-50Z\"),\n    logout: draw(\"M25,26V10H-10V-10H25V-26L51,0L25,26M5,-50A10,10,0,0,1,15,-40V-20H5V-40H-40V40H5V20H15V40A10,10,0,0,1,5,50H-40A10,10,0,0,1,-50,40V-40A10,10,0,0,1,-40,-50H5Z\"),\n    mail: draw(\"M40,-40H-40A10,10,0,0,0,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-30A10,10,0,0,0,40,-40M40,30H-40V-20L0,5L40,-20V30M40,-30L0,-5L-40,-30V-30H40V-30Z\"),\n    map: draw(\"M15,35L-15,24V-35L15,-24M43,-45C42,-45,42,-45,42,-45L15,-34L-15,-45L-43,-35C-44,-35,-45,-34,-45,-33V43A3,3,0,0,0,-42,45C-42,45,-42,45,-42,45L-15,34L15,45L43,36C44,35,45,34,45,33V-42A3,3,0,0,0,43,-45Z\"),\n    \"map-layer\": draw(\"M0,20L37,-9L45,-15L0,-50L-45,-15L-37,-9M0,33L-37,4L-45,10L0,45L45,10L37,4L0,33Z\"),\n    menu: draw(\"M-45,-30H45V-20H-45V-30M-45,-5H45V5H-45V-5M-45,20H45V30H-45V20Z\"),\n    microphone: draw('M0,-50A15,15,0,0,1,15,-35V-5A15,15,0,0,1,0,10A15,15,0,0,1,-15,-5V-35A15,15,0,0,1,0,-50M35,-5C35,13,22,27,5,30V45H-5V30C-22,27,-35,13,-35,-5H-25A25,25,0,0,0,0,20A25,25,0,0,0,25,-5H35Z'),\n    minus: draw(\"M35,5H-35V-5H35V5Z\"),\n    \"minus-o\": draw(\"M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M-25,5H25V-5H-25\"),\n    \"minus-small\": draw(\"M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M25,-5V5H-25V-5H25Z\"),\n    more: draw(\"M20,0A10,10,0,0,1,30,-10A10,10,0,0,1,40,0A10,10,0,0,1,30,10A10,10,0,0,1,20,0M-10,0A10,10,0,0,1,0,-10A10,10,0,0,1,10,0A10,10,0,0,1,0,10A10,10,0,0,1,-10,0M-40,0A10,10,0,0,1,-30,-10A10,10,0,0,1,-20,0A10,10,0,0,1,-30,10A10,10,0,0,1,-40,0Z\"),\n    motion: draw('M-10,-59C-15,-59,-19,-55,-19,-50C-19,-45,-15,-41,-10,-41C-5,-41,-1,-45,-1,-50C-1,-55,-5,-59,-10,-59M18,-55A37,37,0,0,0,55,-18V-25A30,30,0,0,1,25,-55H18M32,-55C32,-42,42,-32,55,-32V-38C46,-38,38,-46,38,-55H32M45,-55A10,10,0,0,0,55,-45V-55H45M-20,-40C-21,-40,-22,-40,-23,-39L-50,-31V-5H-41V-23L-30,-27L-50,50H-41L-27,9L-15,25V50H-6V18L-18,-5L-15,-19L-9,-10H15V-19H-3L-13,-36C-15,-38,-17,-40,-20,-40Z'),\n    move: draw('M5,-30V-5H30V-21L51,0L30,21V5H5V30H21L0,51L-21,30H-5V5H-30V21L-51,0L-30,-21V-5H-5V-30H-21L0,-51L21,-30H5Z'),\n    movie: draw(\"M44,-49L25,-45L38,-27L48,-29L44,-49M10,-42L0,-40L14,-23L24,-25L10,-42M-15,-37L-24,-35L-11,-18L-1,-20L-15,-37M-39,-32L-44,-32A10,10,0,0,0,-52,-20L-50,-10L-25,-15L-39,-32M-50,-10V40C-50,46,-45,50,-40,50H40C46,50,50,46,50,40V-10H-50Z\"),\n    mute: draw('M0,-40L-10,-30L0,-19M-39,-45L-45,-39L-21,-15H-45V15H-25L0,40V6L21,28C18,30,14,32,10,34V44C17,42,23,39,28,35L39,45L45,39L0,-6M35,0C35,5,34,9,32,13L40,21C43,15,45,8,45,0C45,-21,30,-39,10,-44V-34C24,-29,35,-16,35,0M23,0C23,-9,18,-16,10,-20V-9L22,3C23,2,23,1,23,0Z'),\n    ok: draw(\"M45,-25L-15,35L-42,8L-35,0L-15,21L38,-32L45,-25Z\"),\n    pack: [\"path\", { fill: 0, d: \"M45,23C45,24,44,26,42,27L3,49C2,50,1,50,0,50C-1,50,-2,50,-3,49L-42,27C-44,26,-45,24,-45,23V-22C-45,-24,-44,-26,-42,-27L-3,-49C-2,-50,-1,-50,0,-50C1,-50,2,-50,3,-49L42,-27C44,-26,45,-24,45,-22V23M0,-39L-35,-20V20L0,39L35,20V-20L0,-39M0,-29L24,-15L0,-1L-24,-15L0,-29M25,14L5,26V8L25,-3V14M-5,26L-25,14V-3L-5,8V26Z\" }],\n    pause: draw(\"M10,35H30V-35H10M-30,35H-10V-35H-30V35Z\"),\n    pin: draw('M20,0V-40H25V-50H-25V-40H-20V0L-30,10V20H-4V50H4V20H30V10L20,0Z'),\n    play: draw(\"M-20,-34V36L35,1L-20,-34Z\"),\n    plug: draw(\"M20,-25V-45H10V-25H-10V-45H-20V-25H-20C-25,-25,-30,-20,-30,-15V13L-12,30V45H13V30L30,13V-15C30,-20,25,-25,20,-25Z\"),\n    plus: draw(\"M35,5H5V35H-5V5H-35V-5H-5V-35H5V-5H35V5Z\"),\n    \"plus-o\": draw(\"M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M5,-25H-5V-5H-25V5H-5V25H5V5H25V-5H5V-25Z\"),\n    \"plus-small\": draw(\"M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M-5,-25H5V-5H25V5H5V25H-5V5H-25V-5H-5V-25Z\"),\n    print: [\"path\", {\n            fill: 0,\n            d: \"M30,-45H-30V-25H30M35,0A5,5,0,0,1,30,-5A5,5,0,0,1,35,-10A5,5,0,0,1,40,-5A5,5,0,0,1,35,0M20,35H-20V10H20M35,-20H-35A15,15,0,0,0,-50,-5V25H-30V45H30V25H50V-5A15,15,0,0,0,35,-20Z\",\n        }],\n    projector: draw('M15,-20V20H-35V-20H15M20,-30H-40A5,5,0,0,0,-45,-25V25A5,5,0,0,0,-40,30H20A5,5,0,0,0,25,25V8L45,28V-27L25,-7V-25A5,5,0,0,0,20,-30Z'),\n    python: draw('M36,-22A14,14,0,0,1,50,-8V11A14,14,0,0,1,36,25H0C0,27,2,30,4,30H25V38A14,14,0,0,1,11,53H-11A14,14,0,0,1,-25,38V19C-25,12,-19,5,-11,5H16C23,5,30,-1,30,-9V-22H36M14,36C12,36,11,38,11,41C11,44,12,44,14,44A4,4,0,0,0,18,41C18,38,16,36,14,36M-36,28C-44,28,-50,21,-50,13V-6C-50,-14,-44,-20,-36,-20H0C0,-22,-2,-25,-4,-25H-25V-33C-25,-41,-19,-47,-11,-47H11C19,-47,25,-41,25,-33V-14C25,-7,19,0,11,0H-16C-23,0,-30,6,-30,14V28H-36M-14,-31C-12,-31,-11,-33,-11,-36C-11,-39,-12,-39,-14,-39C-16,-39,-18,-39,-18,-36C-18,-33,-16,-31,-14,-31Z'),\n    question: draw(\"M-10,35H5V50H-10V35M0,-50C27,-49,38,-22,23,-2C18,3,12,7,8,11C5,15,5,20,5,25H-10C-10,17,-10,10,-7,5C-3,0,3,-3,8,-7C20,-18,17,-34,0,-35A15,15,0,0,0,-15,-20H-30A30,30,0,0,1,0,-50Z\"),\n    redo: draw(\"M32,-7C23,-15,11,-20,-2,-20C-26,-20,-45,-5,-52,16L-40,20C-35,4,-20,-7,-2,-7C7,-7,16,-4,23,2L5,20H50V-25L32,-7Z\"),\n    refresh: draw(\"M28,-28C21,-35,11,-40,0,-40A40,40,0,0,0,-40,0A40,40,0,0,0,0,40C19,40,34,27,39,10H28C24,22,13,30,0,30A30,30,0,0,1,-30,0A30,30,0,0,1,0,-30C8,-30,16,-27,21,-21L5,-5H40V-40L28,-28Z\"),\n    report: draw(\"M10,-50H-30A10,10,0,0,0,-40,-40V40A10,10,0,0,0,-30,50H30A10,10,0,0,0,40,40V-20L10,-50M30,40H-30V-40H5V-15H30V40M-10,5H-25V-5H-10V5M10,5H-5V-5H10V5M-10,20H-25V10H-10V20M10,20H-5V10H10V20M-10,35H-25V25H-10V35M10,35H-5V25H10V35Z\"),\n    resize: draw('M-10,45V35H-28L-5,13L-12,5L-35,28V10H-45V45H-10M13,-5L35,-28V-10H45V-45H10V-35H28L5,-12L13,-5Z'),\n    right: [\"path\", { fill: 0, d: \"M-40,-5V5H20L-7,33L0,40L39,0L0,-40L-7,-32L20,-5H-40Z\" }],\n    \"right-double\": draw(\"M10,-30L40,0,10,30M-40,-30L-10,0,-40,30\"),\n    run: draw(\"M23,-32A10,10,0,0,0,33,-42A10,10,0,0,0,23,-52A10,10,0,0,0,13,-42A10,10,0,0,0,23,-32M5,37L10,15L20,25V55H30V18L20,8L23,-7C29,0,39,5,50,5V-5C41,-5,33,-9,28,-17L23,-25C22,-28,18,-30,15,-30C13,-30,13,-29,11,-29L-15,-18V5H-5V-12L4,-15L-4,25L-28,20L-30,30L5,37M-40,-15A5,5,0,0,1,-45,-20A5,5,0,0,1,-40,-25H-25V-15H-40M-35,-35A5,5,0,0,1,-40,-40A5,5,0,0,1,-35,-45H-10V-35H-35M-45,5A5,5,0,0,1,-50,0A5,5,0,0,1,-45,-5H-25V5H-45Z\"),\n    search: draw(\"M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z\"),\n    select: draw(\"M35,35H-35V-35H15V-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-5H35M-20,-10L-27,-2L-5,20L45,-30L38,-37L-5,6L-20,-10Z\"),\n    sitemap: draw(\"M-15,-50V-20H-5V-5H-35C-41,-5,-45,-1,-45,5V20H-55V50H-25V20H-35V5H-5V20H-15V50H15V20H5V5H35V20H25V50H55V20H45V5C45,-1,41,-5,35,-5H5V-20H15V-50H-15Z\"),\n    unselect: draw(\"M35,-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35C45,-41,41,-45,35,-45M35,-35V35H-35V-35H35Z\"),\n    share: draw(\"M30,20C26,20,23,22,20,24L-15,3C-15,2,-15,1,-15,0C-15,-1,-15,-2,-15,-3L20,-24C23,-22,26,-20,30,-20A15,15,0,0,0,45,-35A15,15,0,0,0,30,-50A15,15,0,0,0,15,-35C15,-34,15,-33,15,-31L-20,-11C-22,-13,-26,-15,-30,-15A15,15,0,0,0,-45,0A15,15,0,0,0,-30,15C-26,15,-22,13,-20,11L16,32C16,33,15,34,15,35C15,43,22,50,30,50C38,50,45,43,45,35A15,15,0,0,0,30,20Z\"),\n    show: draw(\"M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M0,25A25,25,0,0,1,-25,0A25,25,0,0,1,0,-25A25,25,0,0,1,25,0A25,25,0,0,1,0,25M0,-37C-25,-37,-46,-22,-55,0C-46,22,-25,38,0,38C25,38,46,22,55,0C46,-22,25,-37,0,-37Z\"),\n    \"skip-next\": draw(\"M20,30H30V-30H20M-30,30L13,0L-30,-30V30Z\"),\n    \"skip-next2\": draw(\"M-40,-35V35L-5,0M30,-35V35H40V-35M-5,-35V35L30,0\"),\n    \"skip-prev\": draw(\"M-30,30V-30H-20V30H-30M-12,0L30,-30V30L-12,0Z\"),\n    \"skip-prev2\": draw(\"M40,-35V35L5,0M-30,-35V35H-40V-35M5,-35V35L-30,0\"),\n    speaker: draw(\"M40,35L33,28C41,21,45,11,45,0C45,-11,41,-21,33,-28L40,-35C49,-26,55,-14,55,0C55,14,49,26,40,35M26,21L19,14C23,11,25,6,25,0C25,-6,23,-11,19,-14L26,-21C32,-16,35,-8,35,0C35,8,32,16,26,21M-40,-45H0A10,10,0,0,1,10,-35V35A10,10,0,0,1,0,45H-40A10,10,0,0,1,-50,35V-35A10,10,0,0,1,-40,-45M-20,-35A10,10,0,0,0,-30,-25A10,10,0,0,0,-20,-15A10,10,0,0,0,-10,-25A10,10,0,0,0,-20,-35M-20,-5A20,20,0,0,0,-40,15A20,20,0,0,0,-20,35A20,20,0,0,0,0,15A20,20,0,0,0,-20,-5M-20,5A10,10,0,0,1,-10,15A10,10,0,0,1,-20,25A10,10,0,0,1,-30,15A10,10,0,0,1,-20,5Z\"),\n    snow: draw('M44,10L32,13L22,7V-7L32,-13L44,-10L47,-19L38,-22L40,-31L30,-33L27,-22L17,-16L5,-23V-34L14,-43L6,-50L0,-44L-6,-50L-14,-43L-5,-34V-23L-17,-16L-27,-22L-30,-33L-40,-31L-38,-22L-46,-19L-44,-10L-32,-13L-22,-7V7L-32,13L-44,10L-46,19L-38,22L-40,31L-30,33L-27,22L-17,16L-5,23V34L-14,43L-6,50L0,44L6,50L13,43L5,34V23L18,16L28,22L31,33L40,31L38,22L47,19L44,10M-12,-7L0,-14L13,-7V7L0,14L-12,7V-7Z'),\n    \"speaker-off\": draw(\"M-50,-34L-44,-40L45,49L39,55L31,48C30,49,28,50,25,50H-25C-31,50,-35,46,-35,40V-19L-50,-34M0,30A15,15,0,0,1,-15,15C-15,11,-14,8,-11,5L-18,-2C-22,3,-25,8,-25,15A25,25,0,0,0,0,40C7,40,13,38,17,33L10,26C7,29,4,30,0,30M25,15A25,25,0,0,0,0,-10H-1L-34,-43C-33,-47,-29,-50,-25,-50H25A10,10,0,0,1,35,-40V26L25,16V15M0,-40C-6,-40,-10,-36,-10,-30A10,10,0,0,0,0,-20A10,10,0,0,0,10,-30C10,-36,5,-40,0,-40Z\"),\n    \"split-vertical\": draw(\"M30,20V5H15V50H5V-50H15V-5H30V-20L50,0L30,20M-50,0L-30,20V5H-15V50H-5V-50H-15V-5H-30V-20L-50,0Z\"),\n    \"split-horizontal\": draw(\"M-20,30H-5V15H-50V5H50V15H5V30H20L0,50L-20,30M0,-50L-20,-30H-5V-15H-50V-5H50V-15H5V-30H20L0,-50Z\"),\n    star: draw(\"M0,26L31,45L23,10L50,-14L14,-17L0,-50L-14,-17L-50,-14L-23,10L-31,45L0,26Z\"),\n    stat: draw(\"M-45,50V-20H-25V50H-45M-10,50V-50H10V50H-10M25,50V10H45V50H25Z\"),\n    switch: draw(\"M-45,-40V3L-30,-12L-15,5C-10,10,-10,15,-10,15V45H10V10C10,10,10,5,7,0C5,-5,0,-10,0,-10L-15,-27L-2,-40M30,-40L8,-18L10,-15C10,-15,15,-10,17,-5C18,-3,19,-1,19,1L45,-25\"),\n    tap: draw('M-10,-15A5,5,0,0,1,-5,-20A5,5,0,0,1,0,-15V7L6,8L31,19C33,20,35,23,35,26V48C35,52,32,55,28,55H-5C-7,55,-9,54,-10,53L-34,32L-31,28C-30,27,-28,26,-27,26H-26L-10,35V-15M-5,-35A20,20,0,0,1,15,-15C15,-7,11,-1,5,2V-4C8,-7,10,-11,10,-15A15,15,0,0,0,-5,-30A15,15,0,0,0,-20,-15C-20,-11,-18,-7,-15,-4V2C-21,-1,-25,-7,-25,-15A20,20,0,0,1,-5,-35Z'),\n    \"tri-down\": draw(\"M-23,-17L0,6L23,-17L30,-10L0,20L-30,-10L-23,-17Z\"),\n    \"tri-left\": draw(\"M17,23L-6,0L17,-23L10,-30L-20,0L10,30L17,23Z\"),\n    \"tri-right\": draw(\"M-17,23L6,0L-17,-23L-10,-30L20,0L-10,30L-17,23Z\"),\n    \"tri-up\": draw(\"M-23,17L0,-6L23,17L30,10L0,-20L-30,10L-23,17Z\"),\n    twitter: draw(\"M52,-30C48,-28,44,-27,40,-27C44,-29,48,-33,49,-38C45,-36,41,-34,36,-33C32,-37,26,-40,20,-40C8,-40,-1,-30,-1,-19C-1,-17,-1,-15,-1,-14C-19,-15,-34,-23,-45,-36C-47,-33,-48,-29,-48,-25C-48,-18,-44,-11,-38,-7C-42,-7,-45,-8,-48,-10C-48,-10,-48,-10,-48,-10C-48,1,-41,9,-31,11C-33,12,-35,12,-37,12C-38,12,-39,12,-41,12C-38,20,-30,26,-21,26C-28,32,-37,36,-47,36C-49,36,-51,36,-52,35C-43,41,-31,45,-19,45C20,45,42,12,42,-16C42,-17,42,-18,42,-19C46,-22,49,-26,52,-30Z\"),\n    undo: draw(\"M3,-20C-11,-20,-23,-15,-32,-7L-50,-25V20H-5L-23,2C-16,-4,-7,-7,3,-7C20,-7,35,4,41,20L52,16C45,-5,26,-20,3,-20Z\"),\n    up: draw(\"M-30,30L0,-30,30,30\"),\n    \"up-double\": draw(\"M-30,40L0,10,30,40M-30,-10L0,-40,30,-10\"),\n    user: draw(\"M0,-40A20,20,0,0,1,20,-20A20,20,0,0,1,0,0A20,20,0,0,1,-20,-20A20,20,0,0,1,0,-40M0,10C22,10,40,19,40,30V40H-40V30C-40,19,-22,10,0,10Z\"),\n    \"volume-high\": draw('M10,-44V-34C24,-29,35,-16,35,0C35,16,24,29,10,34V44C30,39,45,21,45,0C45,-21,30,-39,10,-44M23,0C23,-9,18,-16,10,-20V20C18,16,23,9,23,0M-45,-15V15H-25L0,40V-40L-25,-15H-45Z'),\n    \"volume-low\": draw('M-25,-15V15H-5L20,40V-40L-5,-15H-25Z'),\n    wait: draw(\"M0,-5A5,5,0,0,0,-5,0A5,5,0,0,0,0,5A5,5,0,0,0,5,0A5,5,0,0,0,0,-5M3,-50C25,-50,26,-32,14,-26C9,-24,7,-19,6,-14C8,-13,10,-11,12,-9C30,-19,50,-15,50,3C50,25,32,26,26,14C24,9,19,7,14,6C13,8,11,10,9,12C19,30,15,50,-2,50C-25,50,-25,32,-14,26C-9,24,-7,19,-6,14C-8,13,-10,11,-12,9C-30,19,-50,15,-50,-2C-50,-25,-32,-26,-26,-14C-24,-9,-19,-7,-14,-6C-13,-8,-11,-10,-9,-12C-19,-30,-15,-50,3,-50Z\"),\n    \"zoom-in\": draw(\"M18,10L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18M-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10M0,-10H-10V0H-15V-10H-25V-15H-15V-25H-10V-15H0V-10Z\"),\n    \"zoom-out\": draw(\"M18,10H14L12,9C17,3,20,-4,20,-12A33,33,0,0,0,-12,-45A33,33,0,0,0,-45,-12A33,33,0,0,0,-12,20C-4,20,3,17,9,12L10,14V18L35,43L43,35L18,10M-12,10C-25,10,-35,0,-35,-12C-35,-25,-25,-35,-12,-35C0,-35,10,-25,10,-12C10,0,0,10,-12,10M-25,-15H0V-10H-25V-15Z\"),\n    warning: draw(\"M0,-50L-55,45H55M0,-30L38,35H-38M-5,-10V10H5V-10M-5,20V30H5V20\"),\n};\n// Synonyms.\nvar synonyms = {\n    add: \"plus\",\n    back: \"left\",\n    save: \"export\",\n};\ntry {\n    for (var _b = __values(Object.keys(synonyms)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var key = _c.value;\n        var val = synonyms[key];\n        exports.iconsBook[key] = exports.iconsBook[val];\n    }\n}\ncatch (e_1_1) { e_1 = { error: e_1_1 }; }\nfinally {\n    try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    }\n    finally { if (e_1) throw e_1.error; }\n}\nexports.default = { register: register, iconsBook: exports.iconsBook };\n//# sourceMappingURL=icons.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"./theme.css\");\nvar color_1 = __importDefault(require(\"./color\"));\nvar string_1 = __importDefault(require(\"./converter/string\"));\nvar LUMINANCE_THRESHOLD = 0.6;\n/**\n * Manage CSS styles.\n */\nexports.default = {\n    register: registerTheme,\n    apply: applyTheme,\n    get: getTheme,\n    bg0: makeGetCurrentColor(\"bg0\"),\n    bg1: makeGetCurrentColor(\"bg1\"),\n    bg2: makeGetCurrentColor(\"bg2\"),\n    bg3: makeGetCurrentColor(\"bg3\"),\n    bgP: makeGetCurrentColor(\"bgP\"),\n    bgPD: makeGetCurrentColor(\"bgPD\"),\n    bgPL: makeGetCurrentColor(\"bgPL\"),\n    bgS: makeGetCurrentColor(\"bgS\"),\n    bgSD: makeGetCurrentColor(\"bgSD\"),\n    bgSL: makeGetCurrentColor(\"bgSL\"),\n    black: makeGetCurrentColor(\"black\"),\n    white: makeGetCurrentColor(\"white\"),\n    isDark: isDark,\n    setFontSize: setFontSize,\n    normalize: completeWithDefaultValues,\n};\n// Used for luminance computations. Because we need to know which text color\n// Can be used based on the background's luminance.\nvar COLOR = new color_1.default();\nvar THEME_COLOR_NAMES = [\"0\", \"1\", \"2\", \"3\", \"P\", \"PD\", \"PL\", \"S\", \"SD\", \"SL\"];\nvar THEMES = {\n    css: {},\n    vars: {},\n    current: null\n};\nfunction registerTheme(themeName, _style) {\n    var style = completeWithDefaultValues(_style);\n    THEMES.vars[themeName] = style;\n    var codeCSS = codeVariables(themeName, style);\n    codeCSS += codeBackground(themeName, style);\n    codeCSS += codeElevation(themeName, style);\n    codeCSS += codeText(themeName, style);\n    var styleElement = THEMES.css[themeName];\n    if (!styleElement) {\n        styleElement = document.createElement(\"style\");\n        document.getElementsByTagName('head')[0].appendChild(styleElement);\n        THEMES.css[themeName] = styleElement;\n    }\n    styleElement.textContent = codeCSS;\n}\nfunction codeText(themeName, style) {\n    var e_1, _a;\n    var codeCSS = '';\n    for (var depth = 1; depth <= 10; depth++) {\n        try {\n            for (var THEME_COLOR_NAMES_1 = (e_1 = void 0, __values(THEME_COLOR_NAMES)), THEME_COLOR_NAMES_1_1 = THEME_COLOR_NAMES_1.next(); !THEME_COLOR_NAMES_1_1.done; THEME_COLOR_NAMES_1_1 = THEME_COLOR_NAMES_1.next()) {\n                var colorName = THEME_COLOR_NAMES_1_1.value;\n                var fgColorName = \"fg\" + colorName;\n                var bgColorName = \"bg\" + colorName;\n                var styleFgColorName = style[fgColorName];\n                var styleBgColorName = style[bgColorName];\n                var bgClass = \".thm-\" + bgColorName;\n                var fgClass = \".thm-\" + fgColorName;\n                for (var position = 1; position <= depth; position++) {\n                    var piecesFG = [];\n                    var piecesSVG = [];\n                    var piecesBG = [];\n                    for (var index = 1; index <= depth; index++) {\n                        if (position === index) {\n                            piecesBG.push(bgClass);\n                            piecesSVG.push(bgClass);\n                            piecesFG.push(fgClass);\n                        }\n                        else {\n                            piecesBG.push(\"*\");\n                            piecesSVG.push(\"*\");\n                            piecesFG.push(\"*\");\n                        }\n                        if (index === depth) {\n                            piecesBG.push(piecesBG.pop() + \".thm-fg\");\n                            piecesFG.push(piecesFG.pop() + fgClass);\n                        }\n                    }\n                    codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                        + piecesBG.join(\" > \")\n                        + \" { color: \" + styleFgColorName + \" }\\n\";\n                    codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                        + removeTail(piecesBG.join(\" > \"), \".thm-fg\")\n                        + \" { color: \" + styleFgColorName + \" }\\n\";\n                    codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                        + piecesFG.join(\" > \")\n                        + \" { color: \" + styleBgColorName + \" }\\n\";\n                    codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                        + piecesSVG.join(\" > \")\n                        + \" .thm-svg-fill0\"\n                        + \" { fill: \" + styleFgColorName + \" }\\n\";\n                    codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                        + piecesSVG.join(\" > \")\n                        + \" .thm-svg-stroke0\"\n                        + \" { stroke: \" + styleFgColorName + \" }\\n\";\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (THEME_COLOR_NAMES_1_1 && !THEME_COLOR_NAMES_1_1.done && (_a = THEME_COLOR_NAMES_1.return)) _a.call(THEME_COLOR_NAMES_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    return codeCSS;\n}\nvar ALPHA_HEXA = \"123456789ABCDE\";\nfunction codeVariables(themeName, style) {\n    var e_2, _a, e_3, _b, e_4, _c, e_5, _d;\n    var codeCSS = \"body.dom-theme-\" + themeName + \"{\\n\";\n    try {\n        for (var THEME_COLOR_NAMES_2 = __values(THEME_COLOR_NAMES), THEME_COLOR_NAMES_2_1 = THEME_COLOR_NAMES_2.next(); !THEME_COLOR_NAMES_2_1.done; THEME_COLOR_NAMES_2_1 = THEME_COLOR_NAMES_2.next()) {\n            var colorNameSuffix = THEME_COLOR_NAMES_2_1.value;\n            var fgColorName = \"fg\" + colorNameSuffix;\n            var bgColorName = \"bg\" + colorNameSuffix;\n            var bgStyle = style[bgColorName];\n            codeCSS += \"  --thm-\" + bgColorName + \": \" + bgStyle + \";\\n\";\n            try {\n                for (var ALPHA_HEXA_1 = (e_3 = void 0, __values(ALPHA_HEXA)), ALPHA_HEXA_1_1 = ALPHA_HEXA_1.next(); !ALPHA_HEXA_1_1.done; ALPHA_HEXA_1_1 = ALPHA_HEXA_1.next()) {\n                    var a = ALPHA_HEXA_1_1.value;\n                    codeCSS += \"  --thm-\" + bgColorName + \"-\" + a + \": \" + addAlpha(bgStyle, a) + \";\\n\";\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (ALPHA_HEXA_1_1 && !ALPHA_HEXA_1_1.done && (_b = ALPHA_HEXA_1.return)) _b.call(ALPHA_HEXA_1);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            COLOR.parse(bgStyle);\n            var pen = COLOR.luminanceStep() ?\n                style.black || \"#000\" : style.white || \"#fff\";\n            codeCSS += \"  --thm-\" + fgColorName + \": \" + pen + \";\\n\";\n            try {\n                for (var ALPHA_HEXA_2 = (e_4 = void 0, __values(ALPHA_HEXA)), ALPHA_HEXA_2_1 = ALPHA_HEXA_2.next(); !ALPHA_HEXA_2_1.done; ALPHA_HEXA_2_1 = ALPHA_HEXA_2.next()) {\n                    var a = ALPHA_HEXA_2_1.value;\n                    codeCSS += \"  --thm-\" + fgColorName + \"-\" + a + \": \" + addAlpha(pen, a) + \";\\n\";\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (ALPHA_HEXA_2_1 && !ALPHA_HEXA_2_1.done && (_c = ALPHA_HEXA_2.return)) _c.call(ALPHA_HEXA_2);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (THEME_COLOR_NAMES_2_1 && !THEME_COLOR_NAMES_2_1.done && (_a = THEME_COLOR_NAMES_2.return)) _a.call(THEME_COLOR_NAMES_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    style.white = normalize(style.white || \"#fff\");\n    style.black = normalize(style.black || \"#000\");\n    codeCSS += \"  --thm-white: \" + style.white + \";\\n\";\n    codeCSS += \"  --thm-black: \" + style.black + \";\\n\";\n    try {\n        for (var ALPHA_HEXA_3 = __values(ALPHA_HEXA), ALPHA_HEXA_3_1 = ALPHA_HEXA_3.next(); !ALPHA_HEXA_3_1.done; ALPHA_HEXA_3_1 = ALPHA_HEXA_3.next()) {\n            var letter = ALPHA_HEXA_3_1.value;\n            codeCSS += \"  --thm-white-\" + letter + \": \" + addAlpha(style.white, letter) + \";\\n\";\n            codeCSS += \"  --thm-black-\" + letter + \": \" + addAlpha(style.black, letter) + \";\\n\";\n        }\n    }\n    catch (e_5_1) { e_5 = { error: e_5_1 }; }\n    finally {\n        try {\n            if (ALPHA_HEXA_3_1 && !ALPHA_HEXA_3_1.done && (_d = ALPHA_HEXA_3.return)) _d.call(ALPHA_HEXA_3);\n        }\n        finally { if (e_5) throw e_5.error; }\n    }\n    codeCSS += \"}\\n\";\n    return codeCSS;\n}\nfunction codePlainColor(themeName, bgColorName, fgColorName, style) {\n    return \"body.dom-theme-\" + themeName + \" .thm-\" + bgColorName + \"{\\n    background-color: \" + style[bgColorName] + \"\\n}\\nbody.dom-theme-\" + themeName + \".thm-\" + fgColorName + \"{\\n    color: \" + style[fgColorName] + \"\\n}\\n\";\n}\nfunction codeGradientColor(themeName, bgColorName, style, direction) {\n    return \"body.dom-theme-\" + themeName + \" .thm-\" + bgColorName + \"-\" + direction + \"{\\n    background: linear-gradient(to \" + direction + \", transparent, \" + style[bgColorName] + \")\\n}\\n\";\n}\nfunction codeSvgColor(themeName, bgColorName, colorNameSuffix, style) {\n    return \"body.dom-theme-\" + themeName + \" .thm-svg-fill\" + colorNameSuffix + \"{\\n    fill: \" + style[bgColorName] + \"\\n}\\nbody.dom-theme-\" + themeName + \" .thm-svg-stroke\" + colorNameSuffix + \"{\\n    stroke: \" + style[bgColorName] + \"\\n}\\n\";\n}\nfunction codeBackground(themeName, style) {\n    var e_6, _a, e_7, _b;\n    var codeCSS = \"\";\n    try {\n        for (var THEME_COLOR_NAMES_3 = __values(THEME_COLOR_NAMES), THEME_COLOR_NAMES_3_1 = THEME_COLOR_NAMES_3.next(); !THEME_COLOR_NAMES_3_1.done; THEME_COLOR_NAMES_3_1 = THEME_COLOR_NAMES_3.next()) {\n            var colorNameSuffix = THEME_COLOR_NAMES_3_1.value;\n            var bgColorName = \"bg\" + colorNameSuffix;\n            var fgColorName = \"fg\" + colorNameSuffix;\n            codeCSS += codePlainColor(themeName, bgColorName, fgColorName, style);\n            try {\n                for (var _c = (e_7 = void 0, __values([\"bottom\", \"top\", \"left\", \"right\"])), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var direction = _d.value;\n                    codeCSS += codeGradientColor(themeName, bgColorName, style, direction);\n                }\n            }\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                }\n                finally { if (e_7) throw e_7.error; }\n            }\n            if (!isNaN(parseInt(colorNameSuffix, 10)))\n                continue;\n            codeCSS += codeSvgColor(themeName, bgColorName, colorNameSuffix, style);\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (THEME_COLOR_NAMES_3_1 && !THEME_COLOR_NAMES_3_1.done && (_a = THEME_COLOR_NAMES_3.return)) _a.call(THEME_COLOR_NAMES_3);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    return codeCSS;\n}\nvar ELEVATIONS = {\n    0: [\"none\"],\n    2: [\"button\", \"card\"],\n    4: [\"bar\"],\n    6: [\"floating\"],\n    8: [\"button:active\", \"button-raised\", \"card-raised\"],\n    9: [\"sunmenu-0\"],\n    10: [\"sunmenu-1\"],\n    11: [\"sunmenu-2\"],\n    12: [\"floating:active\"],\n    16: [\"nav\"],\n    24: [\"dialog\"],\n};\nfunction codeElevation(themeName, style) {\n    COLOR.parse(style.bg2);\n    var luminance = COLOR.luminance();\n    var elevationColor = luminance < LUMINANCE_THRESHOLD\n        ? addAlpha(style.white || \"#fff\", \"4\")\n        : addAlpha(style.black || \"#000\", \"6\");\n    var codeCSS = \"\";\n    var elevationKeys = Object.keys(ELEVATIONS);\n    elevationKeys.forEach(function (elevationKey) {\n        var elevation = parseInt(elevationKey, 10);\n        ELEVATIONS[elevationKey].forEach(function (name) {\n            codeCSS += \"body.dom-theme-\" + themeName + \" .thm-ele-\" + name + \" {\\n  box-shadow: 0 \" + elevation + \"px \" + elevation * 2 + \"px \" + elevationColor + \"\\n}\\n\";\n        });\n    });\n    return codeCSS;\n}\nfunction applyTheme(name) {\n    if (!THEMES.css[name]) {\n        console.error(\"This theme has not been registered: \", name);\n        return;\n    }\n    var body = document.body;\n    if (typeof THEMES.current === \"string\") {\n        body.classList.remove(\"dom-theme-\" + THEMES.current);\n    }\n    THEMES.current = name;\n    body.classList.add(\"dom-theme-\" + THEMES.current);\n}\nfunction getTheme(name) {\n    if (name === void 0) { name = \"default\"; }\n    return THEMES.vars[name];\n}\nfunction completeBackgrounds(style) {\n    var has0 = typeof style.bg0 === \"string\";\n    var has1 = typeof style.bg1 === \"string\";\n    var has2 = typeof style.bg2 === \"string\";\n    var has3 = typeof style.bg3 === \"string\";\n    if (has0 && has1 && has2 && has3)\n        return;\n    if (!has0 && !has1 && !has2 && !has3) {\n        style.bg0 = \"#E0E0E0\";\n        style.bg1 = \"#F5F5F5\";\n        style.bg2 = \"#FAFAFA\";\n        style.bg3 = \"#FFF\";\n        return;\n    }\n    if (has0 && !has1 && !has2 && !has3) {\n        style.bg3 = lightenBackground(style.bg0);\n        has3 = true;\n    }\n    if (!has0 && !has1 && !has2 && has3) {\n        style.bg0 = darkenBackground(style.bg3);\n        has3 = true;\n    }\n    var color0 = new color_1.default(style.bg0);\n    var r0 = color0.R;\n    var g0 = color0.G;\n    var b0 = color0.B;\n    var color3 = new color_1.default(style.bg3);\n    var r3 = color3.R;\n    var g3 = color3.G;\n    var b3 = color3.B;\n    var color1 = color_1.default.newRGB((2 * r0 + r3) / 3, (2 * g0 + g3) / 3, (2 * b0 + b3) / 3);\n    var color2 = color_1.default.newRGB((r0 + 2 * r3) / 3, (g0 + 2 * g3) / 3, (b0 + 2 * b3) / 3);\n    style.bg1 = color1.stringify();\n    style.bg2 = color2.stringify();\n}\nfunction completeWithDefaultValues(style) {\n    var e_8, _a;\n    if (style === void 0) { style = {}; }\n    completeBackgrounds(style);\n    if (typeof style.bgP !== \"string\")\n        style.bgP = \"#3E50B4\";\n    if (typeof style.bgPD !== \"string\")\n        style.bgPD = dark(style.bgP);\n    if (typeof style.bgPL !== \"string\")\n        style.bgPL = light(style.bgP);\n    if (typeof style.bgS !== \"string\")\n        style.bgS = rotateHue(style.bgP);\n    if (typeof style.bgSD !== \"string\")\n        style.bgSD = dark(style.bgS);\n    if (typeof style.bgSL !== \"string\")\n        style.bgSL = light(style.bgS);\n    if (typeof style.white !== \"string\")\n        style.white = \"#fff\";\n    if (typeof style.black !== \"string\")\n        style.black = \"#000\";\n    try {\n        for (var THEME_COLOR_NAMES_4 = __values(THEME_COLOR_NAMES), THEME_COLOR_NAMES_4_1 = THEME_COLOR_NAMES_4.next(); !THEME_COLOR_NAMES_4_1.done; THEME_COLOR_NAMES_4_1 = THEME_COLOR_NAMES_4.next()) {\n            var colorNameSuffix = THEME_COLOR_NAMES_4_1.value;\n            var bgColorName = \"bg\" + colorNameSuffix;\n            var fgColorName = \"fg\" + colorNameSuffix;\n            var bg = string_1.default(style[bgColorName], \"#000\");\n            COLOR.parse(bg);\n            var luminance = COLOR.luminance();\n            style[fgColorName] = luminance < LUMINANCE_THRESHOLD ? style.white : style.black;\n        }\n    }\n    catch (e_8_1) { e_8 = { error: e_8_1 }; }\n    finally {\n        try {\n            if (THEME_COLOR_NAMES_4_1 && !THEME_COLOR_NAMES_4_1.done && (_a = THEME_COLOR_NAMES_4.return)) _a.call(THEME_COLOR_NAMES_4);\n        }\n        finally { if (e_8) throw e_8.error; }\n    }\n    return style;\n}\nfunction dark(color) {\n    var percent = 0.25;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L *= 1 - percent;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\nfunction darkenBackground(color) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.max(0, COLOR.L - 0.15);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\nfunction light(color) {\n    var percent = 0.4;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = percent + (1 - percent) * COLOR.L;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\nfunction lightenBackground(color) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.min(1, COLOR.L + 0.3);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\nfunction rotateHue(color) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.H = COLOR.H + 0.5;\n    if (COLOR.H > 1)\n        COLOR.H -= 1;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n/**\n * @param {string} color - RGB color in format #xxx or #xxxxxx.\n * @param {string} alpha - Single char between 0 and F.\n */\nfunction addAlpha(color, alpha) {\n    if (color.length < 5)\n        return color + alpha;\n    return color + alpha + alpha;\n}\nfunction removeTail(text, tail) {\n    return text.substr(0, text.length - tail.length);\n}\nfunction isDark(colorName) {\n    if (colorName === void 0) { colorName = null; }\n    if (colorName === null)\n        return isThemeGloballyDark();\n    var vars = THEMES.vars[THEMES.current || \"default\"];\n    var color = new color_1.default(vars[colorName]);\n    return !color.luminanceStep();\n}\nfunction isThemeGloballyDark() {\n    var vars = THEMES.vars[THEMES.current || \"default\"];\n    var bg0 = new color_1.default(vars.bg0);\n    var bg1 = new color_1.default(vars.bg1);\n    var bg2 = new color_1.default(vars.bg2);\n    var bg3 = new color_1.default(vars.bg3);\n    var average = color_1.default.mix(color_1.default.mix(bg0, bg1), color_1.default.mix(bg2, bg3));\n    return !average.luminanceStep();\n}\nfunction makeGetCurrentColor(colorName) {\n    return function () {\n        var vars = THEMES.vars[THEMES.current || \"default\"];\n        return vars[colorName] || \"#000\";\n    };\n}\nfunction setFontSize(size) {\n    var html = document.documentElement;\n    html.classList.remove(\"thm-font-size-small\");\n    html.classList.remove(\"thm-font-size-medium\");\n    html.classList.remove(\"thm-font-size-large\");\n    html.classList.add(\"thm-font-size-\" + size);\n}\nfunction normalize(hexa) {\n    var color = new color_1.default(hexa);\n    return color.stringify();\n}\nregisterTheme(\"default\", { bgP: \"#1e90ff\" });\n//# sourceMappingURL=theme.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar multi_tap_1 = require(\"./multi-tap\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return multi_tap_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\n/**\n * @example\n * import Storage from \"./tfw/storage\";\n * Storage.local.set(\"state\", {lang:\"jp\", currentPage: \"checkpoint-list\"});\n * const state = Storage.local.get(\"state\", {lang:\"jp\", currentPage: \"checkpoint-list\"});\n * Storage.local.del(\"state\");\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PrefixedSessionStorage = exports.PrefixedLocalStorage = void 0;\nvar LOCAL = makeStorage(window.localStorage);\nvar SESSION = makeStorage(window.sessionStorage);\nvar Storage = /** @class */ (function () {\n    function Storage(storage, prefix) {\n        this.storage = storage;\n        this.prefix = prefix;\n    }\n    Storage.prototype.key = function (key) {\n        return this.prefix + \"/\" + key;\n    };\n    Storage.prototype.get = function (key, defaultValue) {\n        return this.storage.get(this.key(key), defaultValue);\n    };\n    Storage.prototype.set = function (key, value) {\n        return this.storage.set(this.key(key), value);\n    };\n    Storage.prototype.del = function (key) {\n        return this.storage.del(this.key(key));\n    };\n    return Storage;\n}());\nvar PrefixedLocalStorage = /** @class */ (function (_super) {\n    __extends(PrefixedLocalStorage, _super);\n    function PrefixedLocalStorage(prefix) {\n        return _super.call(this, LOCAL, prefix) || this;\n    }\n    return PrefixedLocalStorage;\n}(Storage));\nexports.PrefixedLocalStorage = PrefixedLocalStorage;\nvar PrefixedSessionStorage = /** @class */ (function (_super) {\n    __extends(PrefixedSessionStorage, _super);\n    function PrefixedSessionStorage(prefix) {\n        return _super.call(this, LOCAL, prefix) || this;\n    }\n    return PrefixedSessionStorage;\n}(Storage));\nexports.PrefixedSessionStorage = PrefixedSessionStorage;\nexports.default = {\n    local: LOCAL,\n    session: SESSION,\n    PrefixedLocalStorage: PrefixedLocalStorage,\n    PrefixedSessionStorage: PrefixedSessionStorage\n};\nfunction makeStorage(storage) {\n    return {\n        get: function (key, defaultValue) {\n            var value = storage.getItem(key);\n            if (value === null)\n                return defaultValue;\n            try {\n                return JSON.parse(value);\n            }\n            catch (ex) {\n                console.error(\"storage[\\\"\" + key + \"\\\"] is not parsable as a JSON object!\\n\"\n                    + (\"Its value is: \\\"\" + value + \"\\\".\\nThis item will be deleted.\"));\n                storage.removeItem(key);\n                return defaultValue;\n            }\n        },\n        set: function (key, value) {\n            storage.setItem(key, JSON.stringify(value));\n        },\n        del: function (key) {\n            storage.removeItem(key);\n        },\n    };\n}\n//# sourceMappingURL=storage.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ok_cancel_1 = require(\"./ok-cancel\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return ok_cancel_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar checkbox_1 = require(\"./checkbox\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return checkbox_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar color_picker_1 = require(\"./color-picker\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return color_picker_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar slider_1 = require(\"./slider\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return slider_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar input_file_1 = require(\"./input-file\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return input_file_1.default; } });\n//# sourceMappingURL=index.js.map","module.exports = require(\"crypto\");","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar debouncer_1 = __importDefault(require(\"./debouncer\"));\nvar throttler_1 = __importDefault(require(\"./throttler\"));\nvar update_tasks_1 = __importDefault(require(\"./update-tasks\"));\nexports.default = {\n    Debouncer: debouncer_1.default,\n    sleep: sleep,\n    Throttler: throttler_1.default,\n    UpdateTasks: update_tasks_1.default\n};\nfunction sleep(delayInMilliseconds) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve) {\n                    window.setTimeout(resolve, delayInMilliseconds);\n                })];\n        });\n    });\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The function to call as much as you want. It will perform the debouce for you.\n * Put in the same args as the `action` function.\n *\n * * action -  Action to call. Two consecutive actions cannot be  called if there is\n * less than `delay` ms between them.\n * * delay - Number of milliseconds.\n */\nfunction default_1(action, delay) {\n    var timer = 0;\n    var timestamp = 0;\n    var nextAction = function () { };\n    var nextArgs = [];\n    var throttleAction = function () {\n        timer = 0;\n        nextAction.apply(void 0, __spread(nextArgs));\n    };\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        nextAction = action;\n        nextArgs = args;\n        var now = Date.now();\n        var elapsedTime = now - timestamp;\n        timestamp = now;\n        if (elapsedTime > delay) {\n            throttleAction();\n        }\n        else if (timer === 0) {\n            timer = window.setTimeout(throttleAction, delay - elapsedTime);\n        }\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=throttler.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UpdateTasks = /** @class */ (function () {\n    function UpdateTasks() {\n        this.actionRunning = false;\n    }\n    /**\n     * This class prevent two tasks to be executed in parallel.\n     * So, the tasks are queued. But this is a smashing-queue.\n     * Which means that the queue keeps only two elements,\n     * the first one and the last one.\n     */\n    UpdateTasks.prototype.exec = function (task) {\n        if (this.curTask) {\n            this.nxtTask = task;\n        }\n        else {\n            this.curTask = task;\n        }\n        if (!this.actionRunning)\n            this.action();\n    };\n    UpdateTasks.prototype.action = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var ex_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.actionRunning = true;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, , 8, 9]);\n                        _a.label = 2;\n                    case 2:\n                        if (!this.curTask) return [3 /*break*/, 7];\n                        _a.label = 3;\n                    case 3:\n                        _a.trys.push([3, 5, , 6]);\n                        return [4 /*yield*/, this.curTask()];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        ex_1 = _a.sent();\n                        console.error(\"[UpdateTasks]\", ex_1);\n                        return [3 /*break*/, 6];\n                    case 6:\n                        this.curTask = this.nxtTask;\n                        return [3 /*break*/, 2];\n                    case 7: return [3 /*break*/, 9];\n                    case 8:\n                        this.actionRunning = false;\n                        return [7 /*endfinally*/];\n                    case 9: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return UpdateTasks;\n}());\nexports.default = UpdateTasks;\n//# sourceMappingURL=update-tasks.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = __importDefault(require(\"../util\"));\nvar MAX_BYTE_VALUE = 255;\n/**\n * Fast color manipulations.\n * Attributes R  (red), G  (green), B  (blue), A  (alpha), H  (hue), S\n * (saturation), and L (luminance) are all floats between 0 and 1.\n */\nvar Color = /** @class */ (function () {\n    function Color(codeCSS) {\n        if (codeCSS === void 0) { codeCSS = \"#000000\"; }\n        this.R = 0;\n        this.G = 0;\n        this.B = 0;\n        this.H = 0;\n        this.S = 0;\n        this.L = 0;\n        this.A = 1;\n        this.parse(codeCSS);\n    }\n    Color.fromArrayRGB = function (rgb) {\n        if (!Array.isArray(rgb)) {\n            console.error(\"Invalid param rgb: \", rgb);\n            return Color.newRGB(0, 0, 0);\n        }\n        var MIN_LEN = 3;\n        while (rgb.length < MIN_LEN)\n            rgb.push(0);\n        var _a = __read(rgb, 3), R = _a[0], G = _a[1], B = _a[2];\n        return Color.newRGB(R, G, B);\n    };\n    Color.fromArrayRGBA = function (rgba) {\n        if (!Array.isArray(rgba)) {\n            console.error(\"Invalid param rgba: \", rgba);\n            return Color.newRGB(0, 0, 0);\n        }\n        var MIN_LEN = 4;\n        while (rgba.length < MIN_LEN)\n            rgba.push(1);\n        var _a = __read(rgba, 4), R = _a[0], G = _a[1], B = _a[2], A = _a[3];\n        return Color.newRGBA(R, G, B, A);\n    };\n    Color.fromHSL = function (hue, saturation, luminance) {\n        var color = new Color();\n        color.H = hue;\n        color.S = saturation;\n        color.L = luminance;\n        color.hsl2rgb();\n        return color;\n    };\n    /**\n     * Check if a CSS stle string is an actual color.\n     */\n    Color.isValid = function (codeCSS) {\n        if (typeof codeCSS !== \"string\")\n            return false;\n        if (codeCSS.charAt(0) !== \"#\")\n            return false;\n        switch (codeCSS.length) {\n            case '#RGB'.length:\n            case '#RGBA'.length:\n            case '#RRGGBB'.length:\n            case '#RRGGBBAA'.length:\n                return true;\n            default:\n                return false;\n        }\n    };\n    Color.luminance = function (codeCSS) {\n        var color = new Color(codeCSS);\n        return color.luminance();\n    };\n    /**\n     * Returns 1 for bright colors and 0 for dark colors.\n     */\n    Color.luminanceStep = function (codeCSS) {\n        var color = new Color(codeCSS);\n        return color.luminanceStep();\n    };\n    /**\n     * Mix two colors. alpha should be between 0 and 1,\n     * but there is no check on this.\n     * If alpha is 0, the resulting color is `color1`,\n     * if alpha is 1, the resulting color is `color2`.\n     */\n    Color.mix = function (color1, color2, alpha) {\n        if (alpha === void 0) { alpha = 0.5; }\n        var beta = 1 - alpha;\n        return Color.newRGBA(alpha * color2.R + beta * color1.R, alpha * color2.G + beta * color1.G, alpha * color2.B + beta * color1.B, alpha * color2.A + beta * color1.A);\n    };\n    Color.newBlack = function () {\n        return Color.newRGB(0, 0, 0);\n    };\n    /**\n     * Create a new Color instance base on R,G,B channels.\n     *\n     * @param   red - Value between 0 and 1.\n     * @param   green - Value between 0 and 1.\n     * @param   blue - Value between 0 and 1.\n     * @returns New instance of Color.\n     */\n    Color.newRGB = function (red, green, blue) {\n        var color = new Color();\n        color.R = red;\n        color.G = green;\n        color.B = blue;\n        color.A = 1;\n        return color;\n    };\n    /**\n     * Create a new Color instance base on R,G,B,A channels.\n     *\n     * @param   red - Value between 0 and 1.\n     * @param   green - Value between 0 and 1.\n     * @param   blue - Value between 0 and 1.\n     * @param   alpha - Value between 0 and 1.\n     * @returns New instance of Color.\n     */\n    Color.newRGBA = function (red, green, blue, alpha) {\n        var color = new Color();\n        color.R = red;\n        color.G = green;\n        color.B = blue;\n        color.A = alpha;\n        return color;\n    };\n    Color.newWhite = function () {\n        return Color.newRGB(1, 1, 1);\n    };\n    Color.normalize = function (codeCSS) {\n        var color = new Color(codeCSS);\n        return color.stringify();\n    };\n    /**\n     * Create an array of colors by interpolating on other colors.\n     */\n    Color.interpolate = function (colors, arrayLength) {\n        if (arrayLength < 1)\n            return [];\n        var input = colors.map(function (c) { return typeof c === 'string' ? new Color(c) : c; });\n        var result = [];\n        for (var step = 1; step <= arrayLength; step++) {\n            var alpha = step / (arrayLength + 1);\n            result.push(Color.ramp(input, alpha));\n        }\n        return result;\n    };\n    /**\n     * If `colors` has only two elements, this method is the same as `mix()`.\n     * Otherwise, it will perform a linear blending through the colors.\n     * If alpha is 0, the resulting color is `colors[0]`,\n     * If alpha is 1, the resulting color is `colors[colors.length - 1]`,\n     */\n    Color.ramp = function (colors, alpha) {\n        if (alpha === void 0) { alpha = 0.5; }\n        if (colors.length === 0)\n            return Color.newBlack();\n        if (colors.length === 1)\n            return colors[0];\n        // Number of spaces between colors.\n        var spacesCount = colors.length - 1;\n        var firstColorIndex = Math.floor(alpha * spacesCount);\n        var color1 = colors[firstColorIndex];\n        if (firstColorIndex === spacesCount)\n            return color1;\n        var color2 = colors[firstColorIndex + 1];\n        var translatedAlpha = alpha * spacesCount - firstColorIndex;\n        return Color.mix(color1, color2, translatedAlpha);\n    };\n    Color.prototype.copy = function () {\n        var newColor = new Color();\n        newColor.R = this.R;\n        newColor.G = this.G;\n        newColor.B = this.B;\n        newColor.A = this.A;\n        newColor.H = this.H;\n        newColor.S = this.S;\n        newColor.L = this.L;\n        return newColor;\n    };\n    /**\n     * @see https://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\n     */\n    Color.prototype.hsl2rgb = function () {\n        var H = 6 * this.H;\n        var S = this.S;\n        var L = this.L;\n        var chroma = (1 - Math.abs(2 * L - 1)) * S;\n        var x = chroma * (1 - Math.abs(H % 2 - 1));\n        var R = 0;\n        var G = 0;\n        var B = 0;\n        if (H < 3) {\n            if (H < 1) {\n                R = chroma;\n                G = x;\n                B = 0;\n            }\n            else if (H < 2) {\n                R = x;\n                G = chroma;\n                B = 0;\n            }\n            else {\n                // H == 2.\n                R = 0;\n                G = chroma;\n                B = x;\n            }\n        }\n        else if (H < 4) {\n            R = 0;\n            G = x;\n            B = chroma;\n        }\n        else if (H < 5) {\n            R = x;\n            G = 0;\n            B = chroma;\n        }\n        else {\n            R = chroma;\n            G = 0;\n            B = x;\n        }\n        var shift = L - chroma * 0.5;\n        this.R = R + shift;\n        this.G = G + shift;\n        this.B = B + shift;\n    };\n    /**\n     * @see https://en.wikipedia.org/wiki/Grayscale\n     * @this Color\n     * @returns {undefined}\n     */\n    Color.prototype.luminance = function () {\n        return (0.2126 * this.R) + (0.7152 * this.G) + (0.0722 * this.B);\n    };\n    /**\n     * @returns {integer} 0 if the color is dark and 1 if it is light.\n     */\n    Color.prototype.luminanceStep = function () {\n        return this.luminance() < 0.6 ? 0 : 1;\n    };\n    /**\n     * Parse a color writtent in CSS syntax.\n     *\n     * @param   {string} code - CSS color.\n     * @returns {boolean} `true` if the color has valid syntax.\n     */\n    Color.prototype.parse = function (code) {\n        if (code === void 0) { code = \"#000000\"; }\n        var input = code.trim().toUpperCase();\n        if (this.parseHexa.call(this, input))\n            return true;\n        if (this.parseRGB.call(this, input))\n            return true;\n        if (this.parseRGBA.call(this, input))\n            return true;\n        if (this.parseHSL.call(this, input))\n            return true;\n        // @TODO parseHSLA.\n        return false;\n    };\n    Color.prototype.rgb2hsl = function () {\n        var R = this.R;\n        var G = this.G;\n        var B = this.B;\n        var min = Math.min(R, G, B);\n        var max = Math.max(R, G, B);\n        var delta = max - min;\n        this.L = 0.5 * (max + min);\n        if (delta < 0.000001) {\n            this.H = 0;\n            this.S = 0;\n        }\n        else {\n            this.S = delta / (1 - Math.abs(2 * this.L - 1));\n            if (max === R) {\n                if (G >= B) {\n                    this.H = INV6 * ((G - B) / delta);\n                }\n                else {\n                    this.H = 1 - INV6 * ((B - G) / delta);\n                }\n            }\n            else if (max === G) {\n                this.H = INV6 * (2 + (B - R) / delta);\n            }\n            else {\n                this.H = INV6 * (4 + (R - G) / delta);\n            }\n        }\n    };\n    Color.prototype.stringify = function () {\n        var color = hexa2(this.R * MAX_BYTE_VALUE)\n            + hexa2(this.G * MAX_BYTE_VALUE)\n            + hexa2(this.B * MAX_BYTE_VALUE);\n        if (this.A < 1) {\n            color += hexa2(this.A * MAX_BYTE_VALUE);\n        }\n        return \"#\" + color;\n    };\n    Color.prototype.toArrayRGB = function () {\n        return [this.R, this.G, this.B];\n    };\n    Color.prototype.toArrayRGBA = function () {\n        return [this.R, this.G, this.B, this.A];\n    };\n    Color.prototype.parseHexa = function (text) {\n        if (text.charAt(0) !== \"#\")\n            return false;\n        var R = 0;\n        var G = 0;\n        var B = 0;\n        var A = 1;\n        switch (text.length) {\n            case 4:\n                R = parseInt(text.charAt(1), 16) * INV15;\n                G = parseInt(text.charAt(2), 16) * INV15;\n                B = parseInt(text.charAt(3), 16) * INV15;\n                break;\n            case 5:\n                R = parseInt(text.charAt(1), 16) * INV15;\n                G = parseInt(text.charAt(2), 16) * INV15;\n                B = parseInt(text.charAt(3), 16) * INV15;\n                A = parseInt(text.charAt(4), 16) * INV15;\n                break;\n            case 7:\n                R = parseInt(text.substr(1, 2), 16) * INV255;\n                G = parseInt(text.substr(3, 2), 16) * INV255;\n                B = parseInt(text.substr(5, 2), 16) * INV255;\n                break;\n            case 9:\n                R = parseInt(text.substr(1, 2), 16) * INV255;\n                G = parseInt(text.substr(3, 2), 16) * INV255;\n                B = parseInt(text.substr(5, 2), 16) * INV255;\n                A = parseInt(text.substr(7, 2), 16) * INV255;\n                break;\n            default:\n        }\n        if (isNaN(R) || isNaN(G) || isNaN(B) || isNaN(A)) {\n            this.R = this.G = this.B = this.A = 0;\n        }\n        else {\n            this.R = R;\n            this.G = G;\n            this.B = B;\n            this.A = A;\n        }\n        return true;\n    };\n    /**\n     * @param   {string} text - `hsl(200, 140, 50)`\n     * @returns {boolean} `true` if `text` is a valid `hsl()` syntax.\n     */\n    Color.prototype.parseHSL = function (text) {\n        var m = RX_HSL.exec(text);\n        if (!m)\n            return false;\n        this.H = clamp01(parseInt(m[1], 10) * INV359);\n        this.S = clamp01(parseInt(m[2], 10) * INV99);\n        this.L = clamp01(parseInt(m[3], 10) * INV99);\n        this.A = 1;\n        this.hsl2rgb();\n        return true;\n    };\n    /**\n     * @param   {string} text - `rgb(200, 140, 50)`\n     * @returns {boolean} `true` if `text` is a valid `rgb()` syntax.\n     */\n    Color.prototype.parseRGB = function (text) {\n        var m = RX_RGB.exec(text);\n        if (!m)\n            return false;\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\n        this.A = 1;\n        return true;\n    };\n    /**\n     * @param   {string} text - `rgba(200, 140, 50, 0.5)`\n     * @returns {boolean} `true` if `text` is a valid `rgba()` syntax.\n     */\n    Color.prototype.parseRGBA = function (text) {\n        var m = RX_RGBA.exec(text);\n        if (!m)\n            return false;\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\n        this.A = clamp01(parseFloat(m[4]));\n        return true;\n    };\n    return Color;\n}());\nexports.default = Color;\nvar INV6 = 1 / 6;\nvar INV15 = 1 / 15;\nvar INV99 = 1 / 99;\nvar INV255 = 1 / MAX_BYTE_VALUE;\nvar INV359 = 1 / 359;\nvar RX_RGB = /^RGB[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\nvar RX_RGBA = /^RGBA[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9.]+([0-9.]+)/;\nvar RX_HSL = /^HSL[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\nfunction clamp01(value) {\n    if (value < 0)\n        return 0;\n    if (value > 1)\n        return 1;\n    return value;\n}\nfunction hexa2(value) {\n    var out = util_1.default.clamp(Math.floor(value), 0, MAX_BYTE_VALUE).toString(16);\n    if (out.length < \"FF\".length)\n        out = \"0\" + out;\n    return out;\n}\n//# sourceMappingURL=color.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    capitalize: capitalize,\n    clamp: clamp,\n    fatal: fatal,\n    fillString: fillString,\n    findLineAndPosFromIndex: findLineAndPosFromIndex,\n    levenshteinDistance: levenshteinDistance,\n    loadJsonFromURL: loadJsonFromURL,\n    loadTextFromFile: loadTextFromFile,\n    loadTextFromURL: loadTextFromURL,\n    normalizeFirstname: normalizeFirstname,\n    normalizeLastname: normalizeLastname,\n    padNumber: padNumber,\n    extractCodeAtIndex: extractCodeAtIndex\n};\nfunction padNumber(value, size, fillWith) {\n    if (size === void 0) { size = 6; }\n    if (fillWith === void 0) { fillWith = \" \"; }\n    var text = \"\" + value;\n    while (text.length < size) {\n        text = fillWith.charAt(0) + text;\n    }\n    return text;\n}\nfunction fillString(size, fillWithChar) {\n    if (fillWithChar === void 0) { fillWithChar = \" \"; }\n    var out = '';\n    var char = fillWithChar && fillWithChar.length > 0 ? fillWithChar.charAt(0) : ' ';\n    while (out.length < size)\n        out += char;\n    return out;\n}\nfunction clamp(value, min, max) {\n    if (min === void 0) { min = 0; }\n    if (max === void 0) { max = 1; }\n    if (value < min)\n        return min;\n    if (value > max)\n        return max;\n    return value;\n}\nfunction loadTextFromFile(file) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onload = function (data) {\n            if (!data || !data.target) {\n                reject(\"Data is null!\");\n                return;\n            }\n            var content = \"\" + String(data.target.result);\n            resolve(content);\n        };\n        reader.onerror = reject;\n        reader.readAsText(file);\n    });\n}\nfunction loadTextFromURL(url) {\n    return new Promise(function (resolve, reject) {\n        fetch(url)\n            .then(function (response) {\n            if (!response.ok) {\n                reject(\"Error \" + response.status + \": \" + response.statusText + \"!\");\n            }\n            return response.text();\n        })\n            .then(resolve)\n            .catch(reject);\n    });\n}\nfunction loadJsonFromURL(url) {\n    return new Promise(function (resolve, reject) {\n        fetch(url)\n            .then(function (response) {\n            return response.json();\n        })\n            .then(resolve)\n            .catch(reject);\n    });\n}\nfunction extractCodeAtIndex(text, index, showLinesAround) {\n    if (showLinesAround === void 0) { showLinesAround = 3; }\n    var textWithoutTabs = text.split(\"\\t\").join(\"    \");\n    var _a = findLineAndPosFromIndex(textWithoutTabs, index), line = _a.line, pos = _a.pos;\n    var lines = textWithoutTabs.split(\"\\n\");\n    var TEN = 10;\n    var NUMBER_PADDING = Math.ceil(Math.log(lines.length + 1 + 1) / Math.log(TEN));\n    var minLine = Math.max(1, line - showLinesAround);\n    var maxLine = Math.min(lines.length, line + showLinesAround);\n    var output = [];\n    for (var k = minLine; k <= maxLine; k++) {\n        var prefix = k === line ? '> ' : '  ';\n        var SEP = \" | \";\n        output.push(\"\" + prefix + padNumber(k, NUMBER_PADDING, \" \") + SEP + lines[k - 1]);\n        if (k === line) {\n            output.push(fillString(pos + NUMBER_PADDING + prefix.length + SEP.length, \" \") + \"   ^\");\n        }\n    }\n    return output.join(\"\\n\");\n}\nfunction findLineAndPosFromIndex(text, index) {\n    var lineNumber = 1;\n    var lastNewLineIndex = 0;\n    var end = Math.min(index, text.length - 1);\n    var cursor = 0;\n    while (cursor < end) {\n        var char = text.charAt(cursor);\n        if (char === '\\n') {\n            lineNumber++;\n            lastNewLineIndex = cursor + 1;\n        }\n        cursor++;\n    }\n    return { line: lineNumber, pos: cursor - lastNewLineIndex };\n}\n/**\n * Throw a fatal error of type { code: number, message?: string, stack?: string }\n */\nfunction fatal(code, message) {\n    var error = Error(code + \": \" + (message || ''));\n    throw { code: code, message: message, stack: error.stack };\n}\n/**\n * Lastnames are in uppercase.\n */\nfunction normalizeLastname(lastname) {\n    return lastname.trim().toUpperCase();\n}\nvar FIRSTNAME_SEPARATORS = [\"-\", \"'\", \" \", \".\", \",\", \";\", \"\"];\n/**\n * Firstnames are capitalized.\n */\nfunction normalizeFirstname(firstname) {\n    return capitalize(firstname, \"-' .,;:/'\");\n}\n/**\n * Capitalizing is setting an uppercase as first char and lowercases every where else.\n */\nfunction capitalize(word, separators, sepIndex) {\n    if (sepIndex === void 0) { sepIndex = 0; }\n    if (typeof separators !== 'string')\n        return capitalizeOneWord(word);\n    if (sepIndex < 0 || sepIndex > separators.length - 1)\n        return capitalizeOneWord(word);\n    var sep = separators.charAt(sepIndex);\n    var items = word.split(sep);\n    return items\n        .map(function (item) { return capitalize(item, separators, sepIndex + 1); })\n        .join(sep);\n}\nfunction capitalizeOneWord(word) {\n    var loCase = word.trimLeft().toLowerCase();\n    return loCase.charAt(0).toUpperCase() + loCase.substr(1);\n}\nvar LEVENSHTEIN_MAX_LENGTH = 256;\nvar LEVENSHTEIN_TABLE = new Int16Array(LEVENSHTEIN_MAX_LENGTH * LEVENSHTEIN_MAX_LENGTH);\nfor (var i = 0; i < LEVENSHTEIN_MAX_LENGTH; i++) {\n    LEVENSHTEIN_TABLE[i] = i;\n    LEVENSHTEIN_TABLE[i * LEVENSHTEIN_MAX_LENGTH] = i;\n}\nfunction levenshteinDistance(word1, word2) {\n    var w1 = word1.length < LEVENSHTEIN_MAX_LENGTH ? word1 : word1.substr(0, LEVENSHTEIN_MAX_LENGTH - 1);\n    var w2 = word2.length < LEVENSHTEIN_MAX_LENGTH ? word2 : word2.substr(0, LEVENSHTEIN_MAX_LENGTH - 1);\n    var len1 = w1.length;\n    var len2 = w2.length;\n    var tbl = LEVENSHTEIN_TABLE;\n    var ROW = LEVENSHTEIN_MAX_LENGTH;\n    for (var i = 1; i <= len1; i++) {\n        for (var j = 1; j <= len2; j++) {\n            var cost = w1.charAt(i) === w2.charAt(j) ? 0 : 1;\n            tbl[i + j * ROW] = Math.min(Math.min(tbl[i - 1 + j * ROW] + 1, tbl[i + (j - 1) * ROW] + 1), tbl[i - 1 + (j - 1) * ROW] + cost);\n        }\n    }\n    return tbl[len1 + len2 * ROW];\n}\n//# sourceMappingURL=util.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar array_1 = __importDefault(require(\"./array\"));\nvar boolean_1 = __importDefault(require(\"./boolean\"));\nvar double_1 = __importDefault(require(\"./double\"));\nvar enum_1 = __importDefault(require(\"./enum\"));\nvar function_1 = __importDefault(require(\"./function\"));\nvar integer_1 = __importDefault(require(\"./integer\"));\nvar object_1 = __importDefault(require(\"./object\"));\nvar string_array_1 = __importDefault(require(\"./string-array\"));\nvar string_1 = __importDefault(require(\"./string\"));\nvar unit_1 = __importDefault(require(\"./unit\"));\nexports.default = {\n    Array: array_1.default,\n    Boolean: boolean_1.default,\n    Double: double_1.default,\n    Enum: enum_1.default,\n    Function: function_1.default,\n    Integer: integer_1.default,\n    Object: object_1.default,\n    StringArray: string_array_1.default,\n    String: string_1.default,\n    Unit: unit_1.default,\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction castEnum(value, choices, defaultValue) {\n    var e_1, _a;\n    try {\n        for (var choices_1 = __values(choices), choices_1_1 = choices_1.next(); !choices_1_1.done; choices_1_1 = choices_1.next()) {\n            var possibleValue = choices_1_1.value;\n            /* eslint-disable triple-equals */\n            // We want a lazy equal check because we are dealing with type conversion.\n            if (value == possibleValue) {\n                return possibleValue;\n            }\n            /* eslint-enable triple-equals */\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (choices_1_1 && !choices_1_1.done && (_a = choices_1.return)) _a.call(choices_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return defaultValue;\n}\nexports.default = castEnum;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction castObject(v, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = {}; }\n    if (typeof v !== \"object\")\n        return defaultValue;\n    if (Array.isArray(v))\n        return defaultValue;\n    return v;\n}\nexports.default = castObject;\n//# sourceMappingURL=object.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = { div: div, tag: tag };\nfunction div() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    return tag.apply(void 0, __spread([\"div\"], args));\n}\nfunction tag(name) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    var elem = document.createElement(name);\n    args.forEach(function (arg) {\n        var e_1, _a;\n        if (typeof arg === \"string\") {\n            elem.classList.add(arg);\n            return;\n        }\n        if (Array.isArray(arg)) {\n            arg.forEach(function (child) {\n                elem.appendChild(child);\n            });\n            return;\n        }\n        try {\n            for (var _b = __values(Object.keys(arg)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attKey = _c.value;\n                var attVal = arg[attKey];\n                elem.setAttribute(attKey, attVal);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    });\n    return elem;\n}\n//# sourceMappingURL=dom.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar dialog_1 = __importDefault(require(\"./dialog\"));\nvar image_1 = __importDefault(require(\"./image\"));\nvar input_1 = __importDefault(require(\"./input\"));\nexports.default = {\n    Dialog: dialog_1.default,\n    Image: image_1.default,\n    Input: input_1.default\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar icon_1 = __importDefault(require(\"../icon\"));\nrequire(\"./button.css\");\nvar touchable_1 = __importDefault(require(\"../../behavior/touchable\"));\nvar string_1 = __importDefault(require(\"../../converter/string\"));\nvar boolean_1 = __importDefault(require(\"../../converter/boolean\"));\nvar Button = /** @class */ (function (_super) {\n    __extends(Button, _super);\n    function Button(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.touchable = new touchable_1.default({ onTap: _this.handleClick });\n        _this.ref = React.createRef();\n        return _this;\n    }\n    Button.prototype.componentDidMount = function () {\n        var element = this.ref.current;\n        if (!element)\n            return;\n        this.touchable.element = element;\n    };\n    Button.prototype.handleClick = function () {\n        var slot = this.props.onClick;\n        if (typeof slot !== 'function')\n            return;\n        slot(this.props.tag);\n    };\n    Button.prototype.render = function () {\n        var p = this.props;\n        var label = string_1.default(p.label, \"\");\n        var icon = string_1.default(p.icon, \"\");\n        var wide = boolean_1.default(p.wide, false);\n        var wait = boolean_1.default(p.wait, false);\n        var flat = boolean_1.default(p.flat, false);\n        var small = boolean_1.default(p.small, false);\n        var dark = boolean_1.default(p.dark, false);\n        var enabled = !wait && boolean_1.default(p.enabled, true);\n        var warning = boolean_1.default(p.warning, false);\n        var className = string_1.default(p.className, '');\n        var classes = [\"tfw-view-Button\", className];\n        if (wide)\n            classes.push(\"wide\");\n        var fgPrimaryColor = \"thm-fgP\" + (dark ? \"D\" : \"\");\n        var bgPrimaryColor = \"thm-bgP\" + (dark ? \"D\" : \"\");\n        var fgSecondaryColor = \"thm-fgS\" + (dark ? \"D\" : \"\");\n        var bgSecondaryColor = \"thm-bgS\" + (dark ? \"D\" : \"\");\n        if (flat) {\n            classes.push(\"flat\");\n            classes.push(warning ? fgSecondaryColor : fgPrimaryColor);\n        }\n        else {\n            if (enabled)\n                classes.push(\"thm-ele-button\");\n            classes.push(warning ? bgSecondaryColor : bgPrimaryColor);\n        }\n        if (small)\n            classes.push(\"small\");\n        var floating = label.trim().length === 0;\n        if (floating)\n            classes.push(\"floating\");\n        this.touchable.enabled = enabled;\n        return (React.createElement(\"button\", { ref: this.ref, className: classes.join(\" \"), disabled: !enabled },\n            icon.length > 0\n                ? React.createElement(icon_1.default, { content: icon, animate: wait, size: computeIconSize(floating, small) + \"rem\" })\n                : null,\n            label.length > 0\n                ? React.createElement(\"div\", { className: \"text\" },\n                    \" \",\n                    label,\n                    \" \")\n                : null));\n    };\n    return Button;\n}(React.Component));\nexports.default = Button;\nfunction computeIconSize(floating, small) {\n    var SMALL_TEXT = 1;\n    var SMALL_FLOAT = 1.5;\n    var LARGE_TEXT = 1.875;\n    var LARGE_FLOAT = 2;\n    if (floating) {\n        // Floating button.\n        return small ? SMALL_FLOAT : LARGE_FLOAT;\n    }\n    // Textual button.\n    return small ? SMALL_TEXT : LARGE_TEXT;\n}\n//# sourceMappingURL=button.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar listeners_1 = __importDefault(require(\"../../listeners\"));\n// Maximal number of milliseconds between down and up.\nvar MAX_TIME = 500;\nvar MAX_TAP_SQUARE_DISTANCE = 300;\nvar MAX_SQUARE_DISTANCE_BETWEEN_TAPS = 400;\nvar MultiTap = /** @class */ (function () {\n    function MultiTap() {\n        this.eventTap = new listeners_1.default();\n        this.eventDoubleTap = new listeners_1.default();\n        this.eventTripleTap = new listeners_1.default();\n        this.tapsCount = 0;\n        // Timeout function id used to fire an event after MAX_TIME ms.\n        // For example, if there are listeners for Tap and DoubleTap,\n        // we won't fire immediatly after the first tap, because we need\n        // to check that this is not a double-tap. Same thing for triple-tap.\n        this.delayedFire = 0;\n    }\n    MultiTap.prototype.clearDelayedFire = function () {\n        var delayedFire = this.delayedFire;\n        if (delayedFire !== 0) {\n            window.clearTimeout(delayedFire);\n            this.delayedFire = 0;\n        }\n    };\n    MultiTap.prototype.mustWeAbortThisEventHandling = function (evt) {\n        this.clearDelayedFire();\n        var abort = !this.isInTheContinuity(evt);\n        this.lastEvent = evt;\n        if (abort)\n            this.tapsCount = 0;\n        return abort;\n    };\n    MultiTap.prototype.handlePointerDown = function (evt) {\n        if (evt.type !== \"pointerdown\") {\n            console.warn(\"pointerdown expected, but got\", evt.type);\n            return;\n        }\n        if (this.mustWeAbortThisEventHandling(evt))\n            return;\n    };\n    MultiTap.prototype.handlePointerUp = function (evt) {\n        var _this = this;\n        if (evt.type !== \"pointerup\") {\n            console.warn(\"pointerup expected, but got\", evt.type);\n            return;\n        }\n        if (this.mustWeAbortThisEventHandling(evt))\n            return;\n        this.tapsCount++;\n        var hasDoubleTapListeners = this.eventDoubleTap.length > 0;\n        var hasTripleTapListeners = this.eventTripleTap.length > 0;\n        switch (this.tapsCount) {\n            // Tap\n            case 1:\n                if (hasDoubleTapListeners || hasTripleTapListeners) {\n                    console.log(\"Delayed TAP\", this.eventDoubleTap.length, this.eventTripleTap.length);\n                    this.delayedFire = window.setTimeout(function () { return _this.eventTap.fire(evt); }, MAX_TIME);\n                }\n                else {\n                    console.log(\"Immediate TAP\");\n                    this.eventTap.fire(evt);\n                }\n                break;\n            // Double-Tap\n            case 2:\n                if (hasTripleTapListeners) {\n                    this.delayedFire = window.setTimeout(function () { return _this.eventDoubleTap.fire(evt); }, MAX_TIME);\n                }\n                else {\n                    this.eventDoubleTap.fire(evt);\n                }\n                break;\n            // Triple-Tap\n            default:\n                this.eventTripleTap.fire(evt);\n        }\n    };\n    MultiTap.prototype.isInTheContinuity = function (evt) {\n        var lastEvent = this.lastEvent;\n        if (!lastEvent)\n            return false;\n        if (evt.timeStamp - lastEvent.timeStamp > MAX_TIME)\n            return false;\n        var dx = evt.pageX - lastEvent.pageX;\n        var dy = evt.pageY - lastEvent.pageY;\n        var dist = dx * dx + dy * dy;\n        if (lastEvent.type === \"pointerup\") {\n            if (evt.type === \"pointerdown\" &&\n                dist < MAX_SQUARE_DISTANCE_BETWEEN_TAPS) {\n                return true;\n            }\n            return false;\n        }\n        if (lastEvent.type === \"pointerdown\") {\n            if (evt.type === \"pointerup\" &&\n                dist < MAX_TAP_SQUARE_DISTANCE) {\n                return true;\n            }\n            return false;\n        }\n        console.warn(\"Bad event type!\", lastEvent.type);\n        return false;\n    };\n    return MultiTap;\n}());\nexports.default = MultiTap;\n//# sourceMappingURL=multi-tap.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar save_as_file_1 = __importDefault(require(\"save-as-file\"));\nexports.default = {\n    canvasFromSVG: canvasFromSVG,\n    canvasToImageJPG: canvasToImageJPG, canvasToImagePNG: canvasToImagePNG, canvasToImageWEBP: canvasToImageWEBP,\n    cover: cover,\n    fromArrayBuffer: fromArrayBuffer, fromBlob: fromBlob, fromSVG: fromSVG,\n    saveCanvasAsJPG: saveCanvasAsJPG, saveCanvasAsPNG: saveCanvasAsPNG,\n};\n/**\n * Copy the content of canvas \"src\" into canvas \"dst\" by fully covering \"dst\".\n */\nfunction cover(src, dst) {\n    var srcW = src.width;\n    var srcH = src.height;\n    var dstW = dst.width;\n    var dstH = dst.height;\n    var srcCtx = src.getContext(\"2d\");\n    var dstCtx = dst.getContext(\"2d\");\n    if (srcCtx && dstCtx && srcH > 0 && dstH > 0) {\n        var srcR = srcW / srcH;\n        var dstR = dstW / dstH;\n        var scale = 1;\n        if (srcR > dstR) {\n            // Width overflow\n            scale = dstH / srcH;\n            dstCtx.drawImage(src, 0.5 * (dstW - scale * srcW), 0, scale * srcW, dstH);\n        }\n        else {\n            // Height overflow\n            scale = dstW / srcW;\n            dstCtx.drawImage(src, 0, 0.5 * (dstH - scale * srcH), dstW, scale * srcH);\n        }\n    }\n    return dst;\n}\nfunction fromBlob(blob) {\n    var url = URL.createObjectURL(blob);\n    var img = new Image();\n    return new Promise(function (resolve) {\n        img.src = url;\n        // Https://medium.com/dailyjs/image-loading-with-image-decode-b03652e7d2d2\n        if (img.decode) {\n            img.decode()\n                // TODO: Figure out why decode() throws DOMException\n                .then(function () { return resolve(img); });\n        }\n        else {\n            img.onload = function () { return resolve(img); };\n        }\n    });\n}\nfunction fromSVG(svg) {\n    var url = \"data:image/svg+xml;base64,\" + btoa(svg.outerHTML);\n    var img = new Image();\n    return new Promise(function (resolve, reject) {\n        img.onload = function () { return resolve(img); };\n        img.onerror = reject;\n        img.src = url;\n    });\n}\nfunction fromArrayBuffer(arrayBuffer) {\n    var blob = new Blob([arrayBuffer]);\n    return fromBlob(blob);\n}\nfunction canvasFromSVG(svg, width, height, background) {\n    var _this = this;\n    return new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\n        var img, canvas, ctx;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fromSVG(svg)];\n                case 1:\n                    img = _a.sent();\n                    canvas = document.createElement(\"canvas\");\n                    canvas.setAttribute(\"width\", \"\" + width);\n                    canvas.setAttribute(\"height\", \"\" + height);\n                    ctx = canvas.getContext(\"2d\");\n                    if (!ctx) {\n                        reject(\"Unable to create a 2D context!\");\n                        return [2 /*return*/];\n                    }\n                    if (background) {\n                        ctx.fillStyle = background;\n                        ctx.fillRect(0, 0, width, height);\n                    }\n                    ctx.drawImage(img, 0, 0, width, height);\n                    resolve(canvas);\n                    return [2 /*return*/];\n            }\n        });\n    }); });\n}\nfunction canvasToImagePNG(canvas) {\n    var url = canvas.toDataURL(\"image/png\");\n    var img = new Image();\n    return new Promise(function (resolve) {\n        img.onload = function () { return resolve(img); };\n        img.src = url;\n    });\n}\nfunction canvasToImageJPG(canvas, quality) {\n    if (quality === void 0) { quality = 0.92; }\n    var url = canvas.toDataURL(\"image/jpg\", quality);\n    var img = new Image();\n    return new Promise(function (resolve) {\n        img.onload = function () { return resolve(img); };\n        img.src = url;\n    });\n}\nfunction canvasToImageWEBP(canvas, quality) {\n    if (quality === void 0) { quality = 0.92; }\n    var url = canvas.toDataURL(\"image/webp\", quality);\n    var img = new Image();\n    return new Promise(function (resolve) {\n        img.onload = function () { return resolve(img); };\n        img.src = url;\n    });\n}\nfunction saveCanvasAsPNG(canvas, filename) {\n    var _this = this;\n    return new Promise(function (resolve) {\n        canvas.toBlob(function (blob) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!blob)\n                            return [2 /*return*/];\n                        return [4 /*yield*/, save_as_file_1.default(blob, filename)];\n                    case 1:\n                        _a.sent();\n                        resolve(canvas);\n                        return [2 /*return*/];\n                }\n            });\n        }); }, \"image/png\", 100);\n    });\n}\nfunction saveCanvasAsJPG(canvas, filename, quality) {\n    var _this = this;\n    if (quality === void 0) { quality = 0.92; }\n    return new Promise(function (resolve) {\n        canvas.toBlob(function (blob) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!blob)\n                            return [2 /*return*/];\n                        return [4 /*yield*/, save_as_file_1.default(blob, filename)];\n                    case 1:\n                        _a.sent();\n                        resolve(canvas);\n                        return [2 /*return*/];\n                }\n            });\n        }); }, \"image/jpg\", quality);\n    });\n}\n//# sourceMappingURL=image.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar input_1 = __importDefault(require(\"../view/input\"));\nvar ok_cancel_1 = __importDefault(require(\"../view/ok-cancel\"));\nvar dialog_1 = __importDefault(require(\"./dialog\"));\nexports.default = { integer: integer };\nvar IntegerView = /** @class */ (function (_super) {\n    __extends(IntegerView, _super);\n    function IntegerView(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleChange = function (value) {\n            _this.setState({ value: value });\n            var num = parseInt(value);\n            if (!isNaN(num)) {\n                _this.props.onChange(num);\n            }\n        };\n        _this.state = {\n            value: \"\" + props.initialValue\n        };\n        _this.handleChange(_this.state.value);\n        return _this;\n    }\n    IntegerView.prototype.render = function () {\n        return react_1.default.createElement(input_1.default, { wide: true, focus: true, onEnterPressed: this.props.onOK, onChange: this.handleChange, value: \"\" + this.state.value });\n    };\n    return IntegerView;\n}(react_1.default.Component));\nfunction integer(args) {\n    return new Promise(function (resolve) {\n        var value = null;\n        var onCancel = function () {\n            dialog.hide();\n            resolve(null);\n        };\n        var onOK = function () {\n            dialog.hide();\n            resolve(value);\n        };\n        var dialog = dialog_1.default.show({\n            closeOnEscape: true,\n            title: args.label,\n            footer: react_1.default.createElement(ok_cancel_1.default, { onOK: onOK, onCancel: onCancel }),\n            onClose: onCancel,\n            content: react_1.default.createElement(IntegerView, { initialValue: args.value, onOK: onOK, onChange: function (v) { return value = v; } })\n        });\n    });\n}\n//# sourceMappingURL=input.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nrequire(\"./input.css\");\nvar string_array_1 = __importDefault(require(\"../../converter/string-array\"));\nvar integer_1 = __importDefault(require(\"../../converter/integer\"));\nvar boolean_1 = __importDefault(require(\"../../converter/boolean\"));\nvar string_1 = __importDefault(require(\"../../converter/string\"));\nvar unit_1 = __importDefault(require(\"../../converter/unit\"));\nvar label_1 = __importDefault(require(\"../label\"));\nvar icon_1 = __importDefault(require(\"../icon\"));\nvar storage_1 = __importDefault(require(\"../../storage\"));\nvar LocalStorage = new storage_1.default.PrefixedLocalStorage(\"tfw/view/input/\");\nvar globalId = 0;\nvar Input = /** @class */ (function (_super) {\n    __extends(Input, _super);\n    function Input() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.input = React.createRef();\n        _this.id = \"tfw.view.Input/\" + globalId++;\n        _this.state = {\n            value: _this.props.value,\n            error: _this.props.error || \"\"\n        };\n        _this.handleKeyDown = function (evt) {\n            if (evt.key === \"Enter\") {\n                evt.preventDefault();\n                evt.stopPropagation();\n                var _a = _this.props, onEnterPressed = _a.onEnterPressed, value = _a.value;\n                if (typeof onEnterPressed === 'function') {\n                    onEnterPressed(value);\n                }\n            }\n        };\n        _this.onFocus = function (event) {\n            var input = _this.input ? _this.input.current : null;\n            if (!input)\n                return;\n            if (!input.classList)\n                return;\n            input.classList.remove(\"thm-bg3\");\n            input.classList.add(\"thm-bgSL\");\n            if (_this.props.type !== 'number') {\n                // Warning! setSelectionRange fails for \"number\" input.\n                input.setSelectionRange(0, input.value.length);\n            }\n        };\n        _this.onBlur = function (event) {\n            var input = _this.input ? _this.input.current : null;\n            if (!input)\n                return;\n            if (!input.classList)\n                return;\n            input.classList.add(\"thm-bg3\");\n            input.classList.remove(\"thm-bgSL\");\n        };\n        _this.onChange = function (event) {\n            var _a = _this.props, onChange = _a.onChange, onValidation = _a.onValidation;\n            var value = event.target.value;\n            var isValid = _this.isValid(value);\n            if (typeof onChange === 'function') {\n                event.preventDefault();\n                _this.setState({ value: value });\n                if (isValid) {\n                    onChange(value);\n                }\n            }\n            if (typeof onValidation === 'function') {\n                var error = onValidation(isValid, value);\n                if (!isValid && typeof error === 'string') {\n                    _this.setState({ error: error });\n                }\n            }\n            else if (!isValid && typeof onValidation === 'string') {\n                _this.setState({ error: onValidation });\n            }\n        };\n        return _this;\n    }\n    Input.prototype.componentDidMount = function () {\n        var _a = this.props, storage = _a.storage, onChange = _a.onChange;\n        if (storage && typeof onChange === 'function') {\n            var value = LocalStorage.get(storage, null);\n            if (value !== null) {\n                this.setState({ value: value });\n                this.value = value;\n                onChange(value);\n            }\n        }\n        this.refreshValueIfNeeded();\n    };\n    Input.prototype.componentDidUpdate = function () {\n        var _a = this.props, storage = _a.storage, value = _a.value;\n        if (storage) {\n            LocalStorage.set(storage, value);\n        }\n        this.refreshValueIfNeeded();\n    };\n    Input.prototype.refreshValueIfNeeded = function () {\n        var _a = this.props, value = _a.value, error = _a.error, transform = _a.transform;\n        if (this.value !== value) {\n            this.value = value;\n            if (typeof transform === 'function') {\n                var transformedValue = transform(value);\n                if (transformedValue !== value) {\n                    this.setState({ value: transformedValue });\n                }\n                else {\n                    this.setState({ value: value });\n                }\n            }\n            else {\n                this.setState({ value: value });\n            }\n        }\n        if (this.error !== error) {\n            this.error = error;\n            this.setState({ error: error || \"\" });\n        }\n    };\n    Input.prototype.isValid = function (value) {\n        var validator = this.props.validator;\n        if (!validator)\n            return true;\n        if (typeof validator === 'function') {\n            var validatorFunction = validator;\n            try {\n                return validatorFunction(value);\n            }\n            catch (ex) {\n                console.error(\"Error in a validator:\", ex);\n                return false;\n            }\n        }\n        if (validator instanceof RegExp) {\n            var rx = validator;\n            try {\n                return rx.test(value);\n            }\n            catch (ex) {\n                console.error(\"Error in a validator:\", ex);\n                return false;\n            }\n        }\n        return true;\n    };\n    Input.prototype.render = function () {\n        var DEFAULT_SIZE = 8;\n        var p = this.props;\n        var type = string_1.default(p.type, \"text\");\n        var label = string_1.default(p.label, \"\");\n        var placeholder = string_1.default(p.placeholder, \"\");\n        var wide = boolean_1.default(p.wide, false);\n        var focus = boolean_1.default(p.focus, false);\n        var enabled = boolean_1.default(p.enabled, true);\n        var size = Math.max(1, integer_1.default(p.size, DEFAULT_SIZE));\n        var width = unit_1.default(p.width, \"auto\");\n        var classes = string_array_1.default(p.className);\n        var suggestions = string_array_1.default(p.suggestions);\n        var value = this.state.value;\n        var valid = this.isValid(value);\n        var error = this.state.error;\n        var listId = this.id + \"/list\";\n        var labelId = this.id + \"/label\";\n        classes.push(\"tfw-view-Input\", \"custom\");\n        if (wide)\n            classes.push(\"wide\");\n        if (!valid)\n            classes.push(\"invalid\");\n        var style = {};\n        if (!wide) {\n            style.width = width;\n            if (width !== 'auto') {\n                style.maxWidth = width;\n            }\n        }\n        var inputClassName = \"thm-ele-button \" + (enabled ? 'thm-bg3' : 'thm-bg0');\n        return (React.createElement(\"div\", { className: classes.join(\" \"), style: style },\n            React.createElement(label_1.default, { htmlFor: labelId, label: label }),\n            React.createElement(\"div\", { className: 'input' },\n                React.createElement(\"datalist\", { id: listId }, suggestions.map(function (suggestion) { return React.createElement(\"option\", { key: suggestion, value: suggestion }); })),\n                React.createElement(\"input\", { name: this.props.name, list: listId, ref: this.input, autoFocus: focus, className: inputClassName, placeholder: placeholder, disabled: !enabled, type: type, min: this.props.min, max: this.props.max, id: labelId, size: size, onFocus: this.onFocus, onBlur: this.onBlur, onChange: this.onChange, onKeyDown: this.handleKeyDown, value: value }),\n                !valid &&\n                    React.createElement(\"div\", { className: \"icon\" },\n                        React.createElement(icon_1.default, { content: \"warning\", size: \"1.5rem\", pen0: \"S\" }))),\n            !valid && error.trim().length > 0 &&\n                React.createElement(\"div\", { className: \"error thm-fgSD\" }, error)));\n    };\n    return Input;\n}(React.Component));\nexports.default = Input;\n//# sourceMappingURL=input.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nrequire(\"./label.css\");\nvar Label = /** @class */ (function (_super) {\n    __extends(Label, _super);\n    function Label() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Label.prototype.render = function () {\n        var label = this.props.label;\n        if (typeof label !== 'string' || label.trim().length === 0)\n            return null;\n        return (react_1.default.createElement(\"label\", { className: \"tfw-view-Label\", htmlFor: this.props.htmlFor }, this.props.label));\n    };\n    return Label;\n}(react_1.default.Component));\nexports.default = Label;\n//# sourceMappingURL=label.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar button_1 = __importDefault(require(\"../button\"));\nrequire(\"./ok-cancel.css\");\nvar OkCancel = /** @class */ (function (_super) {\n    __extends(OkCancel, _super);\n    function OkCancel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OkCancel.prototype.render = function () {\n        return (react_1.default.createElement(\"div\", { className: \"tfw-view-OkCancel thm-bg2\" },\n            react_1.default.createElement(button_1.default, { icon: \"cancel\", label: \"Cancel\", flat: true, onClick: this.props.onCancel }),\n            react_1.default.createElement(button_1.default, { icon: \"ok\", label: \"OK\", flat: false, onClick: this.props.onOK })));\n    };\n    return OkCancel;\n}(react_1.default.Component));\nexports.default = OkCancel;\n//# sourceMappingURL=ok-cancel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    saveAs: function (blob, fileName) {\n        var url = window.URL.createObjectURL(blob);\n        var anchorElem = document.createElement(\"a\");\n        anchorElem.style.display = \"none\";\n        anchorElem.href = url;\n        anchorElem.download = fileName;\n        document.body.appendChild(anchorElem);\n        anchorElem.click();\n        document.body.removeChild(anchorElem);\n        // On Edge, revokeObjectURL should be called only after\n        // A.click() has completed, atleast on EdgeHTML 15.15048\n        setTimeout(function () {\n            window.URL.revokeObjectURL(url);\n        }, 5000);\n    },\n};\n//# sourceMappingURL=fileapi.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    loadFredericka: function () { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, Promise.resolve().then(function () { return __importStar(require('./fredericka')); })];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    }); }); },\n    loadJosefin: function () { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, Promise.resolve().then(function () { return __importStar(require('./josefin')); })];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    }); }); },\n    loadMysteryQuest: function () { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, Promise.resolve().then(function () { return __importStar(require('./mystery-quest')); })];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    }); }); },\n    loadRoboto: function () { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, Promise.resolve().then(function () { return __importStar(require('./roboto')); })];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    }); }); },\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar font_1 = __importDefault(require(\"./font\"));\nrequire(\"./mystery-quest.css\");\nexports.default = new font_1.default(\"mystery-quest\");\n//# sourceMappingURL=fredericka.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar font_1 = __importDefault(require(\"./font\"));\nrequire(\"./josefin.css\");\nexports.default = new font_1.default(\"josefin-sans\");\n//# sourceMappingURL=josefin.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar font_1 = __importDefault(require(\"./font\"));\nrequire(\"./josefin.css\");\nexports.default = new font_1.default(\"josefin-sans\");\n//# sourceMappingURL=mystery-quest.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar font_1 = __importDefault(require(\"./font\"));\nrequire(\"./roboto.css\");\nexports.default = new font_1.default(\"roboto\");\n//# sourceMappingURL=roboto.js.map","\"use strict\";\n/**\n * Here is the list of all parameters used if all the handlers.\n * * x, y: coord relative to the upper-left corner of the element.\n *\n * tap({ x: number, y: number, index: number })\n *\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Gesture = void 0;\nvar moves_1 = __importDefault(require(\"./moves\"));\nvar basic_handler_1 = __importDefault(require(\"./basic-handler\"));\nvar SYMBOL = Symbol(\"gesture\");\nvar ID = 0;\nvar Gesture = /** @class */ (function () {\n    function Gesture(elem) {\n        this.id = ID++;\n        this.element = elem;\n        this.element[SYMBOL] = this;\n        this.handlers = {};\n        basic_handler_1.default(elem, this.handleDown.bind(this), this.handleUp.bind(this), this.handleMove.bind(this));\n        this.pointers = new Array(3);\n        elem.addEventListener(\"contextmenu\", function (evt) { evt.preventDefault(); }, false);\n    }\n    Object.defineProperty(Gesture.prototype, \"identifier\", {\n        get: function () { return this.id; },\n        enumerable: false,\n        configurable: true\n    });\n    Gesture.prototype.on = function (handlers) {\n        if (handlers.wheel)\n            this.element.addEventListener(\"wheel\", handlers.wheel);\n        if (handlers.keyup)\n            this.element.addEventListener(\"keyup\", handlers.keyup);\n        if (handlers.keydown)\n            this.element.addEventListener(\"keydown\", handlers.keydown);\n        this.handlers = __assign(__assign({}, this.handlers), handlers);\n    };\n    Gesture.prototype.getPointer = function (index) {\n        var pointers = this.pointers;\n        if (typeof pointers[index] === \"undefined\") {\n            pointers[index] = {\n                isDown: false,\n                moves: new moves_1.default(0, 0),\n                rect: { left: 0, top: 0, width: 0, height: 0 },\n            };\n        }\n        return pointers[index];\n    };\n    Gesture.prototype.handleDown = function (event) {\n        // We don't want to deal with more than 3 simultaneous touches.\n        if (event.index > 2)\n            return;\n        var x = event.x, y = event.y;\n        var element = this.element;\n        var ptr = this.getPointer(event.index);\n        ptr.isDown = true;\n        ptr.moves.init(x, y);\n        if (this.handlers.down) {\n            this.handlers.down(__assign(__assign({}, event), { x: x, y: y, target: element }));\n        }\n    };\n    Gesture.prototype.handleMove = function (event) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2)\n            return;\n        var ptr = this.getPointer(event.index);\n        var x = event.x, y = event.y;\n        ptr.moves.add(x, y);\n        this.recognizePan(event, ptr);\n    };\n    Gesture.prototype.handleUp = function (event) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2)\n            return;\n        var x = event.x, y = event.y;\n        var ptr = this.getPointer(event.index);\n        ptr.isDown = false;\n        ptr.moves.add(x, y);\n        if (this.handlers.up) {\n            this.handlers.up(__assign(__assign({}, event), { x: x, y: y, target: this.element }));\n        }\n        this.recognizeTap(event, ptr);\n        this.recognizeSwipe(event, ptr);\n    };\n    /**\n     * Returns true if current gesture has at least one of the provided handlers.\n     */\n    Gesture.prototype.hasHandlerFor = function () {\n        var e_1, _a;\n        var names = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            names[_i] = arguments[_i];\n        }\n        try {\n            for (var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()) {\n                var name_1 = names_1_1.value;\n                if (this.handlers[name_1])\n                    return true;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return false;\n    };\n    Gesture.prototype.recognizePan = function (evt, ptr) {\n        if (!ptr.isDown)\n            return;\n        this.recognizePanDown(evt, ptr);\n        this.recognizePanUp(evt, ptr);\n        if (this.handlers.pan) {\n            var _a = ptr.moves, x = _a.x, y = _a.y, startX = _a.startX, startY = _a.startY;\n            this.handlers.pan(__assign(__assign({}, evt), { x: x, y: y, startX: startX, startY: startY, target: this.element }));\n        }\n    };\n    Gesture.prototype.recognizePanDown = function (evt, ptr) {\n        if (!this.hasHandlerFor(\"pandown\", \"panvertical\"))\n            return;\n        // Check that we are panning down.\n        var moves = ptr.moves;\n        var sx = Math.abs(moves.speedX);\n        var sy = moves.speedY;\n        if (sy < sx)\n            return;\n        // Check that the final point is beneath the initial one.\n        var dx = Math.abs(moves.x - moves.startX);\n        var dy = moves.y - moves.startY;\n        if (dy < dx)\n            return;\n        if (this.handlers.pandown) {\n            this.handlers.pandown(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.panvertical) {\n            this.handlers.panvertical(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n    };\n    Gesture.prototype.recognizePanUp = function (evt, ptr) {\n        if (!this.hasHandlerFor(\"panup\", \"panvertical\"))\n            return;\n        // Check that we are panning up.\n        var moves = ptr.moves;\n        var sx = Math.abs(moves.speedX);\n        var sy = -moves.speedY;\n        if (sy < sx)\n            return;\n        // Check that the final point is beneath the initial one.\n        var dx = Math.abs(moves.x - moves.startX);\n        var dy = moves.startY - moves.y;\n        if (dy < dx)\n            return;\n        if (this.handlers.panup) {\n            this.handlers.panup(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.panvertical) {\n            this.handlers.panvertical(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n    };\n    Gesture.prototype.recognizeSwipe = function (evt, ptr) {\n        this.recognizeSwipeDown(evt, ptr);\n        this.recognizeSwipeUp(evt, ptr);\n        this.recognizeSwipeLeft(evt, ptr);\n        if (this.handlers.swipe) {\n            var _a = ptr.moves, x = _a.x, y = _a.y, startX = _a.startX, startY = _a.startY;\n            this.handlers.swipe(__assign(__assign({}, evt), { x: x, y: y, startX: startX, startY: startY, target: this.element }));\n        }\n    };\n    Gesture.prototype.recognizeSwipeDown = function (evt, ptr) {\n        if (!this.hasHandlerFor(\"swipedown\", \"swipevertical\"))\n            return;\n        // Check that we are panning down.\n        var moves = ptr.moves;\n        var sx = Math.abs(moves.speedX);\n        var sy = moves.speedY;\n        if (sy < sx)\n            return;\n        // Check that the final point is beneath the initial one.\n        var dx = Math.abs(moves.x - moves.startX);\n        var dy = moves.y - moves.startY;\n        if (dy < dx)\n            return;\n        // Minimal speed for swipe: 100 pixels/second.\n        var speed = dy / moves.elapsedTime;\n        if (speed < 0.1)\n            return;\n        if (this.handlers.swipedown) {\n            this.handlers.swipedown(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.swipevertical) {\n            this.handlers.swipevertical(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n    };\n    Gesture.prototype.recognizeSwipeLeft = function (evt, ptr) {\n        if (!this.hasHandlerFor(\"swipeleft\", \"swipehorizontal\"))\n            return;\n        // Check that we are panning left.\n        var moves = ptr.moves;\n        var sx = -moves.speedX;\n        var sy = Math.abs(moves.speedY);\n        if (sx < sy)\n            return;\n        // Check that the final point is beneath the initial one.\n        var dx = moves.startX - moves.x;\n        var dy = Math.abs(moves.y - moves.startY);\n        if (dx < dy)\n            return;\n        // Minimal speed for swipe: 100 pixels/second.\n        var speed = dx / moves.elapsedTime;\n        if (speed < 0.1)\n            return;\n        if (this.handlers.swipeleft) {\n            this.handlers.swipeleft(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.swipehorizontal) {\n            this.handlers.swipehorizontal(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n    };\n    Gesture.prototype.recognizeSwipeUp = function (evt, ptr) {\n        if (!this.hasHandlerFor(\"swipeup\", \"swipevertical\"))\n            return;\n        // Check that we are panning up.\n        var moves = ptr.moves;\n        var sx = Math.abs(moves.speedX);\n        var sy = moves.speedY;\n        if (sy < sx)\n            return;\n        // Check that the final point is beneath the initial one.\n        var dx = Math.abs(moves.x - moves.startX);\n        var dy = moves.y - moves.startY;\n        if (dy < dx)\n            return;\n        // Minimal speed for swipe: 100 pixels/second.\n        var speed = dy / moves.elapsedTime;\n        if (speed < 0.1)\n            return;\n        if (this.handlers.swipeup) {\n            this.handlers.swipeup(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.swipevertical) {\n            this.handlers.swipevertical(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n        }\n    };\n    Gesture.prototype.recognizeTap = function (evt, ptr) {\n        // A tap is recognized only if there is less than 400ms\n        // Between down and up, and if the pointer has not moves more\n        // Than 16px.\n        if (!this.handlers.tap || ptr.moves.elapsedTime > 400)\n            return;\n        var moves = ptr.moves;\n        var dx = Math.abs(moves.x - moves.startX);\n        if (dx > 16)\n            return;\n        var dy = Math.abs(moves.y - moves.startY);\n        if (dy > 16)\n            return;\n        evt.clear();\n        this.handlers.tap(__assign(__assign({}, evt), { x: moves.x, y: moves.y, target: this.element }));\n    };\n    return Gesture;\n}());\nexports.Gesture = Gesture;\nfunction default_1(element) {\n    var elem = element;\n    var gesture = elem[SYMBOL];\n    if (gesture)\n        return gesture;\n    gesture = new Gesture(elem);\n    elem[SYMBOL] = gesture;\n    return gesture;\n}\nexports.default = default_1;\n//# sourceMappingURL=gesture.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CAPACITY = 3;\n/**\n * Helper to manage a pointer move.\n * It gives you the location, the speed and the acceleration of your pointer.\n *\n * @type {[type]}\n */\nvar Moves = /** @class */ (function () {\n    function Moves(x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        this._cursor = 0;\n        this._time = new Array(CAPACITY);\n        this._time0 = 0;\n        this._x = new Array(CAPACITY);\n        this._x0 = 0;\n        this._y = new Array(CAPACITY);\n        this._y0 = 0;\n        this.init(x, y);\n    }\n    Object.defineProperty(Moves.prototype, \"accelX\", {\n        get: function () {\n            var idx0 = this._index(0);\n            var time0 = this._time[idx0];\n            var idx1 = this._index(1);\n            var time1 = this._time[idx1];\n            var time01 = time0 - time1;\n            if (time01 <= 0)\n                return 0;\n            var idx2 = this._index(2);\n            var time2 = this._time[idx2];\n            var time12 = time1 - time2;\n            if (time12 <= 0)\n                return 0;\n            var x0 = this._x[idx0];\n            var x1 = this._x[idx1];\n            var x2 = this._x[idx2];\n            var speed01 = (x0 - x1) / time01;\n            var speed12 = (x1 - x2) / time12;\n            return (speed01 - speed12) / time01;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Moves.prototype, \"accelY\", {\n        get: function () {\n            var idx0 = this._index(0);\n            var time0 = this._time[idx0];\n            var idx1 = this._index(1);\n            var time1 = this._time[idx1];\n            var time01 = time0 - time1;\n            if (time01 <= 0)\n                return 0;\n            var idx2 = this._index(2);\n            var time2 = this._time[idx2];\n            var time12 = time1 - time2;\n            if (time12 <= 0)\n                return 0;\n            var y0 = this._y[idx0];\n            var y1 = this._y[idx1];\n            var y2 = this._y[idx2];\n            var speed01 = (y0 - y1) / time01;\n            var speed12 = (y1 - y2) / time12;\n            return (speed01 - speed12) / time01;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Moves.prototype, \"elapsedTime\", {\n        get: function () { return this.now - this._time0; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Moves.prototype, \"now\", {\n        get: function () { return Date.now(); },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Moves.prototype, \"speedX\", {\n        get: function () {\n            var idx0 = this._cursor;\n            var idx1 = this._index(1);\n            var time = this._time[idx0] - this._time[idx1];\n            if (time <= 0)\n                return 0;\n            return (this._x[idx0] - this._x[idx1]) / time;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Moves.prototype, \"speedY\", {\n        get: function () {\n            var idx0 = this._cursor;\n            var idx1 = this._index(1);\n            var time = this._time[idx0] - this._time[idx1];\n            if (time <= 0)\n                return 0;\n            return (this._y[idx0] - this._y[idx1]) / time;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Moves.prototype, \"startX\", {\n        get: function () { return this._x0; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Moves.prototype, \"startY\", {\n        get: function () { return this._y0; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Moves.prototype, \"x\", {\n        get: function () { return this._x[this._cursor]; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Moves.prototype, \"y\", {\n        get: function () { return this._y[this._cursor]; },\n        enumerable: false,\n        configurable: true\n    });\n    Moves.prototype._index = function (shift) {\n        return (this._cursor + shift) % CAPACITY;\n    };\n    Moves.prototype.add = function (x, y) {\n        var idx = (this._cursor + CAPACITY - 1) % CAPACITY;\n        this._time[idx] = this.now;\n        this._x[idx] = x;\n        this._y[idx] = y;\n        this._cursor = idx;\n    };\n    Moves.prototype.init = function (x, y) {\n        this._time0 = this.now;\n        this._x0 = x;\n        this._y0 = y;\n        this._x = this._x.fill(this._x0, 0, CAPACITY);\n        this._y = this._y.fill(this._y0, 0, CAPACITY);\n        this._time = this._time.fill(this._time0, 0, CAPACITY);\n    };\n    return Moves;\n}());\nexports.default = Moves;\n//# sourceMappingURL=moves.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * BasicHandler(\n *     element: HTMLElement,\n *     handleDown: TBasicHandler,\n *     handleUp: TBasicHandler,\n *     handleMove: TBasicHandler\n * )\n *\n * Deals with three basic events : DOWN, UP and MOVE.\n * If the device has several input touches, we will return\n * only one event.\n *\n * A TBasicHandler is a synthetic event object:\n *   - x: X coordinate relative to the viewport, not including any scroll offset.\n *   - y: Y coordinate relative to the viewport, not including any scroll offset.\n *   - startX\n *   - startY\n *   - index: For multi-touch system. The first one is 0, the second is 1, etc.\n *   - buttons: 1 = left, 2 = right.\n *   - mouse: \"mouse\" | \"touch\" | \"pen\".\n *   - clear(): Call stopPropagation() and preventDefault() on this event.\n *\n */\nvar finger_1 = __importDefault(require(\"./finger\"));\nvar movingElements = [];\nwindow.addEventListener(\"mousemove\", function (event) {\n    var e_1, _a;\n    try {\n        for (var movingElements_1 = __values(movingElements), movingElements_1_1 = movingElements_1.next(); !movingElements_1_1.done; movingElements_1_1 = movingElements_1.next()) {\n            var movingElem = movingElements_1_1.value;\n            if (event.cancelBubble)\n                continue;\n            var target = movingElem.target, handleMove = movingElem.handleMove, x = movingElem.x, y = movingElem.y, index = movingElem.index;\n            if (typeof handleMove !== \"function\")\n                continue;\n            try {\n                handleMove({\n                    x: event.clientX - x,\n                    y: event.clientY - y,\n                    index: index,\n                    event: event,\n                    pointer: \"mouse\",\n                    buttons: translateButtons(event),\n                    target: target,\n                    clear: createClear(event),\n                });\n            }\n            catch (ex) {\n                console.error(\"[tfw.gesture.basic-handler] window.mousemove\", ex);\n                console.error(\"    handler=\", handleMove);\n                console.error(\"    event=\", event);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (movingElements_1_1 && !movingElements_1_1.done && (_a = movingElements_1.return)) _a.call(movingElements_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n}, false);\nwindow.addEventListener(\"mouseup\", function (event) {\n    var e_2, _a;\n    try {\n        for (var movingElements_2 = __values(movingElements), movingElements_2_1 = movingElements_2.next(); !movingElements_2_1.done; movingElements_2_1 = movingElements_2.next()) {\n            var movingElem = movingElements_2_1.value;\n            if (event.cancelBubble)\n                continue;\n            var target = movingElem.target, handleUp = movingElem.handleUp, x = movingElem.x, y = movingElem.y, index = movingElem.index;\n            if (typeof handleUp !== \"function\")\n                continue;\n            try {\n                handleUp({\n                    x: event.clientX - x,\n                    y: event.clientY - y,\n                    index: index,\n                    event: event,\n                    pointer: \"mouse\",\n                    buttons: translateButtons(event),\n                    target: target,\n                    clear: createClear(event),\n                });\n            }\n            catch (ex) {\n                console.error(\"[tfw.gesture.basic-handler] window.mouseup\", ex);\n                console.error(\"    handler=\", handleUp);\n                console.error(\"    event=\", event);\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (movingElements_2_1 && !movingElements_2_1.done && (_a = movingElements_2.return)) _a.call(movingElements_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    movingElements.splice(0, movingElements.length);\n}, false);\nvar BasicHandler = /** @class */ (function () {\n    function BasicHandler(element, handleDown, handleUp, handleMove) {\n        this.deviceHandlers = {};\n        this.fingers = new finger_1.default();\n        this.mouseType = \"\";\n        this.mouseTypeTime = 0;\n        this.pressed = false;\n        this.element = element;\n        attachDownEvent.call(this, handleDown, handleUp, handleMove);\n        attachUpEventTouch.call(this, handleDown, handleUp, handleMove);\n    }\n    /**\n     * If you device can hold mouse and touch events, you will receive two events.\n     * This function prevent it.\n     *\n     * @param   mouseType\n     * @returns If `false`, we must ignore this event.\n     */\n    BasicHandler.prototype.checkMouseType = function (mouseType) {\n        var now = Date.now();\n        var delay = now - this.mouseTypeTime;\n        this.mouseTypeTime = now;\n        if (this.mouseType.length === 0 || delay > 500) {\n            // If the user waits more than 500ms, he can change of mouse.\n            this.mouseType = mouseType;\n            return true;\n        }\n        return this.mouseType === mouseType;\n    };\n    BasicHandler.prototype.detachEvents = function () {\n        var element = this.element;\n        var _a = this.deviceHandlers, touchstart = _a.touchstart, touchend = _a.touchend, mousedown = _a.mousedown;\n        if (touchstart)\n            element.removeEventListener(\"touchstart\", touchstart, false);\n        if (touchend)\n            element.removeEventListener(\"touchend\", touchend, false);\n        if (mousedown)\n            element.removeEventListener(\"mousedown\", mousedown, false);\n    };\n    return BasicHandler;\n}());\nfunction attachDownEvent(handleDown, handleUp, handleMove) {\n    attachDownEventTouch.call(this, handleDown, handleUp, handleMove);\n    attachDownEventMouse.call(this, handleDown, handleUp, handleMove);\n}\nfunction attachDownEventTouch(handleDown, handleUp, handleMove) {\n    var _this = this;\n    var _a = this, element = _a.element, deviceHandlers = _a.deviceHandlers;\n    var handler = function (event) {\n        var e_3, _a;\n        if (!_this.checkMouseType(\"touch\"))\n            return;\n        var rect = element.getBoundingClientRect();\n        try {\n            for (var _b = __values(event.changedTouches), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var touch = _c.value;\n                var index = _this.fingers.getIndex(touch.identifier);\n                var x = touch.clientX - rect.left;\n                var y = touch.clientY - rect.top;\n                handleDown({\n                    x: x,\n                    y: y,\n                    index: index,\n                    event: event,\n                    buttons: 1,\n                    pointer: \"touch\",\n                    target: element,\n                    clear: createClear(event),\n                });\n                movingElements.push({\n                    handleUp: handleUp, handleMove: handleMove, index: index,\n                    target: element,\n                    x: x,\n                    y: y,\n                });\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    deviceHandlers.touchstart = handler;\n    element.addEventListener(\"touchstart\", handler, false);\n}\nfunction attachUpEventTouch(handleDown, handleUp, handleMove) {\n    var _this = this;\n    var _a = this, element = _a.element, deviceHandlers = _a.deviceHandlers;\n    var handler = function (event) {\n        var e_4, _a;\n        if (!_this.checkMouseType(\"touch\"))\n            return;\n        var rect = element.getBoundingClientRect();\n        try {\n            for (var _b = __values(event.changedTouches), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var touch = _c.value;\n                var index = _this.fingers.getIndex(touch.identifier);\n                var x = touch.clientX - rect.left;\n                var y = touch.clientY - rect.top;\n                handleUp({\n                    x: x,\n                    y: y,\n                    index: index,\n                    event: event,\n                    buttons: 1,\n                    pointer: \"touch\",\n                    target: element,\n                    clear: createClear(event),\n                });\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        movingElements.splice(0, movingElements.length);\n    };\n    deviceHandlers.touchend = handler;\n    element.addEventListener(\"touchend\", handler, false);\n}\nfunction attachDownEventMouse(handleDown, handleUp, handleMove) {\n    var _this = this;\n    var _a = this, element = _a.element, deviceHandlers = _a.deviceHandlers;\n    var handler = function (event) {\n        if (!_this.checkMouseType(\"mouse\"))\n            return;\n        var rect = element.getBoundingClientRect();\n        _this.pressed = true;\n        var x = event.clientX - rect.left;\n        var y = event.clientY - rect.top;\n        if (typeof handleDown === \"function\") {\n            handleDown({\n                x: x,\n                y: y,\n                index: 0,\n                buttons: translateButtons(event),\n                pointer: \"mouse\",\n                event: event,\n                target: element,\n                clear: createClear(event),\n            });\n        }\n        movingElements.push({\n            handleUp: handleUp, handleMove: handleMove,\n            index: 0,\n            target: element,\n            x: rect.left,\n            y: rect.top,\n        });\n    };\n    deviceHandlers.mousedown = handler;\n    element.addEventListener(\"mousedown\", handler, false);\n}\nfunction createClear(evt) {\n    return function () {\n        evt.preventDefault();\n        evt.stopPropagation();\n    };\n}\n/**\n * Some mouses have only one button (on Mac, for instance).\n * So we will emulate the other buttons by looking at Ctrl and Meta keys.\n */\nfunction translateButtons(event) {\n    var buttons = event.buttons, metaKey = event.metaKey, ctrlKey = event.ctrlKey;\n    if (buttons !== 1)\n        return buttons;\n    if (metaKey && !ctrlKey)\n        return 2;\n    if (!metaKey && ctrlKey)\n        return 4;\n    return buttons;\n}\nexports.default = (function (element, handleDown, handleUp, handleMove) {\n    return new BasicHandler(element, handleDown, handleUp, handleMove);\n});\n//# sourceMappingURL=basic-handler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Finger = /** @class */ (function () {\n    function Finger() {\n        this.fingers = [];\n    }\n    Finger.prototype.getIndex = function (identifier) {\n        var index = this.fingers.indexOf(identifier);\n        if (index !== -1)\n            return index;\n        var indexOfFirstNull = this.fingers.indexOf(null);\n        if (indexOfFirstNull !== -1) {\n            this.fingers[indexOfFirstNull] = identifier;\n            return indexOfFirstNull;\n        }\n        this.fingers.push(identifier);\n        return this.fingers.length - 1;\n    };\n    Finger.prototype.remove = function (identifier) {\n        var index = this.fingers.indexOf(identifier);\n        if (index !== -1)\n            this.fingers[index] = null;\n    };\n    return Finger;\n}());\nexports.default = Finger;\n//# sourceMappingURL=finger.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar flex_1 = __importDefault(require(\"./flex\"));\nvar sidemenu_1 = __importDefault(require(\"./sidemenu\"));\nvar stack_1 = __importDefault(require(\"./stack\"));\nvar tabstrip_1 = __importDefault(require(\"./tabstrip\"));\nexports.default = {\n    Flex: flex_1.default,\n    SideMenu: sidemenu_1.default,\n    Stack: stack_1.default,\n    TabStrip: tabstrip_1.default\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar array_1 = __importDefault(require(\"../converter/array\"));\nvar string_1 = __importDefault(require(\"../converter/string\"));\nvar boolean_1 = __importDefault(require(\"../converter/boolean\"));\nvar button_1 = __importDefault(require(\"../view/button\"));\nvar gesture_1 = __importDefault(require(\"../gesture\"));\nrequire(\"./sidemenu.css\");\nvar Sidemenu = /** @class */ (function (_super) {\n    __extends(Sidemenu, _super);\n    function Sidemenu(props) {\n        var _this = _super.call(this, props) || this;\n        _this.refMenu = react_1.default.createRef();\n        _this.handleShowChange = _this.handleShowChange.bind(_this);\n        return _this;\n    }\n    Sidemenu.prototype.componentDidMount = function () {\n        var _this = this;\n        var menu = this.refMenu.current;\n        if (!menu)\n            return;\n        gesture_1.default(menu).on({\n            swipeleft: function () {\n                var handler = _this.props.onShowChange;\n                if (typeof handler === 'function')\n                    handler(false);\n            }\n        });\n    };\n    Sidemenu.prototype.handleShowChange = function () {\n        var handler = this.props.onShowChange;\n        if (typeof handler !== 'function')\n            return;\n        handler(!boolean_1.default(this.props.show, window.innerWidth > 480));\n    };\n    Sidemenu.prototype.render = function () {\n        var show = boolean_1.default(this.props.show, window.innerWidth > 480);\n        var head = string_1.default(this.props.head, \"\");\n        var classes = [\"tfw-layout-sidemenu thm-bg0\"].concat(array_1.default(this.props.classes));\n        if (show)\n            classes.push(\"show\");\n        return (react_1.default.createElement(\"div\", { className: classes.join(\" \") },\n            react_1.default.createElement(\"div\", { className: \"body thm-bg0\" }, this.props.body),\n            react_1.default.createElement(\"div\", { className: \"menu thm-ele-nav thm-bg1\", ref: this.refMenu },\n                react_1.default.createElement(\"header\", { className: \"thm-ele-nav thm-bgPD\" }, head),\n                react_1.default.createElement(\"menu\", null,\n                    \" \",\n                    this.props.menu,\n                    \" \")),\n            react_1.default.createElement(\"div\", { className: \"icon thm-bgPD\" },\n                react_1.default.createElement(button_1.default, { icon: \"menu\", flat: true, onClick: this.handleShowChange }))));\n    };\n    return Sidemenu;\n}(react_1.default.Component));\nexports.default = Sidemenu;\n//# sourceMappingURL=sidemenu.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar array_1 = __importDefault(require(\"../converter/array\"));\nvar boolean_1 = __importDefault(require(\"../converter/boolean\"));\nvar string_1 = __importDefault(require(\"../converter/string\"));\nrequire(\"./stack.css\");\nvar Stack = /** @class */ (function (_super) {\n    __extends(Stack, _super);\n    function Stack() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Stack.prototype.render = function () {\n        var _this = this;\n        var children = array_1.default(this.props.children);\n        var scrollable = boolean_1.default(this.props.scrollable, false);\n        var fullscreen = boolean_1.default(this.props.fullscreen, false);\n        var classes = [\"tfw-layout-Stack\", \"custom\"];\n        var className = string_1.default(this.props.className, \"\");\n        if (className.length > 0)\n            classes.push(className);\n        if (scrollable)\n            classes.push(\"scrollable\");\n        if (fullscreen)\n            classes.push(\"fullscreen\");\n        return (react_1.default.createElement(\"div\", { className: classes.join(\" \") }, children.filter(function (elem) { return elem.key === _this.props.value; })));\n    };\n    return Stack;\n}(react_1.default.Component));\nexports.default = Stack;\n//# sourceMappingURL=stack.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar array_1 = __importDefault(require(\"../converter/array\"));\nvar integer_1 = __importDefault(require(\"../converter/integer\"));\nvar string_1 = __importDefault(require(\"../converter/string\"));\nrequire(\"./tabstrip.css\");\nvar Tabstrip = /** @class */ (function (_super) {\n    __extends(Tabstrip, _super);\n    function Tabstrip() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.lastValue = integer_1.default(_this.props.value, 0);\n        _this.state = {\n            value: integer_1.default(_this.props.value, 0)\n        };\n        _this.componentDidMount = _this.refresh;\n        _this.componentDidUpdate = _this.refresh;\n        _this.handleChange = function (value) {\n            _this.setState({ value: value });\n            var handler = _this.props.onChange;\n            if (typeof handler === 'function')\n                handler(value);\n        };\n        _this.handleKeyDown = function (evt) {\n            var headers = _this.props.headers;\n            var value = _this.state.value;\n            switch (evt.key) {\n                case \"ArrowRight\":\n                    _this.handleChange((value + 1) % headers.length);\n                    break;\n                case \"ArrowLeft\":\n                    _this.handleChange((value + headers.length - 1) % headers.length);\n                    break;\n                case \"Home\":\n                    _this.handleChange(0);\n                    break;\n                case \"End\":\n                    _this.handleChange(headers.length - 1);\n                    break;\n                default:\n                    console.info(\"evt.key=\", evt.key);\n            }\n        };\n        return _this;\n    }\n    Tabstrip.prototype.refresh = function () {\n        var value = integer_1.default(this.props.value, 0);\n        if (value === this.lastValue)\n            return;\n        this.lastValue = value;\n        this.setState({ value: value });\n    };\n    Tabstrip.prototype.render = function () {\n        var _this = this;\n        var children = array_1.default(this.props.children);\n        var value = integer_1.default(this.state.value, 0);\n        var headers = array_1.default(this.props.headers);\n        var child = children[value];\n        var handler = this.handleChange;\n        var className = \"tfw-layout-Tabstrip \" + string_1.default(this.props.className, \"\");\n        return (react_1.default.createElement(\"div\", { className: className },\n            react_1.default.createElement(\"header\", null,\n                headers.map(function (header, index) { return (react_1.default.createElement(\"button\", { key: \"tab-\" + index, tabIndex: index, onKeyDown: _this.handleKeyDown, onClick: function () { return handler(index); }, className: value === index ? \"selected thm-bg2\" : \"thm-bg0\" }, header)); }),\n                react_1.default.createElement(\"div\", { className: \"void\" })),\n            react_1.default.createElement(\"div\", { className: \"thm-bg2\" }, child)));\n    };\n    return Tabstrip;\n}(react_1.default.Component));\nexports.default = Tabstrip;\n//# sourceMappingURL=tabstrip.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar permissive_json_1 = require(\"./permissive-json\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return permissive_json_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tokenizer_1 = __importDefault(require(\"./tokenizer\"));\nexports.default = { parse: parse };\nfunction parse(text) {\n    try {\n        var tokens = tokenizer_1.default.tokenize(text);\n        var parser = new Parser(tokens);\n        var result = parser.parse();\n        return result;\n    }\n    catch (ex) {\n        if (typeof ex.type === \"number\") {\n            throw ex;\n        }\n        throw { type: 0, ex: ex };\n    }\n}\nfunction fail(tkn, index) {\n    if (typeof tkn === \"string\") {\n        throw { message: tkn, index: index };\n    }\n    return {\n        index: tkn.index,\n        message: \"Unexpected token \" + tokenizer_1.default.getTypeName(tkn.type) + \" at position \" + tkn.index + \"!\",\n    };\n}\nvar Parser = /** @class */ (function () {\n    function Parser(tokens) {\n        this.tokens = tokens;\n        this.index = 0;\n        this.index = 0;\n    }\n    Parser.prototype.back = function () {\n        this.index = Math.max(0, this.index - 1);\n    };\n    Parser.prototype.next = function () {\n        return this.tokens[this.index++];\n    };\n    Parser.prototype.parse = function () {\n        var tkn = this.next();\n        switch (tkn.type) {\n            case tokenizer_1.default.OBJ_OPEN:\n                return this.parseObject();\n            case tokenizer_1.default.ARR_OPEN:\n                return this.parseArray();\n            case tokenizer_1.default.STRING:\n            case tokenizer_1.default.NUMBER:\n            case tokenizer_1.default.SPECIAL:\n                return tkn.value;\n            default:\n                this.back();\n                throw fail(tkn);\n        }\n    };\n    Parser.prototype.parseArray = function () {\n        var start = this.index;\n        var arr = [];\n        while (true) {\n            var tkn = this.peek();\n            if (typeof tkn === \"undefined\")\n                break;\n            if (tkn.type === tokenizer_1.default.ARR_CLOSE) {\n                this.next();\n                return arr;\n            }\n            arr.push(this.parse());\n        }\n        throw fail(\"Opening braket at position \" + start + \" has no corresponding closing one!\", start);\n    };\n    Parser.prototype.parseObject = function () {\n        var start = this.index;\n        var obj = {};\n        var indexForMissingKey = 0;\n        while (true) {\n            var tkn = this.peek();\n            if (typeof tkn === \"undefined\")\n                break;\n            if (tkn.type === tokenizer_1.default.OBJ_CLOSE) {\n                this.next();\n                return obj;\n            }\n            var key = this.parse();\n            tkn = this.peek();\n            if (tkn.type === tokenizer_1.default.OBJ_CLOSE) {\n                obj[\"\" + indexForMissingKey++] = key;\n                this.next();\n                return obj;\n            }\n            if (tkn.type === tokenizer_1.default.COLON) {\n                this.next();\n                var val = this.parse();\n                obj[\"\" + key] = val;\n            }\n            else {\n                // Missing key.\n                obj[\"\" + indexForMissingKey++] = key;\n            }\n        }\n        throw fail(\"Opening brace at position \" + start + \" has no corresponding closing one!\", start);\n    };\n    Parser.prototype.peek = function () {\n        return this.tokens[this.index];\n    };\n    return Parser;\n}());\n//# sourceMappingURL=permissive-json.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @export {function} .tokenize\n * @param {string} source - Stringification of a permissive JSON object.\n * @return {array} Array of tokens. A token is an object like this: `{}`.\n */\nvar OBJ_OPEN = 1;\nvar OBJ_CLOSE = 2;\nvar ARR_OPEN = 3;\nvar ARR_CLOSE = 4;\nvar STRING = 5;\nvar NUMBER = 6;\nvar SPECIAL = 7; // True, false, null or undefined.\nvar COLON = 8;\nvar TYPE_NAMES = [\n    \"???\",\n    \"OBJ_OPEN\", \"OBJ_CLOSE\", \"ARR_OPEN\", \"ARR_CLOSE\",\n    \"STRING\", \"NUMBER\", \"SPECIAL\", \"COLON\",\n];\nexports.default = {\n    OBJ_OPEN: OBJ_OPEN,\n    OBJ_CLOSE: OBJ_CLOSE,\n    ARR_OPEN: ARR_OPEN,\n    ARR_CLOSE: ARR_CLOSE,\n    STRING: STRING,\n    NUMBER: NUMBER,\n    SPECIAL: SPECIAL,\n    COLON: COLON,\n    tokenize: function (source) {\n        var ctx = new Context();\n        return ctx.tokenize(source);\n    },\n    getTypeName: function (typeNum) { return TYPE_NAMES[typeNum]; },\n};\nvar RX_DECIMAL = /^-?(\\.[0-9]+|[0-9]+(\\.[0-9]+)?)([eE]-?[0-9]+)?$/;\nvar RX_HEXA = /^-?0x[0-9a-f]+$/i;\nvar RX_OCTAL = /^-?0o[0-7]+$/i;\nvar RX_BINARY = /^-?0b[01]+$/i;\nvar Context = /** @class */ (function () {\n    function Context() {\n        var _this = this;\n        this.end = 0;\n        this.index = 0;\n        this.source = \"\";\n        this.tokens = [];\n        this.eatBlanks = function () {\n            while (\" \\t\\n\\r\".indexOf(_this.peek() || \"?\") !== -1)\n                _this.index += 1;\n        };\n        this.eatComment = function () {\n            if (_this.peek() !== \"/\")\n                return;\n            _this.index += 1;\n            var c = _this.next();\n            if (c === \"/\") {\n                // Single line comment.\n                var endOfSingleComment = _this.source.indexOf(\"\\n\", _this.index);\n                if (endOfSingleComment === -1) {\n                    _this.index = _this.end;\n                }\n                else {\n                    _this.index = endOfSingleComment + 1;\n                }\n            }\n            else if (c === \"*\") {\n                // Multi line comment.\n                var endOfComment = _this.source.indexOf(\"*/\", _this.index);\n                if (endOfComment === -1) {\n                    _this.index = _this.end;\n                }\n                else {\n                    _this.index = endOfComment + 1;\n                }\n            }\n            else {\n                _this.fail(\"'/' looks like a comment, but it is not!\");\n            }\n        };\n        this.eatIdentifier = function () {\n            var start = _this.index;\n            var c = _this.peek() || \"?\";\n            if (\" \\t\\n\\r,:[]{}/\".indexOf(c) !== -1)\n                return;\n            _this.index += 1;\n            var str = c;\n            while (!_this.eos()) {\n                c = _this.peek() || \"?\";\n                if (\" \\t\\n\\r,:[]{}/\".indexOf(c) !== -1)\n                    break;\n                str += c;\n                _this.index += 1;\n            }\n            if (RX_DECIMAL.test(str)) {\n                _this.addToken(NUMBER, start, parseFloat(str));\n            }\n            else if (RX_HEXA.test(str)) {\n                _this.addToken(NUMBER, start, parseInt(str, 16));\n            }\n            else if (RX_OCTAL.test(str)) {\n                if (str.charAt(0) === \"-\") {\n                    str = \"-\" + str.substr(3);\n                }\n                else {\n                    str = str.substr(2);\n                }\n                _this.addToken(NUMBER, start, parseInt(str, 8));\n            }\n            else if (RX_BINARY.test(str)) {\n                if (str.charAt(0) === \"-\") {\n                    str = \"-\" + str.substr(3);\n                }\n                else {\n                    str = str.substr(2);\n                }\n                _this.addToken(NUMBER, start, parseInt(str, 2));\n            }\n            else {\n                var type = SPECIAL;\n                if (str === \"null\")\n                    str = null;\n                else if (str === \"undefined\")\n                    str = undefined;\n                else if (str === \"true\")\n                    str = true;\n                else if (str === \"false\")\n                    str = false;\n                else\n                    type = STRING;\n                _this.addToken(type, start, str);\n            }\n        };\n        this.eatString = function () {\n            var start = _this.index;\n            var quote = _this.peek();\n            if (quote !== '\"' && quote !== \"'\")\n                return;\n            _this.index += 1;\n            var escape = false;\n            var str = \"\";\n            while (!_this.eos()) {\n                var c = _this.next();\n                if (escape) {\n                    escape = false;\n                    if (c === \"n\")\n                        c = \"\\n\";\n                    else if (c === \"r\")\n                        c = \"\\r\";\n                    else if (c === \"t\")\n                        c = \"\\t\";\n                    str += c;\n                }\n                else if (c === \"\\\\\") {\n                    escape = true;\n                }\n                else if (c === quote) {\n                    _this.addToken(STRING, start, str);\n                    return;\n                }\n                else {\n                    str += c;\n                }\n            }\n            _this.index = start;\n            _this.fail(\"Missing en of string\");\n        };\n        this.eatSymbol = function () {\n            var tkn = null;\n            var c = _this.peek();\n            switch (c) {\n                case \"{\":\n                    tkn = OBJ_OPEN;\n                    break;\n                case \"}\":\n                    tkn = OBJ_CLOSE;\n                    break;\n                case \"[\":\n                    tkn = ARR_OPEN;\n                    break;\n                case \"]\":\n                    tkn = ARR_CLOSE;\n                    break;\n                case \":\":\n                    tkn = COLON;\n                    break;\n                case \",\":\n                    // The comma is not mandatory.\n                    _this.index += 1;\n                    return;\n            }\n            if (tkn) {\n                _this.addToken(tkn);\n                _this.index += 1;\n            }\n        };\n        this.eaters = [\n            this.eatBlanks,\n            this.eatSymbol,\n            this.eatComment,\n            this.eatString,\n            this.eatIdentifier,\n        ];\n    }\n    Context.prototype.addToken = function (type, index, value) {\n        if (index === void 0) { index = -1; }\n        if (value === void 0) { value = \"\"; }\n        if (index === -1)\n            index = this.index;\n        this.tokens.push({ type: type, index: index, value: value });\n    };\n    Context.prototype.back = function () { if (this.index > 0)\n        this.index -= 1; };\n    Context.prototype.eos = function () {\n        return this.index >= this.end;\n    };\n    Context.prototype.fail = function (msg) {\n        if (typeof msg === \"undefined\")\n            msg = \"Invalid char at \" + this.index + \"!\";\n        throw { index: this.index, source: this.source, message: msg };\n    };\n    Context.prototype.next = function () {\n        return this.eos() ? null : this.source[this.index++];\n    };\n    Context.prototype.peek = function () {\n        return this.eos() ? null : this.source[this.index];\n    };\n    Context.prototype.tokenize = function (source) {\n        var e_1, _a;\n        this.source = source;\n        this.end = source.length;\n        this.index = 0;\n        this.tokens = [];\n        while (this.index < this.end) {\n            var currentSourceIndex = this.index;\n            try {\n                for (var _b = (e_1 = void 0, __values(this.eaters)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var eater = _c.value;\n                    eater();\n                    if (this.index !== currentSourceIndex)\n                        break;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            if (this.index === currentSourceIndex) {\n                // No eater has been pleased with this char.\n                this.fail(\"Unexpected token at pos \" + this.index + \":\\n\" + source.substr(this.index, 80));\n            }\n        }\n        return this.tokens;\n    };\n    return Context;\n}());\n//# sourceMappingURL=tokenizer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar pointer_1 = require(\"./pointer\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return pointer_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar pointer_manager_1 = __importDefault(require(\"./pointer-manager\"));\nvar multi_tap_1 = __importDefault(require(\"./multi-tap\"));\nvar POINTER_SYMBOL = Symbol(\"pointer-symbol\");\nvar PointableElement = /** @class */ (function (_super) {\n    __extends(PointableElement, _super);\n    function PointableElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PointableElement;\n}(HTMLElement));\n/**\n * Return a PointerManager for the given element.\n * If there is already a PointerManager attached to this element,\n * return it, otherwise create a new one and attach it.\n */\nexports.default = getPointerHandler;\nfunction getPointerHandler(element, name) {\n    if (name === void 0) { name = \"div\"; }\n    var pointableElement = element;\n    if (!pointableElement[POINTER_SYMBOL]) {\n        pointableElement[POINTER_SYMBOL] = new pointer_manager_1.default(element, name);\n        // Prevent context menu when long press.\n        element.oncontextmenu = function (evt) { return evt.preventDefault(); };\n    }\n    return pointableElement[POINTER_SYMBOL];\n}\ngetPointerHandler.MultiTap = multi_tap_1.default;\n//# sourceMappingURL=pointer.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar listeners_1 = __importDefault(require(\"../listeners\"));\nvar ID = 0;\nvar PointerManager = /** @class */ (function () {\n    function PointerManager(element, name) {\n        var _this = this;\n        if (name === void 0) { name = \"div\"; }\n        // This array contains only currently down pointers.\n        this.states = [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n        this.eventDown = new listeners_1.default();\n        this.eventUp = new listeners_1.default();\n        this.eventTap = new listeners_1.default();\n        this.eventPan = new listeners_1.default();\n        this.isDown = false;\n        this.handlePointerDown = function (evt) {\n            if (evt.cancelBubble) {\n                console.info(\"DOWN\", _this.id, evt.pointerId, \"Cancelled!\");\n                return;\n            }\n            var rect = _this.element.getBoundingClientRect();\n            var time = Date.now();\n            var x = evt.pageX - rect.left;\n            var y = evt.pageY - rect.top;\n            var stateIndex = _this.storeState({\n                left: rect.left, top: rect.top,\n                pointerId: evt.pointerId,\n                x0: x, y0: y, time0: time,\n                x1: x, y1: y, time1: time,\n                x2: x, y2: y, time2: time\n            });\n            _this.eventDown.fire({\n                type: \"down\",\n                target: _this.element,\n                id: stateIndex,\n                x: evt.clientX,\n                y: evt.clientY,\n                stopPropagation: evt.stopPropagation.bind(evt)\n            });\n            _this.isDown = true;\n            globalTouchedElements.push(_this);\n        };\n        this.handlePointerUp = function (evt) {\n            var e_1, _a;\n            var nearest = null;\n            var bestDist = 10000000000;\n            try {\n                for (var _b = __values(_this.states), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var st = _c.value;\n                    if (!st)\n                        continue;\n                    var dx = st.left + st.x2 - evt.pageX;\n                    var dy = st.top + st.y2 - evt.pageY;\n                    var dist = dx * dx + dy * dy;\n                    if (dist < bestDist)\n                        nearest = st;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            var state = _this.findState(evt.pointerId);\n            if (!state)\n                return;\n            var x = evt.pageX - state.left;\n            var y = evt.pageY - state.top;\n            var duration = Date.now() - state.time0;\n            _this.states[state.index] = null;\n            if (!evt.cancelBubble) {\n                _this.eventUp.fire({\n                    type: \"up\",\n                    target: _this.element,\n                    id: state.index,\n                    x: x,\n                    y: y,\n                    duration: duration,\n                    stopPropagation: evt.stopPropagation.bind(evt)\n                });\n            }\n            _this.isDown = false;\n            if (_this.eventTap.length > 0) {\n                _this.handlePointerTap(x, y, state, duration, evt);\n            }\n        };\n        this.handlePointerMove = function (evt) {\n            if (_this.isDown) {\n                var state = _this.findState(evt.pointerId);\n                if (!state) {\n                    console.info(\"MOVE\", _this.id, evt.pointerId, \"Not found!\");\n                    return;\n                }\n                var x = evt.pageX - state.left;\n                var y = evt.pageY - state.top;\n                // We can receive move events event if the pointer has not moved.\n                // So, we need to get rid of such false event.\n                if (x === state.x2 && y === state.y2)\n                    return;\n                var x0 = state.x0, y0 = state.y0, x1 = state.x1, y1 = state.y1, x2 = state.x2, y2 = state.y2, time1 = state.time1, time2 = state.time2;\n                var time = Date.now();\n                var oldSpeed = computeSpeed(x1, y1, x2, y2, time2 - time1);\n                var newSpeed = computeSpeed(x2, y2, x, y, time - time2);\n                var acceleration = double(newSpeed - oldSpeed) / (time - time1);\n                state.x1 = state.x2;\n                state.y1 = state.y2;\n                state.time1 = state.time2;\n                state.x2 = x;\n                state.y2 = y;\n                state.time2 = time;\n                if (_this.eventPan.length > 0) {\n                    _this.eventPan.fire({\n                        type: \"pan\",\n                        target: _this.element,\n                        id: state.index,\n                        speed: newSpeed,\n                        acceleration: acceleration,\n                        x: x, y: y,\n                        previousX: x2, previousY: y2,\n                        startX: x0, startY: y0,\n                        stopPropagation: evt.stopPropagation.bind(evt)\n                    });\n                }\n            }\n        };\n        this.element = element;\n        this.id = name + \"-\" + ID++;\n        element.addEventListener(\"pointerdown\", this.handlePointerDown);\n        element.addEventListener(\"pointerup\", this.handlePointerUp);\n    }\n    PointerManager.prototype.onDown = function (slot) {\n        this.eventDown.add(slot);\n        return this;\n    };\n    PointerManager.prototype.offDown = function (slot) {\n        this.eventDown.remove(slot);\n        return this;\n    };\n    PointerManager.prototype.onUp = function (slot) {\n        this.eventUp.add(slot);\n        return this;\n    };\n    PointerManager.prototype.offUp = function (slot) {\n        this.eventUp.remove(slot);\n        return this;\n    };\n    PointerManager.prototype.onTap = function (slot) {\n        this.eventTap.add(slot);\n        return this;\n    };\n    PointerManager.prototype.offTap = function (slot) {\n        this.eventTap.remove(slot);\n        return this;\n    };\n    PointerManager.prototype.onPan = function (slot) {\n        this.eventPan.add(slot);\n        return this;\n    };\n    PointerManager.prototype.offPan = function (slot) {\n        this.eventPan.remove(slot);\n        return this;\n    };\n    PointerManager.prototype.findState = function (id) {\n        var e_2, _a;\n        try {\n            for (var _b = __values(this.states), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var state = _c.value;\n                if (!state)\n                    continue;\n                if (state.pointerId === id)\n                    return state;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return null;\n    };\n    PointerManager.prototype.findStateIndex = function (id) {\n        var states = this.states;\n        for (var index = 0; index < states.length; index++) {\n            var state = states[index];\n            if (!state)\n                continue;\n            if (state.pointerId === id)\n                return index;\n        }\n        return -1;\n    };\n    PointerManager.prototype.storeState = function (state) {\n        var index = this.findStateIndex(state.pointerId);\n        if (index !== -1) {\n            this.states[index] = __assign(__assign({}, state), { index: index });\n            return index;\n        }\n        for (var k = 0; k < this.states.length; k++) {\n            var existingState = this.states[k];\n            if (!existingState) {\n                this.states[k] = __assign(__assign({}, state), { index: k });\n                return k;\n            }\n        }\n        // Too many states at the same time!\n        console.error(\"Too many simultaneous touches! More than\", this.states.length);\n        return -1;\n    };\n    PointerManager.prototype.handlePointerTap = function (x, y, state, duration, evt) {\n        if (duration > 500)\n            return;\n        var rX = state.x0 - x;\n        var rY = state.y0 - y;\n        var radius = rX * rX + rY * rY;\n        if (radius > 10 * 10)\n            return;\n        this.eventTap.fire({\n            type: \"tap\",\n            target: this.element,\n            duration: duration, x: x, y: y,\n            id: state.index,\n            stopPropagation: evt.stopPropagation.bind(evt)\n        });\n    };\n    return PointerManager;\n}());\nexports.default = PointerManager;\nvar globalTouchedElements = [];\nwindow.document.addEventListener(\"pointermove\", function (evt) {\n    var e_3, _a;\n    try {\n        for (var globalTouchedElements_1 = __values(globalTouchedElements), globalTouchedElements_1_1 = globalTouchedElements_1.next(); !globalTouchedElements_1_1.done; globalTouchedElements_1_1 = globalTouchedElements_1.next()) {\n            var touchElem = globalTouchedElements_1_1.value;\n            touchElem.handlePointerMove(evt);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (globalTouchedElements_1_1 && !globalTouchedElements_1_1.done && (_a = globalTouchedElements_1.return)) _a.call(globalTouchedElements_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n});\nwindow.document.addEventListener(\"pointercancel\", function (evt) {\n    console.log(\"Cancel [\" + evt.pointerId + \"]\", evt);\n});\nfunction computeSpeed(x0, y0, x1, y1, duration) {\n    if (duration <= 0)\n        return 0;\n    var x = x1 - x0;\n    var y = y1 - y0;\n    var dist = Math.sqrt(x * x + y * y);\n    return dist / duration;\n}\nfunction double(x) {\n    return x + x;\n}\n//# sourceMappingURL=pointer-manager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    pick: pick, int: int, float: float,\n};\nfunction pick(elements) {\n    return elements[int(elements.length)];\n}\n/**\n * Return an integer between `min` and `max - 1` included.\n * If `max` is undefined, return an integer betwee 0 and `min - 1`\n */\nfunction int(min, max) {\n    return Math.floor(float(min, max));\n}\n/**\n * Return a float between `min` and `max - 1` included.\n * If `max` is undefined, return a float betwee 0 and `min - 1`\n */\nfunction float(min, max) {\n    if (typeof max === \"undefined\") {\n        max = min;\n        min = 0;\n    }\n    return min + Math.random() * (max - min);\n}\n//# sourceMappingURL=random.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    parse: function () {\n        var args = {};\n        var t = location.search;\n        if (t.length < \"=&\".length)\n            return args;\n        var items = t.substring(1).split(\"&\");\n        items.forEach(function (item, index) {\n            var itemWithSpacesInsteadOfPlus = item.split(\"+\").join(\" \");\n            var indexOfEqual = itemWithSpacesInsteadOfPlus.indexOf(\"=\");\n            if (indexOfEqual === -1) {\n                args[\"\" + index] = itemWithSpacesInsteadOfPlus;\n            }\n            else {\n                var key = itemWithSpacesInsteadOfPlus.substr(0, indexOfEqual);\n                var val = itemWithSpacesInsteadOfPlus.substr(indexOfEqual + 1);\n                args[key] = decodeURIComponent(val);\n            }\n        });\n        return args;\n    },\n    /**\n     * Create a valid querystring by escaping values.\n     */\n    stringify: function (args) {\n        return Object.keys(args)\n            .map(function (key) { return key + \"=\" + encodeURIComponent(args[key]); })\n            .join(\"&\");\n    }\n};\n//# sourceMappingURL=url-args.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar validator_1 = require(\"./validator\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return validator_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    createMatcher: createMatcher,\n    isFloat: isFloat, isFunction: isFunction, isInteger: isInteger, isNonEmptyString: isNonEmptyString, isNumber: isNumber, isObject: isObject, isString: isString,\n    isUnit: isUnit, isUnitSuffix: isUnitSuffix\n};\nvar ALWAYS_TRUE = function () { return true; };\nfunction isObject(v) {\n    if (!v)\n        return false;\n    if (Array.isArray(v))\n        return false;\n    return typeof v === 'object';\n}\nfunction isNumber(v) {\n    return typeof v === 'number';\n}\nfunction isString(v) {\n    return typeof v === 'string';\n}\nfunction isFunction(v) {\n    return typeof v === 'function';\n}\nfunction isFloat(v) {\n    return !isNaN(parseFloat(v));\n}\nfunction isInteger(v) {\n    return !isNaN(parseInt(v, 10));\n}\nfunction isNonEmptyString(v) {\n    if (typeof v !== 'string')\n        return false;\n    if (v.trim().length === 0)\n        return false;\n    return true;\n}\nvar RX_SEPARATOR = /[ \\t\\n\\r,.|<>:;]+/g;\n/**\n * Often used with an input filter.\n * `textToMatchAgainst` is split by spaces, commas, colons, semi-colons, dots, pipes, < and >.\n * Every resulting item must be a substring of the text (not sensitive to case)-\n *\n * `separatoRegExp` can be set if you need other separators.\n */\nfunction createMatcher(textToMatchAgainst, separatoRegExp) {\n    if (separatoRegExp === void 0) { separatoRegExp = RX_SEPARATOR; }\n    var items = textToMatchAgainst\n        .split(separatoRegExp)\n        .map(function (item) { return item.trim().toLowerCase(); })\n        .filter(function (item) { return item.length > 0; });\n    if (items.length === 0)\n        return ALWAYS_TRUE;\n    return function (value) {\n        var e_1, _a;\n        if (typeof value !== 'string')\n            return false;\n        var text = \"\" + value;\n        var lowerCaseText = text.toLowerCase();\n        try {\n            for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n                var item = items_1_1.value;\n                var pos = lowerCaseText.indexOf(item);\n                if (pos === -1)\n                    return false;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return true;\n    };\n}\nvar UNITS = [\n    \"cm\", \"mm\", \"Q\", \"in\", \"pc\", \"pt\", \"px\",\n    \"em\", \"ex\", \"ch\", \"rem\", \"lh\", \"vw\", \"vh\", \"vmin\", \"vmax\",\n    \"%\"\n];\n/**\n * Is a CSS length unit?\n * @see https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units\n */\nfunction isUnitSuffix(v) {\n    if (typeof v !== 'string')\n        return false;\n    return UNITS.indexOf(v) !== -1;\n}\nvar NUMBER = '[-+]?(\\\\.[0-9]+|[0-9]+(\\\\.[0-9]+)?)';\nvar RX_UNIT = new RegExp(\"^\" + NUMBER + \"(\" + UNITS.join(\"|\") + \")?$\", \"g\");\nfunction isUnit(v) {\n    if (typeof v === 'string') {\n        RX_UNIT.lastIndex = 0;\n        return RX_UNIT.test(v);\n    }\n    return typeof v === 'number';\n}\n//# sourceMappingURL=validator.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar button_1 = __importDefault(require(\"./button\"));\nvar checkbox_1 = __importDefault(require(\"./checkbox\"));\nvar color_picker_1 = __importDefault(require(\"./color-picker\"));\nvar combo_1 = __importDefault(require(\"./combo\"));\nvar combo_lang_1 = __importDefault(require(\"./combo-lang\"));\nvar expand_1 = __importDefault(require(\"./expand\"));\nvar icon_1 = __importDefault(require(\"./icon\"));\nvar input_1 = __importDefault(require(\"./input\"));\nvar input_color_1 = __importDefault(require(\"./input-color\"));\nvar input_date_1 = __importDefault(require(\"./input-date\"));\nvar input_file_1 = __importDefault(require(\"./input-file\"));\nvar input_float_1 = __importDefault(require(\"./input-float\"));\nvar input_image_1 = __importDefault(require(\"./input-image\"));\nvar input_integer_1 = __importDefault(require(\"./input-integer\"));\nvar label_1 = __importDefault(require(\"./label\"));\nvar list_1 = __importDefault(require(\"./list\"));\nvar ok_cancel_1 = __importDefault(require(\"./ok-cancel\"));\nvar optional_checkbox_1 = __importDefault(require(\"./optional/optional-checkbox\"));\nvar optional_input_1 = __importDefault(require(\"./optional/optional-input\"));\nvar progress_1 = __importDefault(require(\"./progress\"));\nvar slider_1 = __importDefault(require(\"./slider\"));\nvar touchable_1 = __importDefault(require(\"./touchable\"));\nexports.default = {\n    Button: button_1.default,\n    Checkbox: checkbox_1.default,\n    ColorPicker: color_picker_1.default,\n    Combo: combo_1.default,\n    ComboLang: combo_lang_1.default,\n    Expand: expand_1.default,\n    Icon: icon_1.default,\n    Input: input_1.default,\n    InputColor: input_color_1.default,\n    InputDate: input_date_1.default,\n    InputFile: input_file_1.default,\n    InputFloat: input_float_1.default,\n    InputImage: input_image_1.default,\n    InputInteger: input_integer_1.default,\n    Label: label_1.default,\n    List: list_1.default,\n    OkCancel: ok_cancel_1.default,\n    OptionalCheckbox: optional_checkbox_1.default,\n    OptionalInput: optional_input_1.default,\n    Progress: progress_1.default,\n    Slider: slider_1.default,\n    Touchable: touchable_1.default\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar touchable_1 = __importDefault(require(\"../../behavior/touchable\"));\nrequire(\"./checkbox.css\");\nvar string_1 = __importDefault(require(\"../../converter/string\"));\nvar boolean_1 = __importDefault(require(\"../../converter/boolean\"));\nvar Checkbox = /** @class */ (function (_super) {\n    __extends(Checkbox, _super);\n    function Checkbox(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = { value: _this.props.value };\n        _this._oldValue = _this.props.value;\n        _this.ref = React.createRef();\n        _this.refresh = function () {\n            var value = boolean_1.default(_this.props.value, false);\n            if (value === _this._oldValue)\n                return;\n            _this._oldValue = value;\n            _this.setState({ value: value });\n        };\n        _this.componentDidUpdate = _this.refresh;\n        _this.handleChange = function () {\n            var value = !_this.state.value;\n            _this.setState({ value: value });\n            var slot = _this.props.onChange;\n            if (typeof slot === 'function') {\n                slot(value);\n            }\n        };\n        _this.touchable = new touchable_1.default({ onTap: _this.handleChange });\n        return _this;\n    }\n    Checkbox.prototype.componentDidMount = function () {\n        var button = this.ref.current;\n        if (button)\n            this.touchable.element = button;\n        this.refresh();\n    };\n    Checkbox.prototype.render = function () {\n        var label = string_1.default(this.props.label, \"\");\n        var value = this.state.value;\n        var enabled = boolean_1.default(this.props.enabled, true);\n        var wide = boolean_1.default(this.props.wide, false);\n        var reverse = boolean_1.default(this.props.reverse, false);\n        var classes = [\"tfw-view-Checkbox\", \"custom\"];\n        if (value)\n            classes.push(\"ok\");\n        if (wide)\n            classes.push(\"wide\");\n        if (reverse)\n            classes.push(\"reverse\");\n        return (React.createElement(\"button\", { ref: this.ref, className: classes.join(\" \"), disabled: enabled ? undefined : true },\n            React.createElement(\"div\", { className: \"pin\" },\n                React.createElement(\"div\", { className: \"thm-ele-button bar \" + (value ? \"thm-bgSL\" : \"thm-bg2\") }, \" \"),\n                React.createElement(\"div\", { className: \"thm-ele-button btn \" + (value ? \"thm-bgS\" : \"thm-bg1\") }, \" \")),\n            React.createElement(\"label\", null, label)));\n    };\n    return Checkbox;\n}(React.Component));\nexports.default = Checkbox;\n//# sourceMappingURL=checkbox.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar color_1 = __importDefault(require(\"../../color\"));\nvar gesture_1 = __importDefault(require(\"../../gesture\"));\nvar button_1 = __importDefault(require(\"../button\"));\nvar input_1 = __importDefault(require(\"../input\"));\nrequire(\"./color-picker.css\");\nvar ColorPicker = /** @class */ (function (_super) {\n    __extends(ColorPicker, _super);\n    function ColorPicker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.refWheel = react_1.default.createRef();\n        _this.refBar = react_1.default.createRef();\n        _this.lastColor = \"\" + Math.random();\n        _this.state = {\n            color: _this.props.color,\n            hue: 0,\n            sat: 0,\n            lum: 0,\n            valid: color_1.default.isValid(_this.props.color)\n        };\n        _this.handleBar = function (evt) {\n            var bar = _this.refBar.current;\n            if (!bar)\n                return;\n            var rect = bar.getBoundingClientRect();\n            var luminance = 1 - evt.y / rect.height;\n            var _a = _this.state, hue = _a.hue, sat = _a.sat, lum = _a.lum;\n            var color = color_1.default.fromHSL(hue, sat, lum);\n            color.rgb2hsl();\n            color.L = luminance;\n            color.hsl2rgb();\n            _this.setState({ lum: luminance });\n            _this.props.onColorChange(color.stringify());\n        };\n        _this.handleMouseWheel = function (evt) {\n            var lum = _this.state.lum;\n            if (evt.deltaY < 0) {\n                // Wheel up!\n                _this.setState({\n                    lum: Math.min(1, lum + 1 / 32)\n                });\n            }\n            else if (evt.deltaY > 0) {\n                // Wheel down!\n                _this.setState({\n                    lum: Math.max(0, lum - 1 / 32)\n                });\n            }\n        };\n        _this.handleSelectHue = function (evt) {\n            var wheel = _this.refWheel.current;\n            if (!wheel)\n                return;\n            var rect = wheel.getBoundingClientRect();\n            var x = 2 * (evt.x / rect.width - .5);\n            var y = 2 * (evt.y / rect.height - .5);\n            var a = Math.PI + Math.atan2(x, -y);\n            var hue = a / (2 * Math.PI);\n            var sat = Math.min(1, Math.sqrt(x * x + y * y));\n            var lum = _this.state.lum;\n            var color = color_1.default.fromHSL(hue, sat, lum);\n            _this.setState({ hue: hue, sat: sat });\n            _this.props.onColorChange(color.stringify());\n        };\n        _this.handleApplyClick = function () {\n            var color = new color_1.default(_this.state.color);\n            color.rgb2hsl();\n            _this.setState({\n                hue: color.H,\n                sat: color.S,\n                lum: color.L\n            });\n            _this.props.onColorChange(_this.state.color);\n        };\n        return _this;\n    }\n    ColorPicker.prototype.checkForNewProps = function () {\n        var _a = this.state, hue = _a.hue, sat = _a.sat, lum = _a.lum;\n        if (this.lastColor !== this.props.color) {\n            this.lastColor = this.props.color;\n            var color = color_1.default.fromHSL(hue, sat, lum);\n            color.parse(this.props.color);\n            color.rgb2hsl();\n            this.setState({\n                hue: color.H,\n                sat: color.S,\n                lum: color.L\n            });\n        }\n    };\n    ColorPicker.prototype.componentDidMount = function () {\n        var wheel = this.refWheel.current;\n        var bar = this.refBar.current;\n        if (wheel) {\n            gesture_1.default(wheel).on({\n                down: this.handleSelectHue,\n                pan: this.handleSelectHue,\n                wheel: this.handleMouseWheel\n            });\n        }\n        if (bar) {\n            gesture_1.default(bar).on({\n                down: this.handleBar,\n                pan: this.handleBar\n            });\n        }\n        this.checkForNewProps();\n    };\n    ColorPicker.prototype.componentDidUpdate = function () {\n        this.checkForNewProps();\n    };\n    ColorPicker.prototype.render = function () {\n        var _this = this;\n        var _a = this.state, hue = _a.hue, sat = _a.sat, lum = _a.lum;\n        var cursorColor = color_1.default.fromHSL(hue, sat, lum);\n        var r = sat * 50;\n        var a = hue * Math.PI * 2;\n        var xx = r * Math.cos(a);\n        var yy = r * Math.sin(a);\n        var x = 50 - yy;\n        var y = 50 + xx;\n        var barMainColor = color_1.default.fromHSL(hue, 1, 0.5);\n        return (react_1.default.createElement(\"div\", { className: \"tfw-view-ColorPicker\" },\n            react_1.default.createElement(\"header\", null,\n                react_1.default.createElement(input_1.default, { value: this.props.color, onChange: function (color) { return _this.setState({ color: color }); }, validator: color_1.default.isValid, onValidation: function (valid) { return _this.setState({ valid: valid }); }, wide: true }),\n                react_1.default.createElement(button_1.default, { label: \"Apply\", enabled: this.state.valid, onClick: this.handleApplyClick })),\n            react_1.default.createElement(\"div\", { className: \"flex\" },\n                react_1.default.createElement(\"div\", { ref: this.refWheel, className: \"wheel\" },\n                    react_1.default.createElement(\"div\", { style: {\n                            background: cursorColor.stringify(),\n                            left: x + \"%\",\n                            top: y + \"%\"\n                        }, className: \"disk\" })),\n                react_1.default.createElement(\"div\", { ref: this.refBar, style: {\n                        boxShadow: \"0 0 0px 1px rgba(0,0,0,.5)\",\n                        background: \"linear-gradient(to top,#000,\" + barMainColor.stringify() + \",#fff)\",\n                        borderRadius: \"2px\"\n                    }, className: \"bar\" },\n                    react_1.default.createElement(\"div\", { style: { top: 100 * (1 - lum) + \"%\" }, className: \"cursor\" }))),\n            react_1.default.createElement(\"div\", { className: \"info\" },\n                react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(\"span\", null, \"Hue: \"),\n                    react_1.default.createElement(\"b\", null, \"\" + Math.floor(360 * hue))),\n                react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(\"span\", null, \"Sat: \"),\n                    react_1.default.createElement(\"b\", null, \"\" + Math.floor(100 * sat)),\n                    \" %\"),\n                react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(\"span\", null, \"Lum: \"),\n                    react_1.default.createElement(\"b\", null, \"\" + Math.floor(100 * lum)),\n                    \" %\"))));\n    };\n    return ColorPicker;\n}(react_1.default.Component));\nexports.default = ColorPicker;\n//# sourceMappingURL=color-picker.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nrequire(\"./combo.css\");\nvar string_1 = __importDefault(require(\"../../converter/string\"));\nvar boolean_1 = __importDefault(require(\"../../converter/boolean\"));\nvar string_array_1 = __importDefault(require(\"../../converter/string-array\"));\nvar touchable_1 = __importDefault(require(\"../../behavior/touchable\"));\nvar icon_1 = __importDefault(require(\"../icon\"));\nvar label_1 = __importDefault(require(\"../label\"));\nvar gesture_1 = __importDefault(require(\"../../gesture\"));\nvar escape_handler_1 = __importDefault(require(\"../../escape-handler\"));\nvar Combo = /** @class */ (function (_super) {\n    __extends(Combo, _super);\n    function Combo(props) {\n        var _this = _super.call(this, props) || this;\n        _this.button = React.createRef();\n        _this.keys = [];\n        _this.list = React.createRef();\n        _this.ref = React.createRef();\n        _this.selectedIndex = -1;\n        _this.selectedKey = \"\";\n        _this._handleKeyboard = function (event) {\n            switch (event.key) {\n                case \"ArrowDown\":\n                    _this.selectedIndex++;\n                    _this.selectedKey = _this.keys[_this.selectedIndex % _this.keys.length];\n                    _this._ensureSelectionVisible();\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return;\n                case \"ArrowUp\":\n                    _this.selectedIndex = (_this.selectedIndex + _this.keys.length - 1) % _this.keys.length;\n                    _this.selectedKey = _this.keys[_this.selectedIndex];\n                    _this._ensureSelectionVisible();\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return;\n                case \"Enter\":\n                case \" \":\n                    var slot = _this.props.onChange;\n                    if (typeof slot === 'function') {\n                        slot(_this.selectedKey);\n                    }\n                    escape_handler_1.default.fire();\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return;\n                default:\n                    return;\n            }\n        };\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.touchable = new touchable_1.default({ onTap: _this.handleClick });\n        return _this;\n    }\n    Combo.prototype.handleClick = function () {\n        this.expand();\n    };\n    /**\n     * If there are only two items, we don't open the list: we just swap them.\n     */\n    Combo.prototype._swapItems = function () {\n        var e_1, _a;\n        try {\n            // With two items, clicking will immediatly switch to the next one.\n            for (var _b = __values(this.keys), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var key = _c.value;\n                if (this.props.value !== key) {\n                    var slot = this.props.onChange;\n                    if (typeof slot === 'function') {\n                        slot(key);\n                    }\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    Combo.prototype._computeDimensions = function (list, button) {\n        var _a = list.getBoundingClientRect(), left = _a.left, top = _a.top, height = _a.height;\n        var width = button.getBoundingClientRect().width;\n        height = Math.min(height, window.innerHeight - 32);\n        if (top + height > window.innerHeight) {\n            top -= 32 * Math.ceil(window.innerHeight - top - height / 32);\n        }\n        if (top < 0) {\n            top += 32 * Math.ceil(-top / 32);\n        }\n        return { left: left, top: top, width: width, height: height };\n    };\n    Combo.prototype._showList = function (list, left, top, width, height) {\n        var screen = document.createElement(\"div\");\n        screen.className = \"tfw-view-combo-screen\";\n        var bigList = document.createElement(\"div\");\n        bigList.className = \"thm-ele-nav thm-bg3\";\n        bigList.innerHTML = list.innerHTML;\n        bigList.style.top = top + \"px\";\n        bigList.style.left = left + \"px\";\n        bigList.style.width = width + \"px\";\n        bigList.style.height = height + \"px\";\n        screen.appendChild(bigList);\n        document.body.appendChild(screen);\n        this.bigList = bigList;\n        return { screen: screen, bigList: bigList };\n    };\n    Combo.prototype._ensureSelectionVisible = function (customBigList) {\n        var e_2, _a;\n        if (customBigList === void 0) { customBigList = undefined; }\n        var index = 0;\n        var bigList = customBigList || this.bigList;\n        if (!bigList)\n            return;\n        var items = bigList.querySelectorAll(\"div.item\");\n        try {\n            for (var _b = __values(this.keys), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var key = _c.value;\n                var item = items[index];\n                if (key === this.selectedKey) {\n                    var rect = bigList.getBoundingClientRect();\n                    bigList.scrollTop = (32 * index) - rect.height / 2;\n                    this.selectedIndex = index;\n                    item.classList.add(\"thm-bgSL\");\n                }\n                else {\n                    item.classList.remove(\"thm-bgSL\");\n                }\n                index++;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    Combo.prototype.expand = function () {\n        var _this = this;\n        if (this.keys.length < 3) {\n            this._swapItems();\n            return;\n        }\n        var list = this.list.current;\n        var button = this.button.current;\n        if (!list || !button)\n            return;\n        var _a = this._computeDimensions(list, button), left = _a.left, top = _a.top, width = _a.width, height = _a.height;\n        var _b = this._showList(list, left, top, width, height), screen = _b.screen, bigList = _b.bigList;\n        this.selectedKey = this.props.value || \"\";\n        window.setTimeout(function () { return _this._ensureSelectionVisible(bigList); }, 10);\n        var handleKeyboard = this._handleKeyboard;\n        document.addEventListener(\"keydown\", handleKeyboard, true);\n        escape_handler_1.default.add(function () {\n            document.body.removeChild(screen);\n            document.removeEventListener(\"keydown\", handleKeyboard, true);\n        });\n        gesture_1.default(screen).on({\n            tap: function () {\n                escape_handler_1.default.fire();\n            }\n        });\n        gesture_1.default(bigList).on({\n            tap: function (evt) {\n                if (!evt || typeof evt.y === 'undefined')\n                    return;\n                var scroll = bigList.scrollTop;\n                var index = Math.floor((evt.y + scroll) / 32);\n                var value = _this.keys[index];\n                escape_handler_1.default.fire();\n                requestAnimationFrame(function () {\n                    if (typeof _this.props.onChange === 'function') {\n                        _this.props.onChange(value);\n                    }\n                });\n            }\n        });\n    };\n    Combo.prototype.componentDidMount = function () {\n        var element = this.ref.current;\n        if (!element)\n            return;\n        this.touchable.element = element;\n    };\n    Combo.prototype.render = function () {\n        var p = this.props;\n        var children = p.children;\n        var label = string_1.default(p.label, \"\").trim();\n        var wide = boolean_1.default(p.wide, false);\n        var enabled = boolean_1.default(p.enabled, true);\n        var keys = ensureGoodKeys(p.keys, children);\n        var value = string_1.default(p.value, keys[0]);\n        var classes = [\"tfw-view-combo\"];\n        var items = children.map(function (item, index) {\n            var key = item.key || \"item-\" + index;\n            return (React.createElement(\"div\", { className: \"item\", key: key },\n                \" \",\n                item,\n                \" \"));\n        });\n        if (wide)\n            classes.push(\"wide\");\n        if (!enabled)\n            classes.push(\"disabled\");\n        this.keys = keys;\n        var index = getIndex(keys, value);\n        return (React.createElement(\"button\", { ref: this.ref, className: classes.join(\" \") },\n            label.length > 0 ? React.createElement(label_1.default, { label: label }) : null,\n            React.createElement(\"div\", { ref: this.button, className: \"button thm-bg3 thm-ele-button\" },\n                React.createElement(\"div\", { className: \"list-container\", style: {\n                        transform: \"translateY(-\" + 32 * index + \"px)\"\n                    } },\n                    React.createElement(\"div\", { ref: this.list, className: \"tfw-view-combo-list\" }, items)),\n                React.createElement(\"div\", { className: \"icon\" },\n                    React.createElement(icon_1.default, { size: \"24px\", content: \"down\" })))));\n    };\n    return Combo;\n}(React.Component));\nexports.default = Combo;\nfunction getIndex(keys, value) {\n    var index = keys.indexOf(value);\n    return Math.max(0, index);\n}\n/**\n * Keys must be non empty strings. If a key is not defined, it will take its index (stringified) as value.\n * And if a \"key\" its defined on a child, it will take precedence on anything else.\n */\nfunction ensureGoodKeys(keys, children) {\n    var goodKeys = string_array_1.default(keys, []);\n    var minimalLength = children.length;\n    while (goodKeys.length < minimalLength) {\n        goodKeys.push(\"\" + goodKeys.length);\n    }\n    for (var k = 0; k < goodKeys.length; k++) {\n        if (goodKeys[k].trim().length === 0) {\n            goodKeys[k] = \"\" + k;\n        }\n    }\n    children.forEach(function (child, index) {\n        var key = child.key;\n        if (typeof key === \"string\") {\n            goodKeys[index] = key;\n        }\n        else {\n            child.key = goodKeys[index];\n        }\n    });\n    return goodKeys;\n}\n//# sourceMappingURL=combo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar combo_lang_1 = require(\"./combo-lang\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return combo_lang_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar combo_1 = __importDefault(require(\"../combo\"));\nvar icon_1 = __importDefault(require(\"../icon\"));\nvar flex_1 = __importDefault(require(\"../../layout/flex\"));\nvar string_array_1 = __importDefault(require(\"../../converter/string-array\"));\nvar intl_languages_json_1 = __importDefault(require(\"../../intl.languages.json\"));\nvar ComboLang = /** @class */ (function (_super) {\n    __extends(ComboLang, _super);\n    function ComboLang(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleChange = _this.handleChange.bind(_this);\n        return _this;\n    }\n    ComboLang.prototype.handleChange = function (lang) {\n        var handler = this.props.onChange;\n        if (typeof handler !== 'function')\n            return;\n        try {\n            handler(lang);\n        }\n        catch (ex) {\n            console.error(\"Error in handleChange(lang): \", lang);\n            console.error(ex);\n        }\n    };\n    ComboLang.prototype.render = function () {\n        var languageNames = intl_languages_json_1.default;\n        var languages = string_array_1.default(this.props.languages, Object.keys(intl_languages_json_1.default));\n        var highlight = string_array_1.default(this.props.highlight, [])\n            .filter(function (lang) { return languages.indexOf(lang) !== -1; });\n        var comboItems = highlight.map(function (lang) { return (react_1.default.createElement(flex_1.default, { key: lang, dir: \"row\", wrap: \"nowrap\", justifyContent: \"space-between\", alignItems: \"center\" },\n            react_1.default.createElement(icon_1.default, { content: \"flag-\" + lang }),\n            react_1.default.createElement(\"b\", null, languageNames[lang]))); });\n        var nonHighlightedLanguages = languages\n            .filter(function (lang) { return highlight.indexOf(lang) === -1; });\n        var otherLanguages = nonHighlightedLanguages\n            .map(function (lang) { return (react_1.default.createElement(flex_1.default, { key: lang, dir: \"row\", wrap: \"nowrap\", justifyContent: \"space-between\", alignItems: \"center\" },\n            react_1.default.createElement(\"div\", null, languageNames[lang]),\n            react_1.default.createElement(icon_1.default, { content: \"flag-\" + lang }))); });\n        comboItems.push.apply(comboItems, __spread(otherLanguages));\n        return react_1.default.createElement(combo_1.default, { wide: this.props.wide, label: this.props.label, value: this.props.value, onChange: this.handleChange }, comboItems);\n    };\n    return ComboLang;\n}(react_1.default.Component));\nexports.default = ComboLang;\n//# sourceMappingURL=combo-lang.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar expand_1 = require(\"./expand\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return expand_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar icon_1 = __importDefault(require(\"../icon\"));\nvar touchable_1 = __importDefault(require(\"../touchable\"));\nrequire(\"./expand.css\");\nvar ICON_SIZE = 24;\nvar Expand = /** @class */ (function (_super) {\n    __extends(Expand, _super);\n    function Expand() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.lastValue = _this.props.value;\n        _this.state = {\n            value: _this.props.value\n        };\n        _this.refresh = function () {\n            var value = _this.props.value;\n            if (value === _this.lastValue)\n                return;\n            _this.lastValue = value;\n            _this.setState({ value: value });\n        };\n        _this.componentDidUpdate = _this.refresh;\n        _this.componentDidMount = _this.refresh;\n        _this.handleValueChange = function () {\n            var value = !_this.state.value;\n            _this.setState({ value: value });\n            var onValueChange = _this.props.onValueChange;\n            if (typeof onValueChange === 'function') {\n                onValueChange(value);\n            }\n        };\n        return _this;\n    }\n    Expand.prototype.render = function () {\n        var classes = [\"tfw-view-Expand\", this.props.className || \"\"];\n        if (this.state.value === true) {\n            classes.push(\"expand\");\n        }\n        return (react_1.default.createElement(\"div\", { className: classes.join(' ') },\n            react_1.default.createElement(touchable_1.default, { className: \"head\", onClick: this.handleValueChange },\n                react_1.default.createElement(\"div\", { className: \"icons\" },\n                    react_1.default.createElement(icon_1.default, { content: \"plus-o\", size: ICON_SIZE }),\n                    react_1.default.createElement(icon_1.default, { content: \"minus-o\", size: ICON_SIZE })),\n                react_1.default.createElement(\"div\", null, this.props.label)),\n            react_1.default.createElement(\"div\", { className: \"body\" }, this.props.children)));\n    };\n    return Expand;\n}(react_1.default.Component));\nexports.default = Expand;\n//# sourceMappingURL=expand.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar input_color_1 = require(\"./input-color\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return input_color_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar icon_1 = __importDefault(require(\"../icon\"));\nvar label_1 = __importDefault(require(\"../label\"));\nvar button_1 = __importDefault(require(\"../button\"));\nvar color_1 = __importDefault(require(\"../../color\"));\nvar slider_1 = __importDefault(require(\"../slider\"));\nvar touchable_1 = __importDefault(require(\"../touchable\"));\nvar dialog_1 = __importDefault(require(\"../../factory/dialog\"));\nvar color_picker_1 = __importDefault(require(\"../color-picker\"));\nvar boolean_1 = __importDefault(require(\"../../converter/boolean\"));\nrequire(\"./input-color.css\");\nvar RX_COLOR = /^#[0-9a-f]{6}$/gi;\nvar InputColor = /** @class */ (function (_super) {\n    __extends(InputColor, _super);\n    function InputColor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.refInput = react_1.default.createRef();\n        _this.handleInputChange = function () {\n            var input = _this.refInput.current;\n            if (!input)\n                return;\n            var color = input.value.trim();\n            _this.handleChange(color);\n        };\n        _this.handleColorPickerChange = function (color) {\n            _this.handleChange(color);\n        };\n        _this.handleChange = function (color) {\n            var handler = _this.props.onChange;\n            if (typeof handler !== 'function')\n                return;\n            try {\n                var input = _this.refInput.current;\n                if (input) {\n                    if (!RX_COLOR.test(color)) {\n                        input.classList.add(\"invalid\");\n                    }\n                    else {\n                        input.classList.remove(\"invalid\");\n                    }\n                }\n                handler(color);\n            }\n            catch (ex) {\n                console.error(\"Error in handleChange(): \");\n                console.error(ex);\n            }\n        };\n        _this.handleToggle = function () {\n            var dialog = dialog_1.default.show({\n                content: react_1.default.createElement(color_picker_1.default, { color: _this.props.value, onColorChange: _this.props.onChange }),\n                title: _this.props.label,\n                footer: react_1.default.createElement(button_1.default, { flat: true, icon: \"close\", label: \"Close\", onClick: function () { return dialog.hide(); } })\n            });\n        };\n        _this.handleAlphaChange = function (alpha) {\n            var handler = _this.props.onChange;\n            if (typeof handler !== 'function')\n                return;\n            var color = new color_1.default(_this.props.value);\n            color.A = alpha / 100;\n            try {\n                handler(color.stringify());\n            }\n            catch (ex) {\n                console.error(\"Error in handleAlphaChange(): \");\n                console.error(ex);\n            }\n        };\n        return _this;\n    }\n    InputColor.prototype.render = function () {\n        var p = this.props;\n        var alpha = boolean_1.default(p.alpha, false);\n        var wide = boolean_1.default(p.wide, false);\n        var label = p.label;\n        var color = new color_1.default(p.value);\n        var value = color.stringify();\n        var fg = color.luminanceStep() ? \"#000\" : \"#FFF\";\n        var classes = [\"tfw-view-InputColor\"];\n        if (wide)\n            classes.push(\"wide\");\n        return (react_1.default.createElement(\"div\", { className: classes.join(' ') },\n            react_1.default.createElement(\"div\", { className: \"summary\" },\n                label ? react_1.default.createElement(label_1.default, { label: label }) : null,\n                react_1.default.createElement(touchable_1.default, { className: \"thm-ele-button thm-bg3\", onClick: this.handleToggle },\n                    react_1.default.createElement(\"div\", { className: \"thm-bgP\", style: { background: value } },\n                        react_1.default.createElement(\"div\", { style: { color: fg } }, color.stringify()),\n                        react_1.default.createElement(icon_1.default, { content: \"plus-o\", pen0: fg, size: \"1.5rem\" }))),\n                alpha &&\n                    react_1.default.createElement(slider_1.default, { label: \"Opacity\", value: Math.floor(color.A * 100), onChange: this.handleAlphaChange }))));\n    };\n    return InputColor;\n}(react_1.default.Component));\nexports.default = InputColor;\n//# sourceMappingURL=input-color.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar gesture_1 = __importDefault(require(\"../../gesture\"));\nvar integer_1 = __importDefault(require(\"../../converter/integer\"));\nvar string_1 = __importDefault(require(\"../../converter/string\"));\nvar boolean_1 = __importDefault(require(\"../../converter/boolean\"));\nvar double_1 = __importDefault(require(\"../../converter/double\"));\nrequire(\"./slider.css\");\nvar Slider = /** @class */ (function (_super) {\n    __extends(Slider, _super);\n    function Slider() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.ref = react_1.default.createRef();\n        _this.handleTapOrMove = function (evt) {\n            var div = _this.ref.current;\n            if (!div)\n                return;\n            var rect = div.getBoundingClientRect();\n            var percent = clamp(evt.x / rect.width);\n            var p = _this.props;\n            var a = integer_1.default(p.min, 0);\n            var b = integer_1.default(p.max, 100);\n            var min = Math.min(a, b);\n            var max = Math.max(a, b);\n            var step = Math.max(1e-9, double_1.default(p.step, (max - min) / 1000));\n            var value = _this.constrainValue(min + (max - min) * percent, min, max, step);\n            p.onChange(value);\n        };\n        return _this;\n    }\n    Slider.prototype.componentDidMount = function () {\n        var div = this.ref.current;\n        if (!div)\n            return;\n        gesture_1.default(div).on({\n            tap: this.handleTapOrMove,\n            pan: this.handleTapOrMove\n        });\n    };\n    Slider.prototype.render = function () {\n        var p = this.props;\n        var className = string_1.default(p.className, \"\");\n        var a = integer_1.default(p.min, 0);\n        var b = integer_1.default(p.max, 100);\n        var min = Math.min(a, b);\n        var max = Math.max(a, b);\n        var step = Math.max(1e-9, double_1.default(p.step, (max - min) / 1000));\n        var label = string_1.default(p.label, '');\n        var value = this.constrainValue(p.value, min, max, step);\n        var text = string_1.default(p.text, \"\" + value);\n        var enabled = boolean_1.default(p.enabled, true);\n        var percent = 100 * (value - min) / (max - min);\n        var classes = [\"tfw-view-Slider\", className];\n        if (!enabled)\n            classes.push(\"disabled\");\n        if (percent < 50) {\n            classes.push(\"left\");\n        }\n        else {\n            classes.push(\"right\");\n        }\n        return (react_1.default.createElement(\"div\", { className: classes.join(\" \"), ref: this.ref },\n            react_1.default.createElement(\"label\", { className: \"top\" }, label),\n            react_1.default.createElement(\"label\", { className: \"bottom\" }, label),\n            react_1.default.createElement(\"div\", { className: \"thm-ele-button thm-bgPD\" },\n                react_1.default.createElement(\"div\", { className: \"thm-ele-nav thm-bgPL thm-fg\", style: {\n                        marginLeft: \"calc(\" + percent + \"% - 16px)\"\n                    } }, text))));\n    };\n    Slider.prototype.constrainValue = function (value, min, max, step) {\n        var v = Math.max(min, Math.min(value, max));\n        if (step > 0) {\n            return min + step * Math.floor(step / 2 + (v - min) / step);\n        }\n        return v;\n    };\n    return Slider;\n}(react_1.default.Component));\nexports.default = Slider;\nfunction clamp(value, min, max) {\n    if (min === void 0) { min = 0; }\n    if (max === void 0) { max = 1; }\n    if (value < min)\n        return min;\n    if (value > max)\n        return max;\n    return value;\n}\n//# sourceMappingURL=slider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar input_date_1 = require(\"./input-date\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return input_date_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nrequire(\"./input-date.css\");\nvar integer_1 = __importDefault(require(\"../../converter/integer\"));\nvar boolean_1 = __importDefault(require(\"../../converter/boolean\"));\nvar string_1 = __importDefault(require(\"../../converter/string\"));\nvar intl_1 = __importDefault(require(\"../../intl\"));\nvar _ = intl_1.default.make(require(\"./input-date.json\"));\nvar DAY_LENGTH = 2;\nvar YEAR_LENGTH = 4;\nvar MONTHES_PER_YEAR = 12;\nvar Input = /** @class */ (function (_super) {\n    __extends(Input, _super);\n    function Input() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = getYearMonthDay(_this.props.value);\n        _this.oldTime = _this.props.value;\n        _this.refresh = function () {\n            var value = _this.props.value;\n            if (_this.oldTime === value)\n                return;\n            _this.oldTime = value;\n            _this.setState(getYearMonthDay(value), _this.resetOldTime);\n        };\n        _this.resetOldTime = function () {\n            var _a = _this.state, year = _a.year, month = _a.month, day = _a.day;\n            if (!isValidDate(year, month, day)) {\n                _this.oldTime = Number.MIN_VALUE;\n                return;\n            }\n            var date = new Date(integer_1.default(year), month, integer_1.default(day));\n            _this.oldTime = date.getTime();\n        };\n        _this.componentDidMount = _this.refresh;\n        _this.componentDidUpdate = _this.refresh;\n        _this.handleDayChange = function (event) {\n            _this.setState({ day: event.target.value }, _this.fireChange);\n        };\n        _this.handleMonthChange = function (event) {\n            var month = integer_1.default(event.target.value);\n            _this.setState({ month: month }, _this.fireChange);\n        };\n        _this.handleYearChange = function (event) {\n            _this.setState({ year: event.target.value }, _this.fireChange);\n        };\n        _this.fireChange = function () {\n            var onChange = _this.props.onChange;\n            var _a = _this.state, year = _a.year, month = _a.month, day = _a.day;\n            if (typeof onChange === 'function' && isValidDate(year, month, day)) {\n                var date = new Date(integer_1.default(year), month, integer_1.default(day));\n                onChange(date.getTime());\n            }\n        };\n        return _this;\n    }\n    Input.prototype.render = function () {\n        var p = this.props;\n        var label = string_1.default(p.label, \"\");\n        var _a = this.state, day = _a.day, month = _a.month, year = _a.year;\n        var focus = boolean_1.default(p.focus, false);\n        var wide = boolean_1.default(p.wide, false);\n        var enabled = boolean_1.default(p.enabled, true);\n        var id = nextId();\n        var classes = [\"tfw-view-input-date\"];\n        if (wide)\n            classes.push(\"wide\");\n        if (!enabled)\n            classes.push(\"disabled\");\n        var header = (!isValidDate ?\n            React.createElement(\"div\", { className: \"thm-fgSD error\" }, this.props.error || \"Invalid date!\") :\n            (label ? (React.createElement(\"label\", { htmlFor: id }, label)) : null));\n        return (React.createElement(\"div\", { className: classes.join(\" \") },\n            header,\n            React.createElement(\"div\", { className: \"inputs\" },\n                React.createElement(\"input\", { className: \"day thm-ele-button\", autoFocus: focus, type: \"number\", disabled: !enabled, maxLength: DAY_LENGTH, min: \"1\", max: \"31\", id: id, size: DAY_LENGTH, onChange: this.handleDayChange, value: \"\" + day }),\n                React.createElement(\"select\", { className: \"month thm-ele-button\", disabled: !enabled, onChange: this.handleMonthChange, value: \"\" + month }, range(MONTHES_PER_YEAR).map(function (monthId) { return (React.createElement(\"option\", { key: monthId, value: monthId }, _(\"month-\" + monthId))); })),\n                React.createElement(\"input\", { className: \"year thm-ele-button\", type: \"number\", disabled: !enabled, maxLength: YEAR_LENGTH, size: YEAR_LENGTH, onChange: this.handleYearChange, value: \"\" + year }))));\n    };\n    return Input;\n}(React.Component));\nexports.default = Input;\nvar globalId = 0;\nfunction nextId() {\n    return \"tfw-view-input-\" + globalId++;\n}\nfunction range(min, max) {\n    var isMaxDefined = typeof max !== 'undefined';\n    var start = isMaxDefined ? min : 0;\n    var stop = (isMaxDefined ? max : min);\n    var arr = [];\n    for (var i = start; i < stop; i++) {\n        arr.push(i);\n    }\n    return arr;\n}\nfunction getYearMonthDay(time) {\n    var isValidTime = typeof time === 'number' && !isNaN(time);\n    var date = isValidTime ? new Date(time) : new Date();\n    return {\n        year: \"\" + date.getFullYear(),\n        month: date.getMonth(),\n        day: \"\" + date.getDate()\n    };\n}\nfunction isValidDate(year, month, day) {\n    var yy = integer_1.default(year, Number.MIN_SAFE_INTEGER);\n    if (yy === Number.MIN_SAFE_INTEGER)\n        return false;\n    var dd = integer_1.default(day, Number.MIN_SAFE_INTEGER);\n    if (dd === Number.MIN_SAFE_INTEGER)\n        return false;\n    var date = new Date(yy, month, dd);\n    if (date.getFullYear() !== yy || date.getMonth() !== month || date.getDate() !== dd) {\n        return false;\n    }\n    return true;\n}\n//# sourceMappingURL=input-date.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar button_1 = __importDefault(require(\"../button\"));\nrequire(\"./input-file.css\");\nvar InputFile = /** @class */ (function (_super) {\n    __extends(InputFile, _super);\n    function InputFile(props) {\n        var _this = _super.call(this, props) || this;\n        _this.refInput = react_1.default.createRef();\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.handleFileChange = _this.handleFileChange.bind(_this);\n        return _this;\n    }\n    InputFile.readFileAsText = function (file) {\n        return new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onload = function (data) {\n                if (!data || !data.target) {\n                    resolve(\"\");\n                    return;\n                }\n                var content = data.target.result;\n                if (typeof content === 'string') {\n                    resolve(content);\n                }\n                else {\n                    resolve(\"\");\n                }\n            };\n            reader.onerror = function (err) {\n                reject(err);\n            };\n            reader.readAsText(file);\n        });\n    };\n    InputFile.prototype.handleFileChange = function (evt) {\n        if (!evt.target)\n            return;\n        var handler = this.props.onClick;\n        if (typeof handler !== 'function')\n            return;\n        try {\n            var input = evt.target;\n            var files = input.files;\n            if (!files)\n                return;\n            handler(files);\n        }\n        catch (ex) {\n            console.error(\"Error in handleFileChange(): \");\n            console.error(ex);\n        }\n    };\n    InputFile.prototype.handleClick = function () {\n        var input = this.refInput.current;\n        if (!input)\n            return;\n        input.click();\n    };\n    InputFile.prototype.render = function () {\n        var p = this.props;\n        var classes = [\"tfw-view-InputFile\"];\n        if (p.wide === true)\n            classes.push(\"wide\");\n        return (react_1.default.createElement(\"div\", { className: classes.join(\" \") },\n            react_1.default.createElement(button_1.default, { label: p.label, icon: p.icon, wide: p.wide, wait: p.wait, flat: p.flat, small: p.small, warning: p.warning, enabled: p.enabled, className: p.className, onClick: this.handleClick }),\n            react_1.default.createElement(\"input\", { ref: this.refInput, type: \"file\", style: { display: \"none\" }, accept: p.accept, multiple: p.multiple === true, onChange: this.handleFileChange })));\n    };\n    return InputFile;\n}(react_1.default.Component));\nexports.default = InputFile;\n//# sourceMappingURL=input-file.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar input_float_1 = require(\"./input-float\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return input_float_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar input_1 = __importDefault(require(\"../input\"));\nvar double_1 = __importDefault(require(\"../../converter/double\"));\nrequire(\"./input-float.css\");\nvar InputFloat = /** @class */ (function (_super) {\n    __extends(InputFloat, _super);\n    function InputFloat() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { value: '', valid: false };\n        _this.isValid = function (text) {\n            var value = Number(text);\n            if (isNaN(value))\n                return false;\n            var min = double_1.default(_this.props, Number.MIN_VALUE);\n            var max = double_1.default(_this.props, Number.MAX_VALUE);\n            if (value < min)\n                return false;\n            if (value > max)\n                return false;\n            return true;\n        };\n        _this.handleChange = function (text) {\n            _this.setState({ value: text });\n            if (!_this.isValid(text))\n                return;\n            var value = Number(text);\n            var onChange = _this.props.onChange;\n            if (typeof onChange === 'function') {\n                onChange(value);\n            }\n        };\n        _this.handleEnterPressed = function (text) {\n            _this.setState({ value: text });\n            if (!_this.isValid(text))\n                return;\n            var value = Number(text);\n            var onEnterPressed = _this.props.onEnterPressed;\n            if (typeof onEnterPressed === 'function') {\n                onEnterPressed(value);\n            }\n        };\n        _this.handleValidation = function (valid) {\n            _this.setState({ valid: valid });\n            var onValidation = _this.props.onValidation;\n            if (typeof onValidation === 'function') {\n                return onValidation(valid);\n            }\n            return;\n        };\n        return _this;\n    }\n    InputFloat.prototype.componentDidMount = function () {\n        var value = this.props.value;\n        this.setState({ value: \"\" + value });\n    };\n    InputFloat.prototype.render = function () {\n        var _a = this.props, className = _a.className, name = _a.name, label = _a.label, wide = _a.wide, size = _a.size, focus = _a.focus, width = _a.width, enabled = _a.enabled, placeholder = _a.placeholder;\n        var value = this.state.value;\n        return react_1.default.createElement(input_1.default, { className: className, value: value, name: name, label: label, wide: wide, size: size, focus: focus, width: width, enabled: enabled, placeholder: placeholder, validator: this.isValid, onValidation: this.handleValidation, onChange: this.handleChange, onEnterPressed: this.handleEnterPressed });\n    };\n    return InputFloat;\n}(react_1.default.Component));\nexports.default = InputFloat;\n//# sourceMappingURL=input-float.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar input_file_1 = __importDefault(require(\"../input-file\"));\nvar flex_1 = __importDefault(require(\"../../layout/flex\"));\nvar combo_1 = __importDefault(require(\"../combo\"));\nvar label_1 = __importDefault(require(\"../label\"));\nvar intl_1 = __importDefault(require(\"../../intl\"));\nvar string_1 = __importDefault(require(\"../../converter/string\"));\nvar integer_1 = __importDefault(require(\"../../converter/integer\"));\nvar double_1 = __importDefault(require(\"../../converter/double\"));\nrequire(\"./input-image.css\");\nvar _ = intl_1.default.make(require(\"./input-image.yaml\"));\nvar InputImage = /** @class */ (function (_super) {\n    __extends(InputImage, _super);\n    function InputImage(props) {\n        var _this = _super.call(this, props) || this;\n        _this.refCanvas = react_1.default.createRef();\n        _this.lastUrl = \"\";\n        _this.handleSizeChange = function (size) {\n            switch (size) {\n                case \"cover\":\n                case \"contain\":\n                case \"fill\":\n                    _this.setState({ size: size });\n            }\n        };\n        _this.state = { size: \"cover\" };\n        _this.handleUpload = _this.handleUpload.bind(_this);\n        return _this;\n    }\n    InputImage.prototype.handleUpload = function (files) {\n        var canvas = this.refCanvas.current;\n        if (!canvas)\n            return;\n        canvas.classList.remove(\"show\");\n        var that = this;\n        var file = files[0];\n        var reader = new FileReader();\n        reader.addEventListener(\"load\", function () {\n            var url = reader.result;\n            if (!url)\n                return;\n            if (typeof url !== 'string') {\n                throw Error(\"'url' should be a string, but not a \" + typeof url);\n            }\n            that.refresh(url).then(function () { return that.handleChange(canvas); });\n        });\n        reader.readAsDataURL(file);\n    };\n    InputImage.prototype.handleChange = function (canvas) {\n        var handle = this.props.onChange;\n        if (typeof handle !== 'function')\n            return;\n        handle(canvas.toDataURL(\"image/png\", 1));\n    };\n    InputImage.prototype.refresh = function (url) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (url === _this.lastUrl) {\n                resolve();\n                return;\n            }\n            var canvas = _this.refCanvas.current;\n            if (!canvas) {\n                reject();\n                return;\n            }\n            var that = _this;\n            var img = new Image();\n            img.crossOrigin = \"Anonymous\";\n            img.onload = function () {\n                var ctx = canvas.getContext(\"2d\");\n                if (!ctx)\n                    return;\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\n                var _a = computeSize(that.state.size, img, canvas), x = _a.x, y = _a.y, w = _a.w, h = _a.h;\n                ctx.drawImage(img, x, y, w, h);\n                canvas.classList.add(\"show\");\n                that.lastUrl = url;\n                resolve();\n            };\n            img.onerror = function () {\n                canvas.classList.remove(\"show\");\n                reject();\n            };\n            img.src = url;\n        });\n    };\n    InputImage.prototype.componentDidMount = function () {\n        this.refresh(string_1.default(this.props.value, \"\"));\n    };\n    InputImage.prototype.componentDidUpdate = function () {\n        this.refresh(string_1.default(this.props.value, \"\"));\n    };\n    InputImage.prototype.render = function () {\n        var p = this.props;\n        var label = string_1.default(p.label, \"\").trim();\n        var width = integer_1.default(p.width);\n        var height = integer_1.default(p.height);\n        var scale = double_1.default(p.scale);\n        var viewW = width * scale;\n        var viewH = height * scale;\n        return (react_1.default.createElement(\"div\", { style: {\n                width: viewW + \"px\"\n            } },\n            react_1.default.createElement(label_1.default, { label: label }),\n            react_1.default.createElement(\"div\", { className: \"image tfw-view-InputImage thm-ele-button thm-bg2\", style: {\n                    width: viewW + \"px\",\n                    height: viewH + \"px\"\n                }, title: this.props.value },\n                react_1.default.createElement(\"canvas\", { ref: this.refCanvas, style: {\n                        width: viewW + \"px\",\n                        height: viewH + \"px\"\n                    }, width: width, height: height })),\n            react_1.default.createElement(flex_1.default, { justifyContent: \"space-between\", alignItems: \"center\" },\n                react_1.default.createElement(input_file_1.default, { onClick: this.handleUpload, accept: \"image/*\", label: _(\"upload\"), small: true, icon: \"import\", wide: true, flat: true }),\n                react_1.default.createElement(combo_1.default, { value: this.state.size, onChange: this.handleSizeChange }, [\"fill\", \"cover\", \"contain\"].map(function (label) { return (react_1.default.createElement(\"div\", { key: label, className: \"tfw-view-InputImage-item\" },\n                    react_1.default.createElement(\"div\", { className: \"icon \" + label }))); })))));\n    };\n    return InputImage;\n}(react_1.default.Component));\nexports.default = InputImage;\nfunction computeSize(size, img, canvas) {\n    if (size === \"fill\")\n        return { x: 0, y: 0, w: canvas.width, h: canvas.height };\n    if (size === \"contain\")\n        return computeSizeContain(img, canvas);\n    return computeSizeCover(img, canvas);\n}\nfunction computeSizeContain(img, canvas) {\n    var scaleW = canvas.width / img.width;\n    var scaleH = canvas.height / img.height;\n    var scale = Math.min(scaleW, scaleH);\n    var w = img.width * scale;\n    var h = img.height * scale;\n    var x = (canvas.width - w) / 2;\n    var y = (canvas.height - h) / 2;\n    return { x: x, y: y, w: w, h: h };\n}\nfunction computeSizeCover(img, canvas) {\n    var scaleW = canvas.width / img.width;\n    var scaleH = canvas.height / img.height;\n    var scale = Math.max(scaleW, scaleH);\n    var w = img.width * scale;\n    var h = img.height * scale;\n    var x = (canvas.width - w) / 2;\n    var y = (canvas.height - h) / 2;\n    return { x: x, y: y, w: w, h: h };\n}\n//# sourceMappingURL=index.js.map","module.exports = __webpack_public_path__ + \"static/media/input-image.ed7190ea.yaml\";","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar input_integer_1 = require(\"./input-integer\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return input_integer_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar input_1 = __importDefault(require(\"../input\"));\nrequire(\"./input-integer.css\");\nvar InputInteger = /** @class */ (function (_super) {\n    __extends(InputInteger, _super);\n    function InputInteger() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { value: '', valid: false };\n        _this.isValid = function (text) {\n            var value = Number(text);\n            if (isNaN(value))\n                return false;\n            if (value !== Math.floor(value))\n                return false;\n            var _a = _this.props, min = _a.min, max = _a.max;\n            if (typeof min === 'number' && value < min)\n                return false;\n            if (typeof max === 'number' && value > max)\n                return false;\n            return true;\n        };\n        _this.handleChange = function (text) {\n            _this.setState({ value: text });\n            if (!_this.isValid(text))\n                return;\n            var value = Number(text);\n            var onChange = _this.props.onChange;\n            if (typeof onChange === 'function') {\n                onChange(value);\n            }\n        };\n        _this.handleEnterPressed = function (text) {\n            _this.setState({ value: text });\n            if (!_this.isValid(text))\n                return;\n            var value = Number(text);\n            var onEnterPressed = _this.props.onEnterPressed;\n            if (typeof onEnterPressed === 'function') {\n                onEnterPressed(value);\n            }\n        };\n        _this.handleValidation = function (valid) {\n            _this.setState({ valid: valid });\n            var onValidation = _this.props.onValidation;\n            if (typeof onValidation === 'function') {\n                return onValidation(valid);\n            }\n            return;\n        };\n        return _this;\n    }\n    InputInteger.prototype.componentDidMount = function () {\n        var value = this.props.value;\n        this.setState({ value: \"\" + value });\n    };\n    InputInteger.prototype.componentDidUpdate = function () {\n        var value = this.props.value;\n        var text = \"\" + value;\n        if (text === this.state.value)\n            return;\n        this.setState({ value: text });\n    };\n    InputInteger.prototype.render = function () {\n        var _a = this.props, className = _a.className, name = _a.name, label = _a.label, wide = _a.wide, size = _a.size, focus = _a.focus, width = _a.width, min = _a.min, max = _a.max, enabled = _a.enabled, placeholder = _a.placeholder;\n        var value = this.state.value;\n        return react_1.default.createElement(input_1.default, { className: className, type: \"number\", min: min, max: max, value: value, name: name, label: label, wide: wide, size: size, focus: focus, width: width, enabled: enabled, placeholder: placeholder, validator: this.isValid, onValidation: this.handleValidation, onChange: this.handleChange, onEnterPressed: this.handleEnterPressed });\n    };\n    return InputInteger;\n}(react_1.default.Component));\nexports.default = InputInteger;\n//# sourceMappingURL=input-integer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar list_1 = require(\"./list\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return list_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nrequire(\"./list.css\");\nvar debouncer_1 = __importDefault(require(\"../../async/debouncer\"));\nvar unit_1 = __importDefault(require(\"../../converter/unit\"));\nvar boolean_1 = __importDefault(require(\"../../converter/boolean\"));\nvar integer_1 = __importDefault(require(\"../../converter/integer\"));\nvar string_1 = __importDefault(require(\"../../converter/string\"));\nvar gesture_1 = __importDefault(require(\"../../gesture\"));\nvar List = /** @class */ (function (_super) {\n    __extends(List, _super);\n    function List(props) {\n        var _this = _super.call(this, props) || this;\n        _this.itemHeight = 36;\n        _this.refMain = React.createRef();\n        _this.refHead = React.createRef();\n        _this.refBody = React.createRef();\n        _this.refTail = React.createRef();\n        _this.onScroll = debouncer_1.default(_this.onScroll.bind(_this), 30);\n        _this.onPanDown = _this.onPanDown.bind(_this);\n        _this.lastFirstItemIndex = -1;\n        _this.lastVisibleItemsCount = -1;\n        _this.lastItemsArray = [];\n        _this.state = { items: [] };\n        return _this;\n    }\n    List.prototype.onPanDown = function () {\n        var main = this.refMain.current;\n        if (!main)\n            return;\n        if (main.scrollTop > 0)\n            return;\n        var onRefresh = this.props.onRefreshAsked;\n        if (typeof onRefresh !== 'function')\n            return;\n        onRefresh();\n    };\n    List.prototype.onScroll = function () {\n        var main = this.refMain.current;\n        var head = this.refHead.current;\n        var body = this.refBody.current;\n        var tail = this.refTail.current;\n        if (!main || !head || !body || !tail)\n            return;\n        if (this.props.animateRefresh)\n            main.scrollTop = 0;\n        var rect = main.getBoundingClientRect();\n        var top = Math.floor(main.scrollTop);\n        var height = Math.floor(rect.height);\n        var itemsCount = this.props.items.length;\n        var firstItemIndex = Math.min(itemsCount, Math.floor(top / this.itemHeight));\n        var visibleItemsCount = Math.min(itemsCount - firstItemIndex, 1 + Math.ceil(height / this.itemHeight));\n        var tailCount = this.props.items.length - firstItemIndex - visibleItemsCount;\n        head.style.height = this.itemHeight * firstItemIndex + \"px\";\n        body.style.height = this.itemHeight * visibleItemsCount + \"px\";\n        tail.style.height = this.itemHeight * tailCount + \"px\";\n        main.scrollTop = top;\n        if (this.lastFirstItemIndex !== firstItemIndex\n            || this.lastVisibleItemsCount !== visibleItemsCount) {\n            this.lastFirstItemIndex = firstItemIndex;\n            this.lastVisibleItemsCount = visibleItemsCount;\n            this.setState({\n                items: this.props.items.slice(firstItemIndex, firstItemIndex + visibleItemsCount)\n            });\n        }\n        // Resize background image for head and tail.\n        var backgroundSize = main.clientWidth + \"px \" + this.itemHeight + \"px\";\n        head.style.backgroundSize = backgroundSize;\n        tail.style.backgroundSize = backgroundSize;\n    };\n    List.prototype.componentDidMount = function () {\n        var _this = this;\n        window.addEventListener(\"resize\", this.onScroll, false);\n        var main = this.refMain.current;\n        if (!main)\n            return;\n        gesture_1.default(main).on({\n            pandown: function (evt) {\n                if (main.scrollTop > 0)\n                    return;\n                evt.clear();\n                main.classList.add(\"animate-refresh\");\n            },\n            swipedown: function (evt) {\n                if (main.scrollTop > 0)\n                    return;\n                evt.clear();\n                _this.onPanDown();\n            },\n            up: function () { return main.classList.remove(\"animate-refresh\"); }\n        });\n    };\n    List.prototype.componentWillUnmount = function () {\n        window.removeEventListener(\"resize\", this.onScroll, false);\n    };\n    List.prototype.render = function () {\n        var _this = this;\n        this.itemHeight = integer_1.default(this.props.itemHeight, 36);\n        if (this.lastItemsArray !== this.props.items) {\n            this.lastVisibleItemsCount = -1;\n            this.lastItemsArray = this.props.items;\n        }\n        this.onScroll();\n        if (typeof this.props.mapper !== 'function') {\n            console.error(\"props =\", this.props);\n            throw Error(\"<List mapper=\\\"...\\\" ...> Attribute mapper must be a function which returns a ReactElement!\");\n        }\n        var children = null;\n        try {\n            children = this.state.items\n                .map(this.props.mapper)\n                .map(function (content, index) { return (React.createElement(\"div\", { className: \"item\", key: content.key || \"item-\" + index, style: {\n                    height: _this.itemHeight + \"px\",\n                    minHeight: _this.itemHeight + \"px\",\n                    maxHeight: _this.itemHeight + \"px\"\n                } }, content)); });\n        }\n        catch (ex) {\n            throw Error(\"<List mapper=\\\"...\\\" ...> Attribute mapper returns an exception:\\n\" + ex);\n        }\n        var width = unit_1.default(this.props.width, \"auto\");\n        var height = unit_1.default(this.props.height, \"auto\");\n        var animateRefresh = boolean_1.default(this.props.animateRefresh, false);\n        var classes = [\"tfw-view-list\"];\n        if (animateRefresh)\n            classes.push(\"animate-refresh\", \"refreshing\");\n        var className = classes.join(' ') + \" \" + string_1.default(this.props.className, '');\n        var placeholder = string_1.default(this.props.placeholder, \"\");\n        var listStyle = placeholder === \"\" ? {} : {\n            backgroundImage: \"url(\" + placeholder + \")\"\n        };\n        return (React.createElement(\"div\", { className: className, style: { width: width, height: height }, onScroll: this.onScroll, ref: this.refMain },\n            React.createElement(\"div\", { style: listStyle, className: \"space\", ref: this.refHead }),\n            React.createElement(\"div\", { className: \"body\", ref: this.refBody }, children),\n            React.createElement(\"div\", { style: listStyle, className: \"space\", ref: this.refTail })));\n    };\n    return List;\n}(React.Component));\nexports.default = List;\n//# sourceMappingURL=list.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar optional_checkbox_1 = require(\"./optional-checkbox\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return optional_checkbox_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar checkbox_1 = __importDefault(require(\"../../checkbox\"));\nvar icon_1 = __importDefault(require(\"../../icon\"));\nvar boolean_1 = __importDefault(require(\"../../../converter/boolean\"));\nrequire(\"./optional-checkbox.css\");\nvar OptionalCheckbox = /** @class */ (function (_super) {\n    __extends(OptionalCheckbox, _super);\n    function OptionalCheckbox() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleToggleSelect = function () {\n            var _a = _this.props, value = _a.value, defaultValue = _a.defaultValue, enabled = _a.enabled, onChange = _a.onChange;\n            if (!boolean_1.default(enabled, true))\n                return;\n            if (typeof value === 'boolean') {\n                onChange();\n            }\n            else {\n                onChange(defaultValue);\n            }\n        };\n        return _this;\n    }\n    OptionalCheckbox.prototype.render = function () {\n        var _a = this.props, value = _a.value, defaultValue = _a.defaultValue, label = _a.label, enabled = _a.enabled, wide = _a.wide, reverse = _a.reverse, onChange = _a.onChange;\n        var classes = [\"tfw-view-OptionalCheckbox\", \"custom\"];\n        if (reverse)\n            classes.push(\"reverse\");\n        if (wide)\n            classes.push(\"wide\");\n        var isDef = typeof value === 'boolean';\n        return (React.createElement(\"div\", { className: classes.join(\" \") },\n            React.createElement(checkbox_1.default, { value: isDef ? value : defaultValue, label: label, enabled: isDef ? boolean_1.default(enabled, true) : false, wide: wide, reverse: reverse, onChange: onChange }),\n            React.createElement(icon_1.default, { content: isDef ? 'select' : 'unselect', onClick: this.handleToggleSelect })));\n    };\n    return OptionalCheckbox;\n}(React.Component));\nexports.default = OptionalCheckbox;\n//# sourceMappingURL=optional-checkbox.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar optional_input_1 = require(\"./optional-input\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return optional_input_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar input_1 = __importDefault(require(\"../../input\"));\nvar icon_1 = __importDefault(require(\"../../icon\"));\nvar boolean_1 = __importDefault(require(\"../../../converter/boolean\"));\nrequire(\"./optional-input.css\");\nvar OptionalCheckbox = /** @class */ (function (_super) {\n    __extends(OptionalCheckbox, _super);\n    function OptionalCheckbox() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleToggleSelect = function () {\n            var _a = _this.props, value = _a.value, defaultValue = _a.defaultValue, enabled = _a.enabled, onChange = _a.onChange;\n            if (!boolean_1.default(enabled, true)) {\n                return;\n            }\n            var isDef = typeof value === 'string';\n            if (isDef) {\n                onChange(undefined);\n            }\n            else {\n                onChange(defaultValue);\n            }\n        };\n        return _this;\n    }\n    OptionalCheckbox.prototype.render = function () {\n        var _a = this.props, reverse = _a.reverse, className = _a.className, defaultValue = _a.defaultValue, value = _a.value, name = _a.name, label = _a.label, suggestions = _a.suggestions, storage = _a.storage, error = _a.error, wide = _a.wide, size = _a.size, focus = _a.focus, width = _a.width, enabled = _a.enabled, placeholder = _a.placeholder, type = _a.type, validator = _a.validator, onValidation = _a.onValidation, onChange = _a.onChange, onEnterPressed = _a.onEnterPressed;\n        var classes = [\"tfw-view-OptionalInput\", \"custom\"];\n        if (typeof className === 'string')\n            classes.push(className);\n        if (wide)\n            classes.push(\"wide\");\n        if (boolean_1.default(reverse, false))\n            classes.push(\"reverse\");\n        var isDef = (typeof value === 'string');\n        return (React.createElement(\"div\", { className: classes.join(\" \") },\n            React.createElement(input_1.default, { value: isDef ? value : defaultValue, name: name, label: label, suggestions: suggestions, storage: storage, error: error, wide: wide, size: size, focus: focus, width: width, enabled: isDef ? boolean_1.default(enabled, true) : false, placeholder: placeholder, type: type, validator: validator, onValidation: onValidation, onChange: onChange, onEnterPressed: onEnterPressed }),\n            React.createElement(icon_1.default, { content: isDef ? 'select' : 'unselect', onClick: this.handleToggleSelect })));\n    };\n    return OptionalCheckbox;\n}(React.Component));\nexports.default = OptionalCheckbox;\n//# sourceMappingURL=optional-input.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar progress_1 = require(\"./progress\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return progress_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar string_array_1 = __importDefault(require(\"../../converter/string-array\"));\nvar boolean_1 = __importDefault(require(\"../../converter/boolean\"));\nvar double_1 = __importDefault(require(\"../../converter/double\"));\nvar unit_1 = __importDefault(require(\"../../converter/unit\"));\nvar label_1 = __importDefault(require(\"../label\"));\nrequire(\"./progress.css\");\nvar HUNDRED = 100;\nvar Progress = /** @class */ (function (_super) {\n    __extends(Progress, _super);\n    function Progress() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {};\n        return _this;\n    }\n    Progress.prototype.render = function () {\n        var _a = this.props, label = _a.label, wide = _a.wide, height = _a.height, visible = _a.visible;\n        if (!boolean_1.default(visible, true))\n            return null;\n        var classes = __spread([\n            'custom', 'tfw-view-Progress'\n        ], string_array_1.default(this.props.className, []));\n        if (boolean_1.default(wide, true)) {\n            classes.push('wide');\n        }\n        var value = clamp(double_1.default(this.props.value));\n        var percent = value * HUNDRED;\n        return (react_1.default.createElement(\"div\", { className: classes.join(' ') },\n            react_1.default.createElement(label_1.default, { label: label }),\n            react_1.default.createElement(\"div\", { className: \"bar thm-bg0\", style: {\n                    height: unit_1.default(height, \"1em\")\n                } },\n                react_1.default.createElement(\"div\", { style: {\n                        transform: \"translateX(\" + (percent - HUNDRED) + \"%)\"\n                    } }, percent))));\n    };\n    return Progress;\n}(react_1.default.Component));\nexports.default = Progress;\nfunction clamp(value) {\n    if (value < 0)\n        return 0;\n    if (value > 1)\n        return 1;\n    return value;\n}\n//# sourceMappingURL=progress.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar watcher_1 = require(\"./watcher\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return watcher_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar resize_1 = __importDefault(require(\"./resize\"));\nexports.default = {\n    Resize: resize_1.default\n};\n//# sourceMappingURL=watcher.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar resize_1 = require(\"./resize\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return resize_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar debouncer_1 = __importDefault(require(\"../../async/debouncer\"));\nvar listeners_1 = __importDefault(require(\"../../listeners\"));\nvar resize_observer_1 = __importDefault(require(\"./resize-observer\"));\nvar ResizeWatcher = /** @class */ (function () {\n    function ResizeWatcher(element, debouncerDelay) {\n        var _this = this;\n        if (debouncerDelay === void 0) { debouncerDelay = 300; }\n        this.element = element;\n        this.listeners = new listeners_1.default();\n        this.fire = function (width, height) {\n            if (width === void 0) { width = -1; }\n            if (height === void 0) { height = -1; }\n            if (width > 0 && height > 0)\n                _this.listeners.fire({ width: width, height: height });\n            else {\n                var rect = _this.element.getBoundingClientRect();\n                _this.listeners.fire({\n                    width: rect.width,\n                    height: rect.height,\n                });\n            }\n        };\n        this.onEntries = function (entries) {\n            var filteredEntries = entries.filter(function (item) { return item.target === _this.element; });\n            if (filteredEntries.length > 0) {\n                var entry = filteredEntries[0];\n                var size = entry.contentBoxSize;\n                _this.fire(size.inlineSize, size.blockSize);\n            }\n        };\n        this.observer = new resize_observer_1.default(this.onEntries);\n        this.fire = debouncer_1.default(this.fire, debouncerDelay);\n    }\n    ResizeWatcher.prototype.subscribe = function (listener) {\n        if (this.listeners.length === 0) {\n            this.attach();\n        }\n        this.listeners.add(listener);\n    };\n    ResizeWatcher.prototype.unsubscribe = function (listener) {\n        this.listeners.remove(listener);\n        if (this.listeners.length === 0) {\n            this.detach();\n        }\n    };\n    ResizeWatcher.prototype.attach = function () {\n        this.observer.observe(this.element);\n    };\n    ResizeWatcher.prototype.detach = function () {\n        this.observer.unobserve(this.element);\n    };\n    return ResizeWatcher;\n}());\nexports.default = ResizeWatcher;\n//# sourceMappingURL=resize.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ResizeObserver = /** @class */ (function () {\n    function ResizeObserver(slot) {\n        var _this = this;\n        this.slot = slot;\n        this.intervalId = 0;\n        this.targets = [];\n        this.checkSize = function () {\n            var e_1, _a;\n            var entries = [];\n            try {\n                for (var _b = __values(_this.targets), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var item = _c.value;\n                    var rect = item.target.getBoundingClientRect();\n                    if (areDifferent(rect, item.rect)) {\n                        var size = {\n                            inlineSize: rect.width,\n                            blockSize: rect.height,\n                        };\n                        entries.push({\n                            target: item.target,\n                            borderBoxSize: size,\n                            contentBoxSize: size,\n                            contentRect: rect,\n                        });\n                        item.rect = rect;\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            if (entries.length > 0) {\n                _this.slot(entries);\n            }\n        };\n    }\n    ResizeObserver.prototype.observe = function (target) {\n        var targets = this.targets;\n        if (targets.map(getTarget).indexOf(target) !== -1)\n            return;\n        if (targets.length === 0) {\n            this.intervalId = window.setInterval(this.checkSize, 200);\n        }\n        targets.push({\n            target: target,\n            rect: target.getBoundingClientRect(),\n        });\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        var targets = this.targets;\n        var indexOf = targets.map(getTarget).indexOf(target);\n        if (indexOf === -1)\n            return;\n        targets.splice(indexOf, 1);\n        if (targets.length === 0) {\n            window.clearInterval(this.intervalId);\n        }\n    };\n    return ResizeObserver;\n}());\nexports.default = ResizeObserver;\nfunction getTarget(obj) {\n    return obj.target;\n}\nfunction areDifferent(r1, r2) {\n    if (r1.width !== r2.width)\n        return true;\n    if (r1.height !== r2.height)\n        return true;\n    return false;\n}\n//# sourceMappingURL=resize-observer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar web_service_1 = require(\"./web-service\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return web_service_1.default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebService = void 0;\nvar user_1 = __importDefault(require(\"./user\"));\nvar encryption_1 = __importDefault(require(\"./encryption\"));\nvar EnumWebServiceError = {\n    OK: 0,\n    BAD_ROLE: 1,\n    BAD_TYPE: 2,\n    CONNECTION_FAILURE: 3,\n    MISSING_AUTOLOGIN: 4,\n    UNKNOWN_USER: 5,\n    HTTP_ERROR: 6\n};\nvar EnumLoginError = {\n    WRONG_CHALLENGE: -1,\n    MISSING_WAITING_STATE: -2,\n    MISSING_RESPONSE_STATE: -3,\n    WRONG_LENGTH: -4,\n    WRONG_PASSWORD: -5,\n    ACCOUNT_DISABLED: -6\n};\nexports.default = {\n    EnumLoginError: EnumLoginError,\n    EnumWebServiceError: EnumWebServiceError,\n    /**\n     * Execute a remote service.\n     * @param name - Service's name.\n     * @param args - Service's arguments.\n     * @return Resolves in any data returned by the service.\n     */\n    exec: exec,\n    /**\n     * Authenticate a user.\n     */\n    login: login,\n    /**\n     * If you don't logout, you will be automatically reconnected on next visit.\n     */\n    logout: logout,\n    /**\n     * @return `true` if we are working on localhost.\n     */\n    isLocalhost: isLocalhost,\n    /**\n     * @param root - URL of another webserver.\n     * @return an instance of a WebService bound to another webserver.\n     */\n    create: create,\n    setRoot: setRoot,\n    getLastSuccessfulLogin: getLastSuccessfulLogin,\n    setLastSuccessulLogin: setLastSuccessulLogin\n};\nvar WebService = /** @class */ (function () {\n    function WebService(root) {\n        if (root === void 0) { root = \"\"; }\n        this.root = root;\n        if (this.root.charAt(this.root.length - 1) !== \"/\") {\n            this.root += \"/\";\n        }\n    }\n    Object.defineProperty(WebService.prototype, \"lastSuccessfulLogin\", {\n        get: function () {\n            return encryption_1.default.get();\n        },\n        set: function (lastLogin) {\n            if (lastLogin.username === '') {\n                encryption_1.default.clear();\n            }\n            else {\n                encryption_1.default.set(lastLogin);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    WebService.prototype.exec = function (name, args) {\n        if (args === void 0) { args = null; }\n        return __awaiter(this, void 0, void 0, function () {\n            var response, data, obj;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.callService(name, args)];\n                    case 1:\n                        response = _a.sent();\n                        if (response.code === EnumWebServiceError.OK) {\n                            data = response.data;\n                            if (data && data.charAt(0) === '!') {\n                                // When the answer is not a JSON, but a string starting with \"!\",\n                                // that means that the service requires authentification.\n                                // What follow the \"!\" is the name of the needed role.\n                                // For instance: !ADMIN\n                                throw EnumWebServiceError.BAD_ROLE;\n                            }\n                            obj = JSON.parse(data);\n                            return [2 /*return*/, obj];\n                        }\n                        throw response;\n                }\n            });\n        });\n    };\n    WebService.prototype.getAbsoluteUrl = function (url) {\n        if (typeof url !== \"string\")\n            return url;\n        if (url.startsWith(\"https://\") || url.startsWith(\"http://\"))\n            return url;\n        return \"\" + this.root + url;\n    };\n    WebService.prototype.login = function (username, password) {\n        return __awaiter(this, void 0, void 0, function () {\n            var challenge, h, response;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.exec(\"tfw.login.Challenge\", username)];\n                    case 1:\n                        challenge = _a.sent();\n                        h = hash(challenge, password);\n                        return [4 /*yield*/, this.exec(\"tfw.login.Response\", h)];\n                    case 2:\n                        response = _a.sent();\n                        if (typeof response === \"number\") {\n                            throw response;\n                        }\n                        this.lastSuccessfulLogin = { username: username, password: password };\n                        return [2 /*return*/, new user_1.default(response.login, response.login, response.name, response.roles)];\n                }\n            });\n        });\n    };\n    WebService.prototype.logout = function () {\n        this.lastSuccessfulLogin = { username: '', password: '' };\n    };\n    WebService.prototype.setRoot = function (root) {\n        this.root = root;\n    };\n    WebService.prototype.callService = function (name, args) {\n        return __awaiter(this, void 0, void 0, function () {\n            var data, url, init, response, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        data = new FormData();\n                        data.append(\"s\", name);\n                        data.append(\"i\", JSON.stringify(args));\n                        url = this.root + \"tfw/svc.php\";\n                        init = { method: \"POST\", body: data, credentials: \"include\" };\n                        return [4 /*yield*/, fetch(url, init)];\n                    case 1:\n                        response = _b.sent();\n                        if (!response.ok) return [3 /*break*/, 3];\n                        _a = {\n                            code: EnumWebServiceError.OK\n                        };\n                        return [4 /*yield*/, response.text()];\n                    case 2: return [2 /*return*/, (_a.data = _b.sent(),\n                            _a)];\n                    case 3: return [2 /*return*/, {\n                            code: EnumWebServiceError.HTTP_ERROR,\n                            data: response.statusText,\n                        }];\n                }\n            });\n        });\n    };\n    return WebService;\n}());\nexports.WebService = WebService;\nfunction hash(code, pwd) {\n    var output = Array(16).fill(0);\n    var pass = [];\n    for (var i = 0; i < pwd.length; i++) {\n        pass.push(pwd.charCodeAt(i));\n    }\n    if (256 % pass.length === 0) {\n        pass.push(0);\n    }\n    var j = 0;\n    for (var i = 0; i < 256; i++) {\n        output[i % 16] ^= i + pass[i % pass.length];\n        var k1 = code[j++ % code.length] % 16;\n        var k2 = code[j++ % code.length] % 16;\n        var k3 = code[j++ % code.length] % 16;\n        output[k3] ^= (output[k3] + 16 * k2 + k3) % 256;\n        output[k2] ^= (output[k1] + output[k3]) % 256;\n    }\n    return output;\n}\n// ==================\n// Default instance\n// ------------------\nvar gInstance = new WebService();\nfunction getLastSuccessfulLogin() {\n    return gInstance.lastSuccessfulLogin;\n}\n/**\n * Store the login into localStorage with a little encryption.\n */\nfunction setLastSuccessulLogin(lastSuccessfulLogin) {\n    gInstance.lastSuccessfulLogin = lastSuccessfulLogin;\n}\nfunction setRoot(root) {\n    gInstance.setRoot(root);\n}\nfunction exec(name, args) {\n    if (args === void 0) { args = null; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, gInstance.exec(name, args)];\n        });\n    });\n}\nfunction login(username, password) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, gInstance.login(username, password)];\n        });\n    });\n}\nfunction logout() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, gInstance.logout()];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction isLocalhost() {\n    return location.hostname === \"localhost\";\n}\nfunction create(root) {\n    return new WebService(root);\n}\n//# sourceMappingURL=web-service.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar User = /** @class */ (function () {\n    function User(_id, _email, _nickname, _roles) {\n        this._id = _id;\n        this._email = _email;\n        this._nickname = _nickname;\n        this._roles = _roles;\n    }\n    Object.defineProperty(User.prototype, \"id\", {\n        get: function () { return this._id; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(User.prototype, \"email\", {\n        get: function () { return this._email; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(User.prototype, \"nickname\", {\n        get: function () { return this._nickname; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(User.prototype, \"roles\", {\n        get: function () { return this._roles.slice(); },\n        enumerable: false,\n        configurable: true\n    });\n    User.prototype.hasRole = function (role) {\n        return this._roles.indexOf(role) !== -1;\n    };\n    return User;\n}());\nexports.default = User;\n//# sourceMappingURL=user.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CREDENTIALS_KEY = 'tfw/web-service/login';\n// Encryption of the username/password starts with the length of the username.\n// To makes it appear like a letter, we add ENCRYPTION_SHIFT_FOR_USERNAME_LENGTH.\nvar ENCRYPTION_SHIFT_FOR_USERNAME_LENGTH = 64;\n// N and P must be primes and N > P.\nvar ENCRYPTION_N = 47;\nvar ENCRYPTION_P = 37;\nexports.default = { clear: clear, get: get, set: set };\nfunction get() {\n    try {\n        var code = window.localStorage.getItem(CREDENTIALS_KEY);\n        if (typeof code !== 'string') {\n            throw \"Code should be a string but we got \" + typeof code + \"!\";\n        }\n        var arr = JSON.parse(atob(code));\n        if (!Array.isArray(arr))\n            throw \"Bad storage!\";\n        var username = '';\n        var password = '';\n        var usernameLength = arr.shift() - ENCRYPTION_SHIFT_FOR_USERNAME_LENGTH;\n        var index = 27;\n        for (var i = 0; i < usernameLength; i++) {\n            var shift = (index++ * ENCRYPTION_P) % ENCRYPTION_N;\n            username += String.fromCharCode(arr.shift() - shift);\n        }\n        while (arr.length > 0) {\n            var shift = (index++ * ENCRYPTION_P) % ENCRYPTION_N;\n            password += String.fromCharCode(arr.shift() - shift);\n        }\n        return { username: username, password: password };\n    }\n    catch (ex) {\n        console.error(ex);\n        return {\n            username: \"\", password: \"\"\n        };\n    }\n}\nfunction set(login) {\n    var e_1, _a, e_2, _b;\n    var arr = [ENCRYPTION_SHIFT_FOR_USERNAME_LENGTH + login.username.length];\n    var index = 27;\n    try {\n        for (var _c = __values(login.username), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var c = _d.value;\n            var shift = (index++ * ENCRYPTION_P) % ENCRYPTION_N;\n            arr.push(c.charCodeAt(0) + shift);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    try {\n        for (var _e = __values(login.password), _f = _e.next(); !_f.done; _f = _e.next()) {\n            var c = _f.value;\n            var shift = (index++ * ENCRYPTION_P) % ENCRYPTION_N;\n            arr.push(c.charCodeAt(0) + shift);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    var code = btoa(JSON.stringify(arr));\n    window.localStorage.setItem(CREDENTIALS_KEY, code);\n}\nfunction clear() {\n    var MIN_CHAR = 32;\n    var MAX_CHAR = 127;\n    var MIN_SIZE = 10;\n    var MAX_SIZE = 32;\n    var size = Math.floor(Math.random() * (MAX_SIZE - MIN_SIZE));\n    var password = '';\n    for (var i = 0; i < size; i++) {\n        password += String.fromCharCode(MIN_CHAR + Math.floor((MAX_CHAR - MIN_CHAR) * Math.random()));\n    }\n    set({ username: \"\", password: password });\n}\n//# sourceMappingURL=encryption.js.map","module.exports = require(\"path\");","module.exports = require(\"fs\");","export default {\n    createUndefinedDate,\n    date2seconds,\n    formatDate,\n    isDefinedDate,\n    seconds2date\n}\n\nconst UNDEFINED_DATE_TIME = -30610224561000\n\nfunction isDefinedDate(date: any): date is Date {\n    if (date instanceof Date) {\n        return date.getTime() > UNDEFINED_DATE_TIME\n    }\n    return false\n}\n\n\nfunction createUndefinedDate(): Date {\n    return new Date(UNDEFINED_DATE_TIME)\n}\n\n\nfunction seconds2date(seconds: number): Date {\n    return new Date(seconds * 1000)\n}\n\n\nfunction date2seconds(date: Date): number {\n    const CONVERSION = 0.001\n    return Math.floor(date.getTime() * CONVERSION)\n}\n\nconst dateFormatter = new Intl.DateTimeFormat([\"fr-CM\"], {\n    weekday: \"long\",\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\"\n})\n\nfunction formatDate(date: Date): string {\n    return dateFormatter.format(date)\n}\n","import { createStore } from 'redux'\nimport DateUtil from '../date-util'\n\nimport {\n    IAppState, IPatientSummary, IStructure\n} from '../types'\n\nconst INITIAL_STATE: IAppState = {\n    consultationId: \"\",\n    page: \"patients\",\n    patient: {\n        id: \"\",\n        lastname: \"\",\n        firstname: \"\",\n        secondname: \"\",\n        gender: \"X\",\n        size: 0,\n        country: \"\",\n        birth: DateUtil.createUndefinedDate()\n    },\n    patients: []\n}\n\ntype IAction = IActionSetPage | IActionSetPatients | IActionSetPatient | IActionSetConsultationId\n\ninterface IActionSetPage {\n    type: \"set-page\",\n    page: string\n}\n\ninterface IActionSetPatients {\n    type: \"set-patients\",\n    patients: IPatientSummary[]\n}\n\ninterface IActionSetPatient {\n    type: \"set-patient\",\n    patient: IPatientSummary\n}\n\ninterface IActionSetConsultationId {\n    type: \"set-consultation-id\",\n    consultationId: string\n}\n\nconst store = createStore<IAppState, IAction, unknown, unknown>(reducer)\n\nfunction reducer(\n    state: IAppState | undefined = INITIAL_STATE,\n    action: IAction\n): IAppState {\n    switch (action.type) {\n        case 'set-consultation-id':\n            return { ...state, consultationId: action.consultationId }\n        case 'set-page':\n            return { ...state, page: action.page }\n        case 'set-patient':\n            return { ...state, patient: action.patient }\n        case 'set-patients':\n            return { ...state, patients: action.patients }\n        default:\n            return state\n    }\n}\n\nexport default {\n    store,\n    clearPatient() {\n        const patient: IPatientSummary = {\n            id: \"\", firstname: \"\", secondname: \"\", lastname: \"\",\n            birth: new Date(),\n            country: \"\", gender: \"\", size: 0\n        }\n        dispatch({ type: \"set-patient\", patient })\n    },\n    setConsultationId(uuid: string) {\n        dispatch({ type: \"set-consultation-id\", consultationId: uuid })\n    },\n    setPage(page: string) {\n        dispatch({ type: \"set-page\", page })\n    },\n    setPatient(patient: IPatientSummary) {\n        dispatch({ type: \"set-patient\", patient })\n    },\n    setPatients(patients: IPatientSummary[]) {\n        dispatch({ type: \"set-patients\", patients })\n    }\n}\n\nfunction dispatch(param: IAction) {\n    console.trace(\"DISPATCH\", param)\n    store.dispatch(param)\n}\n","import \"./splash.css\"\n\nexport default {\n    hide() {\n        const splash = document.getElementById(\"splash-screen\")\n        if (!splash) return\n        splash.classList.add(\"vanish\")\n        const VANISHING_DELAY = 1000\n        window.setTimeout(\n            () => document.body.removeChild(splash),\n            VANISHING_DELAY\n        )\n    }\n}\n","import Tfw from 'tfw'\n\nconst _ = Tfw.Intl.make(require(\"./translate.json\"))\n\nexport default {\n    get addPatient() { return _('add-patient') },\n    get back() { return _('back') },\n    get birthday() { return _('birthday') },\n    get cancel() { return _('cancel') },\n    get close() { return _('close') },\n    get code() { return _('code') },\n    get confirmDeletePatient() { return _('confirm-patient-delete') },\n    get consultationDate() { return _('consultation-date') },\n    get consultations() { return _('consultations') },\n    get consultationsCount() { return _('consultations-count') },\n    get country() { return _('country') },\n    get dateMin() { return _('date-min') },\n    get dateMax() { return _('date-max') },\n    get deletePatient() { return _('delete-patient') },\n    get editPatient() { return _('edit-patient') },\n    get executeQuery() { return _('execute-query') },\n    get extractions() { return _('extractions') },\n    get filter() { return _('filter') },\n    get firstName() { return _('firstname') },\n    get gender() { return _('gender') },\n    genderValue(type: string) {\n        switch (type.trim().toUpperCase()) {\n            case 'M': return _('gender-male')\n            case 'F': return _('gender-female')\n            default: return _('gender-undefined')\n        }\n    },\n    get identifier() { return _('identifier') },\n    get importPatients() { return _('import-patients') },\n    get lastName() { return _('lastname') },\n    get loading() { return _('loading') },\n    get logout() { return _('logout') },\n    get newConsultation() { return _('new-consultation') },\n    get ok() { return _('ok') },\n    get patients() { return _('patients') },\n    get patientsCount() { return _('patients-count') },\n    get prescriptions() { return _('prescriptions') },\n    get secondName() { return _('secondname') },\n    get size() { return _('size') },\n    get struct() { return _('struct') },\n    get vaccinDate() { return _('vaccin-date') },\n    get vaccinLot() { return _('vaccin-lot') },\n    get vaccins() { return _('vaccins') }\n}\n","const path = require('path')\nconst fs = require('fs')\nconst _0777 = parseInt('0777', 8)\n\nexport default function mkdirP(p: string, opts: any, f?: any, made?: any) {\n    if (typeof opts === 'function') {\n        f = opts;\n        opts = {};\n    }\n    else if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n\n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n\n    if (mode === undefined) {\n        mode = _0777 & (~process.umask());\n    }\n    if (!made) made = null;\n\n    var cb = f || function() { };\n    p = path.resolve(p);\n\n    xfs.mkdir(p, mode, function(er: any) {\n        if (!er) {\n            made = made || p;\n            return cb(null, made);\n        }\n        switch (er.code) {\n            case 'ENOENT':\n                mkdirP(path.dirname(p), opts, function(er: any, made: any) {\n                    if (er) cb(er, made);\n                    else mkdirP(p, opts, cb, made);\n                });\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                xfs.stat(p, function(er2: any, stat: any) {\n                    // if the stat fails, then that's super weird.\n                    // let the original error be the failure reason.\n                    if (er2 || !stat.isDirectory()) cb(er, made)\n                    else cb(null, made);\n                });\n                break;\n        }\n    });\n}\n\nmkdirP.sync = function sync(p: any, opts: any, made: any) {\n    if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n\n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n\n    if (mode === undefined) {\n        mode = _0777 & (~process.umask());\n    }\n    if (!made) made = null;\n\n    p = path.resolve(p);\n\n    try {\n        xfs.mkdirSync(p, mode);\n        made = made || p;\n    }\n    catch (err0) {\n        switch (err0.code) {\n            case 'ENOENT':\n                made = sync(path.dirname(p), opts, made);\n                sync(p, opts, made);\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                var stat;\n                try {\n                    stat = xfs.statSync(p);\n                }\n                catch (err1) {\n                    throw err0;\n                }\n                if (!stat.isDirectory()) throw err0;\n                break;\n        }\n    }\n\n    return made;\n};\n","import mkdirp from './mkdirp'\n\nconst FS = window.require('fs')\nconst Path = window.require('path')\n\nexport default { deleteFolder, exists, readText, writeText }\n\nconst ROOT = Path.resolve(process.cwd(), \"data\")\n\ninterface IDirectoryEntry {\n    name: string\n    isFile(): boolean\n    isDirectory(): boolean\n}\n\nfunction exists(filename: string): boolean {\n    const fullPath = Path.resolve(ROOT, filename)\n    return FS.existsSync(fullPath)\n}\n\n/**\n * Read text file in \"data/\" folder.\n */\nfunction readText(filename: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const fullPath = Path.resolve(ROOT, filename)\n        FS.readFile(fullPath, 'utf-8', (err: any, data: any) => {\n            if (err) {\n                reject(err)\n            } else {\n                resolve(data)\n            }\n        })\n    })\n}\n\n\n/**\n * Write text file in \"data/\" folder.\n */\nfunction writeText(filename: string, content: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const fullPath = Path.resolve(ROOT, filename)\n        const dirname = Path.dirname(fullPath)\n        mkdirp(dirname, (err: any) => {\n            if (err) reject(err)\n            else FS.writeFile(fullPath, content, 'utf-8', (err: any, data: any) => {\n                if (err) reject(err)\n                else resolve(data)\n            })\n        })\n    })\n}\n\n\nfunction deleteFolder(foldername: string): Promise<void> {\n    return new Promise(async (resolve, reject) => {\n        const fullPath = Path.resolve(ROOT, foldername)\n        await removeDirectory(fullPath)\n    })\n}\n\n\nfunction removeDirectory(path: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n        FS.readdir(\n            path, {\n                withFileTypes: true\n            },\n            async (err: any, entries: IDirectoryEntry[]) => {\n                if (err) {\n                    return reject(err)\n                }\n                for (const entry of entries) {\n                    const filename = Path.resolve(path, entry.name)\n                    if (entry.isFile()) {\n                        try {\n                            await removeFile(filename)\n                        }\n                        catch (ex) {\n                            reject(ex)\n                            return\n                        }\n                    }\n                    else {\n                        removeDirectory(filename)\n                    }\n                }\n                FS.rmdir(path, (err: any) => {\n                    if (err) reject(err)\n                })\n                resolve()\n            }\n        )\n    })\n}\n\n\nfunction removeFile(path: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n        FS.unlink(path, (err: any) => {\n            if (err) reject(err)\n            else resolve()\n        })\n    })\n}\n","import Tfw from 'tfw'\nimport FileSystem from '../service/file-system'\nimport { IStructure } from '../types'\n\nconst SAVE_DEBOUNCING_DELAY = 300\n\ninterface ISettings {\n    remoteServer: string\n    secretCode: string\n    organizationId: number\n    structureId: number\n    structure?: IStructure\n}\n\nconst DATA: ISettings = {\n    remoteServer: \"https://web-soins.com\",\n    secretCode: \"kAcGObgfMr\",\n    organizationId: 1,\n    structureId: 1\n}\n\nclass Settings {\n    private readonly data: ISettings\n    constructor() {\n        this.data = DATA\n    }\n\n    async initialize(): Promise<boolean> {\n        try {\n            const content = await FileSystem.readText(\"settings.json\")\n            const data = JSON.parse(content)\n\n            if (typeof data.remoteServer !== 'string')\n                throw Error(\"Attribute remoteServer must be a string!\")\n            if (typeof data.secretCode !== 'string')\n                throw Error(\"Attribute secretCode must be a string!\")\n            if (typeof data.organizationId !== 'number')\n                throw Error(\"Attribute organizationId must be a number!\")\n            if (typeof data.structureId !== 'number')\n                throw Error(\"Attribute structureId must be a number!\")\n\n            DATA.remoteServer = data.remoteServer\n            DATA.secretCode = data.secretCode\n            DATA.organizationId = data.organizationId\n            DATA.structureId = data.structureId\n            DATA.structure = data.structure\n\n            return true\n        } catch (ex) {\n            console.error(\"Unable to load settings.json!\")\n            console.error(ex)\n            return false\n        }\n    }\n\n    get remoteServer(): string {\n        return process.env.REACT_APP_WEBSOINS === 'DEV'\n            ? \"http://localhost:7474/web-soins/\"\n            : this.data.remoteServer\n    }\n    set remoteServer(v: string) {\n        this.data.remoteServer = v\n        this.save()\n    }\n    get secretCode(): string { return this.data.secretCode }\n    set secretCode(v: string) {\n        this.data.secretCode = v\n        this.save()\n    }\n    get organizationId(): number { return this.data.organizationId }\n    set organizationId(v: number) {\n        this.data.organizationId = v\n        this.save()\n    }\n    get structureId(): number { return this.data.structureId }\n    set structureId(v: number) {\n        this.data.structureId = v\n        this.save()\n    }\n    get structure(): IStructure | undefined { return this.data.structure }\n    set structure(v: IStructure | undefined) {\n        this.data.structure = v\n        this.save()\n    }\n\n    save = Tfw.Async.Debouncer(() => {\n        FileSystem.writeText(\"settings.json\", JSON.stringify(this.data))\n    }, SAVE_DEBOUNCING_DELAY)\n}\n\nexport default new Settings()\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport Settings from '../../settings'\nimport DateUtil from '../../date-util'\nimport { IPatientSummary } from \"../../types\"\n\n\nimport \"./patient-short-desc.css\"\n\ninterface IPatientShortDescProps {\n    className?: string | string[]\n    patient?: IPatientSummary\n}\ninterface IPatientShortDescState { }\n\nexport default class PatientShortDesc extends React.Component<IPatientShortDescProps, IPatientShortDescState> {\n    state = {}\n\n    render() {\n        const classes = [\n            'view-PatientShortDesc',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n        const { patient } = this.props\n        if (!patient) return null\n        const structure = Settings.structure\n        if (!structure) return null\n        const today = new Date()\n        const age = 1 + today.getFullYear() - patient.birth.getFullYear()\n\n        return (\n            <div\n                className={classes.join(' ')}\n                title={patient.id}\n            >\n                <span className=\"lastname\">{patient.lastname.toUpperCase()}</span>\n                <span className=\"firstname\">{patient.firstname}</span>\n                {\n                    hasSecondName(patient) &&\n                    <span className=\"secondname\">{patient.secondname}</span>\n                }\n                {\n                    DateUtil.isDefinedDate(patient.birth) &&\n                    <span className=\"age\">{age} <em>ans</em></span>\n                }\n                {\n                    patient.size > 0 &&\n                    <span className=\"size\">{patient.size} <em>cm</em></span>\n                }\n            </div>\n        )\n    }\n}\n\n\nfunction hasSecondName(patient: IPatientSummary): boolean {\n    const { secondname } = patient\n    if (typeof secondname !== 'string') return false\n    if (secondname.trim().length === 0) return false\n    if (secondname.trim().toLowerCase() === 'undefined') return false\n    return true\n}\n","import { v4 as UuidV4 } from \"uuid\"\n\nexport default {\n    create() {\n        return UuidV4()\n    }\n}\n","import Tfw from 'tfw'\nimport Guid from '../guid'\nimport DateUtil from '../date-util'\nimport { IPatient, IPatientSummary, IConsultation, IRecord } from '../types'\n\nexport default {\n    createPatientFromSummary,\n    getAllConsultationsBefore,\n    getConsultationFromUuid,\n    getSummary,\n    getSummaryFromRecord,\n    removeConsultation,\n    setSummary,\n    updateConsultation\n}\n\nfunction getConsultationFromUuid(patient: IPatient, consultationId: string): IConsultation | null {\n    for (const admission of patient.admissions) {\n        for (const consultation of admission.visits) {\n            if (consultation.uuid === consultationId) {\n                return consultation\n            }\n        }\n    }\n    console.warn(`No consultation found for Patient ${patient.id} with Id ${consultationId}!`)\n    return null\n}\n\n\nfunction getSummary(patient: IPatient): IPatientSummary {\n    patient.data.id = patient.id\n    return getSummaryFromRecord(patient.data)\n}\n\n/**\n * Update patient with a new summary.\n */\nfunction setSummary(patient: IPatient, patientSummary: IPatientSummary) {\n    patient.data[\"#PATIENT-BIRTH\"] = DateUtil.date2seconds(patientSummary.birth)\n    patient.data[\"#PATIENT-COUNTRY\"] = patientSummary.country\n    patient.data[\"#PATIENT-FIRSTNAME\"] = patientSummary.firstname\n    patient.data[\"#PATIENT-SECONDNAME\"] = patientSummary.secondname\n    patient.data[\"#PATIENT-LASTNAME\"] = patientSummary.lastname\n    patient.data[\"#PATIENT-GENDER\"] = patientSummary.gender\n    patient.data[\"#PATIENT-SIZE\"] = patientSummary.size\n}\n\nfunction getSummaryFromRecord(record: IRecord): IPatientSummary {\n    const summary: IPatientSummary = {\n        id: record.id,\n        birth: DateUtil.seconds2date(\n            Tfw.Converter.Integer(\n                record[\"#PATIENT-BIRTH\"]\n            )\n        ),\n        country: `${record[\"#PATIENT-COUNTRY\"]}`,\n        firstname: Tfw.Util.normalizeFirstname(\n            `${record[\"#PATIENT-FIRSTNAME\"]}`\n        ),\n        gender: Tfw.Converter.Enum<string>(\n            record[\"#PATIENT-GENDER\"],\n            [\"#F\", \"#M\", \"#X\"],\n            \"#X\"\n        ),\n        lastname: Tfw.Util.normalizeLastname(\n            `${record[\"#PATIENT-LASTNAME\"]}`\n        ),\n        secondname: Tfw.Util.normalizeFirstname(\n            `${record[\"#PATIENT-SECONDNAME\"]}`\n        ),\n        size: Tfw.Converter.Integer(\n            record[\"#PATIENT-SIZE\"]\n        )\n    }\n    return summary\n}\n\nfunction createPatientFromSummary(summary: IPatientSummary): IPatient {\n    const id = Guid.create()\n    const now = DateUtil.date2seconds(new Date())\n    return {\n        id,\n        admissions: [],\n        created: now,\n        attachments: [],\n        data: {\n            id,\n            \"#PATIENT-LASTNAME\": summary.lastname,\n            \"#PATIENT-FIRSTNAME\": summary.firstname,\n            \"#PATIENT-SECONDNAME\": summary.secondname,\n            \"#PATIENT-BIRTH\": DateUtil.date2seconds(summary.birth),\n            \"#PATIENT-GENDER\": summary.gender,\n            \"#PATIENT-COUNTRY\": summary.country,\n            \"#PATIENT-SIZE\": summary.size,\n        },\n        edited: now,\n        exams: [],\n        picture: null,\n        vaccins: {}\n    }\n}\n\nfunction updateConsultation(patient: IPatient, newConsultation: IConsultation): IPatient {\n    for (const admission of patient.admissions) {\n        for (const consultation of admission.visits) {\n            if (consultation.uuid !== newConsultation.uuid) continue\n            consultation.version = 1 + Math.max(\n                consultation.version, newConsultation.version)\n            consultation.enter = newConsultation.enter\n            consultation.data = { ...newConsultation.data }\n            return patient\n        }\n    }\n\n    return patient\n}\n\nfunction removeConsultation(patient: IPatient, consultationId: string): IPatient {\n    for (const admission of patient.admissions) {\n        admission.visits = admission.visits.filter(\n            consultation => consultation.uuid !== consultationId\n        )\n    }\n    return patient\n}\n\nfunction getAllConsultationsBefore(patient: IPatient, timeInSeconds: number): IConsultation[] {\n    const consultations: IConsultation[] = []\n    for (const admission of patient.admissions) {\n        for (const consultation of admission.visits) {\n            if (consultation.enter < timeInSeconds) {\n                consultations.push(consultation)\n            }\n        }\n    }\n\n    // Sort then with the more recent first.\n    consultations.sort(\n        (c1: IConsultation, c2: IConsultation) => c2.enter - c1.enter\n    )\n\n    return consultations\n}\n","/**\n * Patients files are stored locally in the \"data/\" directory.\n * This folder contains an index file named \"patients.json\"\n * which type is IPatientsFile.\n *\n * Every patient has a unique id which is used as folder's name\n * to store the file \"patient.json\" of type IPatient.\n */\n\n\nimport { IPatient, IPatientSummary, IRecord, IConsultation } from '../types'\nimport FileSystem from \"./file-system\"\nimport PatientManager from '../manager/patient'\nimport Guid from '../guid'\n\nexport default {\n    deletePatient,\n    getAllPatients, getPatient, getSummary,\n    exists, setPatient\n}\n\ninterface IPatientsFile {\n    count: number,\n    records: { [key: string]: IRecord }\n}\n\nconst ROOT_DIRECTORY = '.'\nconst PATIENTS_FILENAME = `${ROOT_DIRECTORY}/patients.json`\n\nconst PATIENTS = new Map<string, IPatient>()\n\n/**\n * @return A list of all the patients summaries.\n */\nasync function getAllPatients(): Promise<IPatientSummary[]> {\n    try {\n        const patientsFile = await loadPatientsFile()\n        const listToSort: Array<[string, string, IRecord]> =\n            Object.keys(patientsFile.records)\n                .map(key => patientsFile.records[key])\n                .map((record: IRecord) => {\n                    const { id } = record\n                    const label = `${\n                        record[\"#PATIENT-LASTNAME\"]\n                        }\\t${\n                        record[\"#PATIENT-FIRSTNAME\"]\n                        }\\t${\n                        record[\"#PATIENT-SECONDNAME\"]\n                        }`\n                    return [id, label, record]\n                })\n        const sortedList = listToSort.sort((a: any[], b: any[]) => {\n            const [A] = a\n            const [B] = b\n            if (A < B) return -1\n            if (A > B) return +1\n            return 0\n        })\n        return sortedList\n            .map(item => item[2])\n            .map(PatientManager.getSummaryFromRecord)\n    }\n    catch (ex) {\n        console.error(`Unable to load \"${PATIENTS_FILENAME}\"!`, ex)\n        return []\n    }\n}\n\n\nfunction exists(id: string): boolean {\n    const patientFilename = `${ROOT_DIRECTORY}/${id}/patient.json`\n    return FileSystem.exists(patientFilename)\n}\n\nasync function getPatient(id: string, path = \".\"): Promise<IPatient> {\n    try {\n        console.info(\"getPatient() id=\", id)\n        if (PATIENTS.has(id)) {\n            const cachedPatient = PATIENTS.get(id) as IPatient\n            console.log(`Found Patient #${id} in cache!`, cachedPatient)\n            return cachedPatient\n        }\n        const patientContent = await FileSystem.readText(\n            `${path}/${id}/patient.json`)\n        const patient = JSON.parse(patientContent) as IPatient\n        sanitizePatient(patient)\n        PATIENTS.set(id, patient)\n        console.log(\"Loaded patient: \", patient)\n        return patient\n    }\n    catch (ex) {\n        console.error(`Unable to load patient #${id}!`, ex)\n        throw ex\n    }\n}\n\n\n/**\n * Store the patient to disk.\n * If such a patient already exist, it will be overwritten.\n */\nasync function setPatient(patient: IPatient): Promise<IPatient> {\n    try {\n        const patientContent = JSON.stringify(sanitizePatient(patient))\n        addUniqueIdIfMissing(patient)\n        await FileSystem.writeText(`./${patient.id}/patient.json`, patientContent)\n        const patientsFile = await loadPatientsFile()\n        addPatientToPatientsFile(patient, patientsFile)\n        await savePatientsFile(patientsFile)\n\n        const id = patient.id\n        if (PATIENTS.has(id)) {\n            PATIENTS.delete(id)\n        }\n        PATIENTS.set(id, patient)\n\n        return patient\n    }\n    catch (ex) {\n        console.error(`Unable to save patient #${patient.id}!`, ex)\n        throw ex\n    }\n}\n\n\nasync function deletePatient(patientId: string) {\n    try {\n        const patientsFile = await loadPatientsFile()\n        removePatientFromPatientsFile(patientId, patientsFile)\n        await savePatientsFile(patientsFile)\n        await FileSystem.deleteFolder(`./${patientId}`)\n        if (PATIENTS.has(patientId)) {\n            PATIENTS.delete(patientId)\n        }\n    }\n    catch (ex) {\n        console.error(`Unable to delete patient #${patientId}!`, ex)\n        throw ex\n    }\n}\n\n\nfunction getSummary(patient: IPatient): IPatientSummary {\n    return PatientManager.getSummary(patient)\n}\n\n\n/**\n * If \"patient.id\" is missing, create a new unique one.\n */\nfunction addUniqueIdIfMissing(patient: IPatient) {\n    if (typeof patient.id === 'string' && patient.id.length > 0) return\n    patient.id = Guid.create()\n}\n\n\nasync function loadPatientsFile(): Promise<IPatientsFile> {\n    try {\n        const patientsFileContent = await FileSystem.readText(PATIENTS_FILENAME)\n        return JSON.parse(patientsFileContent) as IPatientsFile\n    } catch (ex) {\n        const file: IPatientsFile = {\n            count: 0,\n            records: {}\n        }\n        return file\n    }\n}\n\n\nasync function savePatientsFile(patientsFile: IPatientsFile) {\n    await FileSystem.writeText(PATIENTS_FILENAME, JSON.stringify(patientsFile))\n}\n\n\nfunction addPatientToPatientsFile(patient: IPatient, patientsFile: IPatientsFile) {\n    patientsFile.records[patient.id] = {\n        ...patient.data,\n        id: patient.id\n    }\n}\n\n\nfunction removePatientFromPatientsFile(patientId: string, patientsFile: IPatientsFile) {\n    delete patientsFile.records[patientId]\n}\n\n\nfunction sanitizePatient(patient: IPatient): IPatient {\n    for (const admission of patient.admissions) {\n        for (const consultation of admission.visits) {\n            if (\n                typeof consultation.uuid !== 'string'\n                || consultation.uuid.length === 0\n            ) {\n                consultation.uuid = Guid.create()\n            }\n            if (typeof consultation.version !== 'number') {\n                consultation.version = 1\n            }\n        }\n    }\n    return patient\n}\n","import Tfw from 'tfw'\r\nimport Settings from '../../settings'\r\nimport { IStructure, IPatientField } from \"../../types\"\r\n\r\nconst Intl = Tfw.Intl\r\n\r\nexport default {\r\n    createPatientsFieldsFromStructure,\r\n    createPatientsFieldsCaptionsFromStructure,\r\n    getCurrentStructure,\r\n    getFieldCaption,\r\n    getValueCaption\r\n}\r\n\r\nfunction getCurrentStructure(): IStructure {\r\n    const structure = Settings.structure\r\n    if (!structure) throw Error(\"Structure has not been initialized yet!\")\r\n    return structure\r\n}\r\n\r\nfunction createPatientsFieldsFromStructure(): { [key: string]: boolean } {\r\n    const structure = getCurrentStructure()\r\n    const patientsFields: { [key: string]: boolean } = {};\r\n    structure.patientFields.forEach((patientField: IPatientField) => {\r\n        patientsFields[patientField.id] = true;\r\n    });\r\n    return patientsFields;\r\n}\r\n\r\nfunction createPatientsFieldsCaptionsFromStructure(): { [key: string]: string } {\r\n    const structure = getCurrentStructure()\r\n    const patientsFieldsCaptions: { [key: string]: string } = {};\r\n    structure.patientFields.forEach((patientField: IPatientField) => {\r\n        patientsFieldsCaptions[patientField.id] = Intl.toText(patientField.caption);\r\n    });\r\n    return patientsFieldsCaptions;\r\n}\r\n\r\n/**\r\n * Return the caption of a field, given its key or caption.\r\n */\r\nfunction getFieldCaption(fieldKey: string): string {\r\n    const structure = getCurrentStructure()\r\n    if (fieldKey.charAt(0) !== '#') return fieldKey;\r\n    const item: { caption: string, type: string } | undefined =\r\n        structure.formFields[fieldKey];\r\n    if (!item) return fieldKey;\r\n    return Intl.toText(item.caption);\r\n}\r\n\r\nfunction getValueCaption(typeKey: string | undefined, valueKey: string): string {\r\n    if (!typeKey) {\r\n        // If no type, return the value as is.\r\n        return valueKey\r\n    }\r\n    const structure = getCurrentStructure()\r\n    const types = structure.types\r\n    const type = types[typeKey]\r\n    if (!type) return valueKey\r\n\r\n    for (const subType of Object.values(type.children)) {\r\n        const caption = subType.caption\r\n        if (!caption) continue\r\n        if (subType.id === valueKey) {\r\n            return subType.caption || valueKey\r\n        }\r\n    }\r\n    return valueKey\r\n}\r\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport StructureManager from '../../../manager/structure'\nimport Settings from '../../../settings'\nimport { IStructure } from \"../../../types\"\n\n\nimport \"./text.css\"\n\nconst Input = Tfw.View.Input\n\ninterface ITextProps {\n    className?: string | string[]\n    label?: string\n    wide?: boolean\n    type: string\n    width?: string\n    value: string\n    onChange(value: string): void\n}\ninterface ITextState { }\n\nexport default class Text extends React.Component<ITextProps, ITextState> {\n    state = {}\n\n    private handleChange = (value: string) => {\n        const structure = Settings.structure\n        if (!structure) return null\n        this.props.onChange(getTypeKey(structure, this.props.type, value))\n    }\n\n    render() {\n        const classes = [\n            'view-field-Text',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n        const structure = Settings.structure\n        if (!structure) return null\n\n        const type = this.props.type\n        const value = this.props.value\n        const suggestions = getSuggestionsForType(structure, type)\n\n        return <Input\n            className={classes}\n            label={this.props.label}\n            wide={this.props.wide}\n            width={this.props.width}\n            value={StructureManager.getValueCaption(type ,value)}\n            suggestions={suggestions}\n            onChange={this.handleChange}\n        />\n    }\n}\n\n\nfunction getSuggestionsForType(structure: IStructure, typeName: string): string[] {\n    const types = structure.types\n    const type = types[typeName]\n    if (!type) return []\n    const subTypes = Object.values(type.children)\n    return subTypes\n        .map(t => t.caption)\n        .filter(t => typeof t === \"string\") as string[]\n}\n\n\nfunction getTypeKey(\n    structure: IStructure,\n    typeName: string,\n    value: string\n): string {\n    const types = structure.types\n    const type = types[typeName]\n    if (!type) return value\n    const normalizedValue = value.trim().toLowerCase()\n    for (const subType of Object.values(type.children)) {\n        const caption = subType.caption\n        if (!caption) continue\n        if (caption.toLowerCase() === normalizedValue) {\n            return subType.id\n        }\n    }\n    return value\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport DateUtil from '../../date-util'\nimport Settings from '../../settings'\nimport TextField from '../field/text'\nimport PatientManager from '../../manager/patient'\nimport StructureManager from '../../manager/structure'\nimport { IPatient, IFormField, IFormFields, IConsultation } from \"../../types\"\n\n\nimport \"./consultation-form.css\"\n\nconst Expand = Tfw.View.Expand\nconst Checkbox = Tfw.View.Checkbox\nconst InputDate = Tfw.View.InputDate\n\ninterface IConsultationFormProps {\n    className?: string | string[]\n    patient: IPatient\n    // This object is mutable and will be modified by this component.\n    // It must be a copy of the original consultation because\n    // the editing can be cancelled.\n    consultation: IConsultation\n}\ninterface IConsultationFormState { }\n\nexport default class ConsultationForm extends React.Component<IConsultationFormProps, IConsultationFormState> {\n    state = {}\n\n    private getFieldValue(field: IFormField, overrideConsultation: IConsultation | null = null): string {\n        const consultation = overrideConsultation || this.props.consultation\n        if (!consultation) return \"\"\n        const { data } = consultation\n        if (!data) return \"\"\n        if (!data[field.id]) return \"\"\n        return StructureManager.getValueCaption(field.type, data[field.id])\n    }\n\n    private getFieldValueAsBoolean(field: IFormField): boolean {\n        const value = this.getFieldValue(field)\n        return Tfw.Converter.Enum<string>(\n            value,\n            [\"#YES\", \"#TRUE\"],\n            \"#FALSE\"\n        ) !== \"#FALSE\"\n    }\n\n    /**\n     * @return number of milliseconds since Epoc.\n     */\n    private getFieldValueAsDate(field: IFormField): number {\n        const value = this.getFieldValue(field)\n        return s2ms(Tfw.Converter.Integer(value))\n    }\n\n    private renderFields(fields: IFormFields) {\n        return Object.keys(fields).map(\n            name => {\n                const field = fields[name]\n                if (!field) return null\n                return this.renderField(field)\n            }\n        )\n    }\n\n    private renderField(field: IFormField) {\n        if (hasChildren(field)) {\n            return <Expand\n                key={field.id}\n                label={field.caption}\n                value={false}\n                className=\"thm-ele-button\"\n            >\n                {this.renderFields(field.children)}\n            </Expand>\n        }\n\n        const { consultation } = this.props\n        const prevConsultations = PatientManager.getAllConsultationsBefore(\n            this.props.patient,\n            consultation.enter\n        )\n\n        if (isBool(field)) {\n            return <div className=\"field\">\n                <Checkbox\n                    key={field.id}\n                    wide={false}\n                    label={field.caption}\n                    value={this.getFieldValueAsBoolean(field)}\n                    onChange={(value: boolean) => this.updateBooleanField(field, value)}\n                />\n                {prevConsultations.map(this.renderPrevConsultation.bind(this, field))}\n            </div>\n        }\n\n        if (field.tags.indexOf(\"DATE\") > -1) {\n            return <div className=\"field\">\n                <InputDate\n                    key={field.id}\n                    label={field.caption}\n                    value={this.getFieldValueAsDate(field)}\n                    wide={false}\n                    onChange={\n                        (value: number) => this.updateField(field, `${ms2s(value)}`)\n                    }\n                />\n                {prevConsultations.map(this.renderPrevConsultation.bind(this, field))}\n            </div>\n        }\n\n        return <div className=\"field\">\n            <TextField\n                key={field.id}\n                label={field.caption}\n                value={this.getFieldValue(field)}\n                type={field.type || \"\"}\n                width=\"15rem\"\n                wide={false}\n                onChange={(value: string) => this.updateField(field, value)}\n            />\n            {prevConsultations.map(this.renderPrevConsultation.bind(this, field))}\n        </div>\n    }\n\n    /**\n     * We want to show the values of previous consultations as well.\n     */\n    private renderPrevConsultation = (field: IFormField, consultation: IConsultation) => {\n        if (typeof consultation.data[field.id] === 'undefined') {\n            // This field does not exist.\n            return null\n        }\n        const value = this.getFieldValue(field, consultation)\n        return <div className=\"prev-field\" key={`pc-${consultation.enter}`}>\n            <div className=\"date\">{\n                DateUtil.formatDate(\n                    DateUtil.seconds2date(consultation.enter)\n                )\n            }</div>\n            <div className=\"value\">{value}</div>\n        </div>\n    }\n\n    private updateField = (field: IFormField, value: string) => {\n        const sanitizedValue = (value || \"\").trim()\n        const { consultation } = this.props\n        delete consultation.data[field.id]\n        if (sanitizedValue.length > 0) {\n            consultation.data[field.id] = sanitizedValue\n            console.info(\"consultation=\", consultation)\n        }\n    }\n\n    private updateBooleanField = (field: IFormField, value: boolean) => {\n        const { consultation } = this.props\n        delete consultation.data[field.id]\n        if (value) {\n            consultation.data[field.id] = \"#YES\"\n        }\n\n    }\n\n    render() {\n        const classes = [\n            'view-ConsultationForm',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n        const structure = Settings.structure\n        if (!structure) return null\n        const form = structure.forms\n\n        return (<div className={classes.join(' ')}>\n            {this.renderFields(form)}\n        </div>)\n    }\n}\n\n\n/**\n * If a field has children, it will be represented by an expander.\n */\nfunction hasChildren(field: IFormField): boolean {\n    if (!field.children) return false\n    const names = Object.keys(field.children)\n    return names.length > 0\n}\n\n\nfunction isBool(field: IFormField): boolean {\n    const { tags } = field\n    if (!Array.isArray(tags)) return false\n    for (const tag of tags) {\n        if (tag.trim().toUpperCase() === \"BOOL\") return true\n    }\n    return false\n}\n\nfunction ms2s(milliseconds: number): number {\n    const COEFF = 0.001\n    return milliseconds * COEFF\n}\n\nfunction s2ms(seconds: number): number {\n    const COEFF = 1000\n    return seconds * COEFF\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport DateUtil from '../../../date-util'\nimport State from '../../../state'\nimport Translate from '../../../translate'\nimport PatientShortDesc from '../../patient-short-desc'\nimport PatientManager from '../../../manager/patient'\nimport PatientService from '../../../service/patient'\nimport ConsultationForm from '../../consultation-form'\nimport { IPatient, IPatientSummary, IConsultation } from \"../../../types\"\n\n\nimport \"./consultation.css\"\n\nconst Button = Tfw.View.Button\nconst InputDate = Tfw.View.InputDate\n\ninterface IConsultationsProps {\n    className?: string | string[]\n    patientSummary: IPatientSummary\n    consultationId: string\n    // If null consultation is given, that is a cancel opération.\n    onBack(consultation: IConsultation | null, patient?: IPatient): void\n}\ninterface IConsultationsState {\n    patient?: IPatient\n    consultation: IConsultation | null\n}\n\nexport default class Consultations extends React.Component<IConsultationsProps, IConsultationsState> {\n    private oldPatientSummary?: IPatientSummary\n    private oldConsultationId?: string\n    state: IConsultationsState = {\n        patient: undefined,\n        consultation: null\n    }\n\n    private refresh = async () => {\n        const { patientSummary } = this.props\n        if (patientSummary !== this.oldPatientSummary) {\n            this.oldPatientSummary = patientSummary\n            const patient = await PatientService.getPatient(patientSummary.id)\n            this.setState({ patient })\n        }\n        const { consultationId } = this.props\n        const { patient } = this.state\n        if (patient && consultationId !== this.oldConsultationId) {\n            this.oldConsultationId = consultationId\n            const consultation: IConsultation | null = copy(\n                PatientManager.getConsultationFromUuid(\n                    patient,\n                    consultationId\n                )\n            )\n            this.setState({ consultation })\n        }\n    }\n\n    componentDidMount = this.refresh\n    componentDidUpdate = this.refresh\n\n    private handleOK = () => {\n        this.props.onBack(this.state.consultation, this.state.patient)\n    }\n\n    private handleCancel = () => {\n        this.props.onBack(null)\n    }\n\n    private handleDataChange = (time: number) => {\n        const { consultation } = this.state\n        if (consultation ) {\n            consultation.enter = Math.floor(time / 1000)\n        }\n    }\n\n    render() {\n        const classes = [\n            'view-page-Consultation',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n        const { patient, consultation } = this.state\n        if (!patient) return null\n        if (!consultation) return null\n        const patientSummary = PatientManager.getSummary(patient)\n        const consultationDate = DateUtil.seconds2date(\n            consultation.enter\n        )\n\n        return (<div className={classes.join(' ')}>\n            <header className=\"thm-bgPD thm-ele-nav\">\n                <div>\n                    <Button\n                        label={Translate.ok}\n                        icon=\"ok\"\n                        small={true}\n                        warning={true}\n                        onClick={this.handleOK}\n                    />\n                    <Button\n                        label={Translate.cancel}\n                        icon=\"cancel\"\n                        small={true}\n                        flat={true}\n                        onClick={this.handleCancel}\n                    />\n                </div>\n                <div className=\"date\">{\n                    DateUtil.formatDate(consultationDate)\n                }</div>\n                <PatientShortDesc patient={patientSummary} />\n            </header>\n            <section>\n                <InputDate\n                    label={Translate.consultationDate}\n                    value={consultation.enter * 1000}\n                    onChange={this.handleDataChange}\n                />\n                <hr />\n                <ConsultationForm\n                    patient={patient}\n                    consultation={consultation}\n                />\n            </section>\n        </div>)\n    }\n}\n\n\nfunction copy(obj: IConsultation | null) {\n    if (!obj) return obj\n    return JSON.parse(JSON.stringify(obj))\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport Translate from '../../../../../translate'\nimport DateUtil from '../../../../../date-util'\nimport { IPatient, IAdmission, IConsultation } from \"../../../../../types\"\n\nimport \"./consultations.css\"\n\nconst Button = Tfw.View.Button\n\ninterface IConsultationsProps {\n    className?: string | string[]\n    patient?: IPatient\n    onConsultationClick(consultationId: string): void\n    onNewConsultationClick(): void\n}\n\nexport default class Consultations extends React.Component<IConsultationsProps, {}> {\n    private renderAdmission = (admission: IAdmission) => {\n        return <div className=\"admission\" key={admission.enter}>\n            {admission.visits.map(this.renderConsultation)}\n        </div>\n    }\n\n    private renderConsultation = (consultation: IConsultation) => {\n        const dat = DateUtil.seconds2date(consultation.enter)\n        return <Button\n            label={DateUtil.formatDate(dat)}\n            icon=\"edit\" small={true} dark={true}\n            className=\"consultation\"\n            key={consultation.enter}\n            onClick={() => this.props.onConsultationClick(consultation.uuid)}\n        />\n    }\n\n    render() {\n        const { patient } = this.props\n        if (!patient) return null\n\n        const classes = [\n            'view-page-patient-section-Consultations',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n\n        return (<div className={classes.join(' ')}>\n            <Button\n                icon=\"add\"\n                label={Translate.newConsultation}\n                onClick={() => this.props.onNewConsultationClick()}\n            />\n            <hr/>\n            {\n                patient.admissions.length === 0 &&\n                <p>Ce-tte patient-e n'a pas encore consulté ici.</p>\n            }\n            {\n                patient.admissions.map(this.renderAdmission)\n            }\n        </div>)\n    }\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\n\nimport { IPatient, IStructure } from \"../../../../../types\"\n\nimport \"./prescriptions.css\"\n\nconst Button = Tfw.View.Button\nconst Checkbox = Tfw.View.Checkbox\nconst Expand = Tfw.View.Expand\nconst Input = Tfw.View.Input\nconst Storage = new Tfw.Storage.PrefixedLocalStorage(\"web-soins-consultations/prescription\")\n\ninterface IPrescriptionsProps {\n    className?: string\n    patient?: IPatient\n    structure?: IStructure\n}\ninterface IPrescriptionsState {\n    prescripteur: string\n    service: string\n    selection: string[]\n}\n\nexport default class Prescriptions extends React.Component<IPrescriptionsProps, IPrescriptionsState> {\n    state: IPrescriptionsState = {\n        ...Storage.get(\"state\", {\n            prescripteur: \"\",\n            service: \"\"\n        }),\n        selection: []\n    }\n\n    private update = (newState: Partial<IPrescriptionsState>) => {\n        const state = {\n            ...this.state,\n            ...newState\n        }\n        this.setState(state)\n        Storage.set(\"state\", state)\n    }\n\n    private setItemSelection(itemKey: string, selected: boolean) {\n        const { selection } = this.state\n        const selectionWithoutItem = selection.filter((key: string) => key !== itemKey)\n        if (selected) {\n            this.setState({ selection: [...selectionWithoutItem, itemKey]})\n        } else {\n            this.setState({ selection: [...selectionWithoutItem]})\n        }\n    }\n\n    private renderSections(exams: { [key: string]: { [key: string]: string[] } }) {\n        return Object.keys(exams).map(\n            (sectionKey: string) => this.renderSection(\n                sectionKey,\n                exams[sectionKey]\n            )\n        )\n    }\n\n    private renderSection(sectionKey: string, section: { [key: string]: string[] }) {\n        const subSectionElements = Object.keys(section).map(\n            (subSectionKey: string) => {\n                const subSection = section[subSectionKey]\n                return <Expand\n                    key={`${sectionKey}\\n${subSectionKey}`}\n                    label={subSectionKey}\n                    value={false}\n                >{\n                    subSection.map((label: string) => this.renderCheckbox(\n                        sectionKey,\n                        subSectionKey,\n                        label\n                    ))\n                }</Expand>\n            }\n        )\n        return [\n            <h1 key=\"sectionKey\">{sectionKey}</h1>,\n            ...subSectionElements\n        ]\n    }\n\n    private renderCheckbox(sectionKey: string, subSectionKey: string, label: string) {\n        const key = `${sectionKey}\\n${subSectionKey}\\n${label}`\n        const isSelected = this.state.selection.indexOf(key) !== -1\n        return <Checkbox\n            label={label}\n            wide={true}\n            value={isSelected}\n            onChange={(value: boolean) => this.setItemSelection(key, value)}\n        />\n    }\n\n    private handlePrint = () => {\n        const pages: IPages = groupSelectionByPage(this.state.selection)\n        console.info(\"pages=\", pages)\n    }\n\n    render() {\n        const { patient, structure } = this.props\n        if (!patient || !structure) return null\n\n        const classes = [\n            'view-page-patient-section-Prescriptions',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n\n        return (<div className={classes.join(' ')}>\n            <fieldset>\n                <legend className=\"thm-fgPL\">Liste des examens à prescrire</legend>\n                {\n                    this.renderSections(structure.exams)\n                }\n            </fieldset>\n            <Input\n                label=\"Nom du prescripteur\"\n                wide={true}\n                value={this.state.prescripteur}\n                onChange={prescripteur => this.update({ prescripteur })}\n            />\n            <Input\n                label=\"Nom du service prescripteur de l'examen\"\n                wide={true}\n                value={this.state.service}\n                onChange={service => this.update({ service })}\n            />\n            <Button\n                icon=\"print\"\n                label=\"Préparer le document pour impression\"\n                onClick={this.handlePrint}\n            />\n        </div>)\n    }\n}\n\n\ntype IPage = [string, string[]]\ntype IPages = IPage[]\n\n\nfunction groupSelectionByPage(selection: string[]): IPages {\n    const pages: IPages = []\n    const sortedSelection = [...selection].sort()\n\n    for (const key of sortedSelection) {\n        const [page, , exam] = key.split(\"\\n\")\n        const [, exams]: [string, string[]] = getPageElement(pages, page)\n        exams.push(exam)\n    }\n\n    return pages\n}\n\n\nfunction getPageElement(pages: IPages, page: string): IPage {\n    for (const element of pages) {\n        const [elementPageName] = element\n        if (elementPageName === page) return element\n    }\n    const newElement: IPage = [page, []]\n    pages.push(newElement)\n    return newElement\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\n\nimport DateUtil from \"../../../../../../date-util\"\nimport Translate from \"../../../../../../translate\"\n\n\nimport \"./vaccin-form.css\"\n\nconst Input = Tfw.View.Input\nconst InputDate = Tfw.View.InputDate\n\ninterface IVaccinFormProps {\n    className?: string\n    // Seconds since EPOC.\n    date: number\n    lot: string\n    onDateChange(date: number): void\n    onLotChange(lot: string): void\n}\n\nexport default class VaccinForm extends React.Component<IVaccinFormProps, {}> {\n    private handleLotChange = (lot: string) => {\n        this.props.onLotChange(lot)\n    }\n\n    private handleDateChange = (date: number) => {\n        this.props.onDateChange(\n            DateUtil.date2seconds(new Date(date))\n        )\n    }\n\n    render() {\n        const classes = [\n            'view-page-patient-section-vaccins-VaccinForm',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n\n        return (<div className={classes.join(' ')}>\n            <InputDate\n                label={Translate.vaccinDate}\n                value={DateUtil.seconds2date(this.props.date).getTime()}\n                onChange={this.handleDateChange}\n            />\n            <Input\n                wide={true}\n                label={Translate.vaccinLot}\n                value={this.props.lot}\n                onChange={this.handleLotChange}\n            />\n        </div>)\n    }\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport DateUtil from '../../../../../date-util'\nimport Settings from '../../../../../settings'\nimport Translate from '../../../../../translate'\nimport VaccinForm from './vaccin-form'\nimport { IPatient, IVaccins, IVaccin } from \"../../../../../types\"\n\nimport \"./vaccins.css\"\n\nconst Touchable = Tfw.View.Touchable\n\ninterface IVaccinsProps {\n    className?: string\n    patient?: IPatient\n    onUpdateVaccin(id: string, vaccin: IVaccin): void\n}\ninterface IVaccinsState { }\n\nexport default class Vaccins extends React.Component<IVaccinsProps, IVaccinsState> {\n    state = {}\n\n    private renderVaccin = (id: string) => {\n        const { patient } = this.props\n        if (!patient) return null\n        const vaccins: IVaccins = Settings.structure ?.vaccins || {}\n        const vaccin: IVaccin = vaccins[id] || { caption: \"???\" }\n        const currentVaccin = patient.vaccins[id]\n        const classes = [\"thm-ele-button\", \"vaccin\"]\n        const date = currentVaccin ? DateUtil.seconds2date(currentVaccin.date || 0) : null\n        if (date) {\n            const today = new Date()\n            const yy = today.getFullYear()\n            const mm = today.getMonth()\n            const dd = today.getDate()\n            // Attention, vaccin de plus de 5 ans.\n            const warning = DateUtil.date2seconds(\n                new Date(yy - 5, mm, dd)\n            )\n            // Dangeureux après 10 ans.\n            const bad = DateUtil.date2seconds(\n                new Date(yy - 10, mm, dd)\n            )\n            const seconds = currentVaccin.date || 0\n            if (seconds < bad) {\n                classes.push(\"bad\")\n            }\n            else if (seconds < warning) {\n                classes.push(\"warning\")\n            }\n            else {\n                classes.push(\"good\")\n            }\n        }\n        return <Touchable\n            key={id}\n            onClick={() => this.handleVaccinClick(id)}\n        >\n            <div className={classes.join(\" \")}>\n                <div>{vaccin.caption}</div>\n                {\n                    date &&\n                    <div className=\"date\">{\n                        DateUtil.formatDate(date)\n                    }</div>\n                }\n            </div>\n        </Touchable>\n    }\n\n    private getVaccinCaption(id: string) {\n        const vaccins: IVaccins = Settings.structure ?.vaccins || {}\n        const vaccin: IVaccin = vaccins[id] || { caption: \"???\" }\n        return vaccin.caption\n    }\n\n    private async handleVaccinClick(id: string) {\n        const { patient } = this.props\n        if (!patient) return null\n        const vaccin: IVaccin = patient.vaccins[id] || {\n            caption: this.getVaccinCaption(id),\n            lot: \"\"\n        }\n        if (!vaccin) return\n        if (typeof vaccin.date === 'undefined') {\n            vaccin.date = DateUtil.date2seconds(new Date())\n        }\n        console.info(\"vaccin=\", vaccin)\n\n        const currentVaccin: IVaccin = {\n            ...vaccin\n        }\n        const confirmed = await Tfw.Factory.Dialog.confirm(\n            currentVaccin.caption,\n            <VaccinForm\n                date={currentVaccin.date || DateUtil.date2seconds(DateUtil.createUndefinedDate())}\n                lot={currentVaccin.lot || \"\"}\n                onDateChange={(date: number) => {\n                    currentVaccin.date = date\n                }}\n                onLotChange={(lot: string) => {\n                    currentVaccin.lot = lot\n                }}\n            />\n        )\n        if (!confirmed) return\n        this.props.onUpdateVaccin(id, currentVaccin)\n    }\n\n    render() {\n        const { patient } = this.props\n        if (!patient) return null\n\n        const classes = [\n            'view-page-patient-section-Vaccins',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n        const vaccinIds = Object.keys(Settings.structure ?.vaccins || {})\n\n        return (<div className={classes.join(' ')}>\n            <div\n                className=\"vaccins\"\n                style={{\n                    gridTemplate: `repeat(${\n                        Math.ceil(vaccinIds.length / 3)\n                        }, 1fr) / repeat(3, 1fr)`\n                }}\n            >{vaccinIds.map(this.renderVaccin)}</div>\n            <p>Cliquez sur un vaccin pour changer sa date.</p>\n            <ul>\n                <li>Le <span className=\"bad\">rouge</span> signifie que le vaccin a <b>plus de 10 ans</b>.</li>\n                <li>Le <span className=\"warning\">orange</span> signifie que le vaccin a <b>entre 5 et 10 ans</b>.</li>\n                <li>Le <span className=\"good\">vert</span> signifie que le vaccin a <b>moins de 5 ans</b>.</li>\n            </ul>\n        </div>)\n    }\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport Translate from '../../translate'\nimport DateUtil from '../../date-util'\nimport TextField from '../field/text'\nimport { IPatientSummary } from \"../../types\"\n\nimport \"./patient-form.css\"\n\nconst Input = Tfw.View.Input\nconst InputDate = Tfw.View.InputDate\nconst InputInteger = Tfw.View.InputInteger\n\ninterface IPatientFormProps {\n    className?: string | string[]\n    patientSummary: IPatientSummary\n    onChange(patientSummary: IPatientSummary): void\n\n}\ninterface IPatientFormState extends IPatientSummary { }\n\nexport default class PatientForm extends React.Component<IPatientFormProps, IPatientFormState> {\n    private oldPatientSummary = \"\"\n\n    state: IPatientFormState = {\n        id: \"\",\n        lastname: \"\",\n        firstname: \"\",\n        secondname: \"\",\n        gender: \"\",\n        size: 0,\n        country: \"\",\n        birth: DateUtil.createUndefinedDate()\n    }\n\n    private refresh = () => {\n        const { patientSummary } = this.props\n        const newPatientSummary = JSON.stringify(patientSummary)\n        if (this.oldPatientSummary === newPatientSummary) return\n        this.oldPatientSummary = newPatientSummary\n        console.info(\"newPatientSummary=\", newPatientSummary)\n        this.setState({ ...patientSummary })\n    }\n\n    componentDidMount = this.refresh\n\n    componentDidUpdate = this.refresh\n\n    private fireChange = () => {\n        const { state } = this\n        this.props.onChange({ ...state })\n    }\n\n    private handleLastnameChange = (lastname: string) => {\n        this.setState({ lastname }, this.fireChange)\n    }\n\n    private handleFirstnameChange = (firstname: string) => {\n        this.setState({ firstname }, this.fireChange)\n    }\n\n    private handleSecondnameChange = (secondname: string) => {\n        this.setState({ secondname }, this.fireChange)\n    }\n\n    private handleCountryChange = (country: string) => {\n        this.setState({ country }, this.fireChange)\n    }\n\n    private handleGenderChange = (gender: string) => {\n        this.setState({ gender }, this.fireChange)\n    }\n\n    private handleSizeChange = (size: number) => {\n        this.setState({ size }, this.fireChange)\n    }\n\n    private handleBirthChange = (birthTime: number) => {\n        // \"birthTime\" is the number of milliseconds since Epoc.\n        this.setState({ birth: new Date(birthTime) }, this.fireChange)\n    }\n\n    render() {\n        console.log(\"[render()] patient-form\")\n        const classes = [\n            'view-PatientForm',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n        const {\n            lastname, firstname, secondname,\n            gender, birth, country, size\n        } = this.state\n\n        return (<div className={classes.join(' ')}>\n            <Input\n                label={Translate.lastName}\n                transform={Tfw.Util.normalizeLastname}\n                wide={true}\n                focus={true}\n                value={lastname}\n                onChange={this.handleLastnameChange}\n            />\n            <Input\n                label={Translate.firstName}\n                transform={Tfw.Util.normalizeFirstname}\n                wide={false}\n                value={firstname}\n                onChange={this.handleFirstnameChange}\n            />\n            <Input\n                label={Translate.secondName}\n                transform={Tfw.Util.normalizeFirstname}\n                wide={false}\n                value={secondname}\n                onChange={this.handleSecondnameChange}\n            />\n            <TextField\n                label={Translate.gender}\n                wide={false}\n                type=\"#GENDER\"\n                value={gender}\n                onChange={this.handleGenderChange}\n            />\n            <InputDate\n                label={Translate.birthday}\n                value={birth.getTime()}\n                onChange={this.handleBirthChange}\n            />\n            <TextField\n                label={Translate.country}\n                wide={false}\n                type=\"#COUNTRY\"\n                value={country}\n                onChange={this.handleCountryChange}\n            />\n            <InputInteger\n                label={Translate.size}\n                value={size}\n                onChange={this.handleSizeChange}\n            />\n        </div>)\n    }\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport State from '../../../state'\nimport Translate from '../../../translate'\nimport PatientShortDesc from '../../patient-short-desc'\nimport PatientService from '../../../service/patient'\nimport Consultations from './section/consultations'\nimport Prescriptions from './section/prescriptions'\nimport Vaccins from './section/vaccins'\nimport Guid from '../../../guid'\nimport DateUtil from '../../../date-util'\nimport Settings from '../../../settings'\nimport PatientForm from '../../patient-form'\nimport PatientManager from '../../../manager/patient'\nimport {\n    IPatientSummary, IPatient, IConsultation, IAdmission, IVaccin\n} from \"../../../types\"\n\nimport \"./patient.css\"\n\n\ninterface IDialog {\n    hide(): void\n}\nconst Button = Tfw.View.Button\nconst TabStrip = Tfw.Layout.TabStrip\n\ninterface IPatientProps {\n    className?: string | string[]\n    patientSummary: IPatientSummary\n}\ninterface IPatientState {\n    patient?: IPatient\n}\n\nexport default class Patient extends React.Component<IPatientProps, IPatientState> {\n    private oldPatientId = \"\"\n    state: IPatientState = {}\n\n    private refresh = async () => {\n        const { patientSummary } = this.props\n        if (this.oldPatientId === patientSummary.id) return\n        this.oldPatientId = patientSummary.id\n        const patient = await PatientService.getPatient(patientSummary.id)\n        console.info(\"patient=\", patient)\n        this.setState({ patient })\n    }\n\n    componentDidMount = this.refresh\n    componentDidUpdate = this.refresh\n\n    private handleConsultationClick = (consultationId: string) => {\n        console.info(\"consultationId=\", consultationId)\n        State.setConsultationId(consultationId)\n        State.setPage(\"consultation\")\n    }\n\n    private handleNewConsultationClick = async () => {\n        const { patient } = this.state\n        if (!patient) return\n        const consultation: IConsultation = {\n            enter: DateUtil.date2seconds(new Date()),\n            uuid: Guid.create(),\n            version: 0,\n            data: {}\n        }\n        if (patient.admissions.length === 0) {\n            // No admission yet. Let's create one.\n            patient.admissions.push({\n                enter: consultation.enter,\n                visits: []\n            })\n        }\n        const lastAdmission: IAdmission = patient.admissions[patient.admissions.length - 1]\n        lastAdmission.visits.push(consultation)\n        await PatientService.setPatient(patient)\n        this.setState({\n            patient: { ...patient }\n        }, () => this.handleConsultationClick(consultation.uuid))\n    }\n\n    private handleUpdateVaccin = async (id: string, vaccin: IVaccin) => {\n        console.info(\"handleUpdateVaccin()  \", id, vaccin)\n        const { patient } = this.state\n        if (!patient) return\n        patient.vaccins[id] = vaccin\n        console.info(\"patient=\", patient)\n        await PatientService.setPatient(patient)\n        this.setState({ patient: { ...patient } })\n    }\n\n    private handleBack = () => {\n        State.setPage(\"patients\")\n        State.clearPatient()\n    }\n\n    private handleEditPatient = async () => {\n        const patient = this.state.patient\n        if (!patient) return\n        let patientSummary = PatientManager.getSummary(patient)\n        console.info(\"patient=\", patient)\n        console.info(\"patientSummary=\", patientSummary)\n        const dialog = Tfw.Factory.Dialog.show({\n            title: Translate.editPatient,\n            content: <div>\n                <PatientForm\n                    patientSummary={patientSummary}\n                    onChange={summary => patientSummary = { ...summary }}\n                />\n                <hr/>\n                <Button\n                    label={Translate.deletePatient}\n                    icon=\"delete\" warning={true}\n                    onClick={() => this.handleDeletePatient(patientSummary.id, dialog)}\n                />\n            </div>,\n            footer: [\n                <Button\n                    label={Translate.cancel}\n                    flat={true}\n                    onClick={() => dialog.hide()}\n                />,\n                <Button\n                    label={Translate.ok}\n                    warning={true}\n                    onClick={async () => {\n                        PatientManager.setSummary(patient, patientSummary)\n                        await PatientService.setPatient(patient)\n                        dialog.hide()\n                        this.handleBack()\n                        State.setPatients(await PatientService.getAllPatients())\n                    }}\n                />\n            ]\n        })\n    }\n\n    private handleDeletePatient = async (patientId: string, dialog: IDialog) => {\n        const confirm = Tfw.Factory.Dialog.confirm(\n            Translate.deletePatient,\n            <div>{Translate.confirmDeletePatient}</div>\n        )\n        if (!confirm) return\n        dialog.hide()\n        await PatientService.deletePatient(patientId)\n        State.setPatients(await PatientService.getAllPatients())\n        this.handleBack()\n    }\n\n    render() {\n        const classes = [\n            'view-page-Patient',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n\n        return (<div className={classes.join(' ')}>\n            <header className=\"thm-bgPD thm-ele-nav\">\n                <Button\n                    label={Translate.back}\n                    icon=\"back\"\n                    small={true}\n                    warning={false}\n                    onClick={this.handleBack}\n                />\n                <PatientShortDesc patient={this.props.patientSummary} />\n                <Button\n                    label={Translate.editPatient}\n                    icon=\"user\"\n                    small={true}\n                    warning={true}\n                    onClick={this.handleEditPatient}\n                />\n            </header>\n            <section>\n                <TabStrip\n                    headers={[\n                        Translate.consultations,\n                        Translate.vaccins,\n                        Translate.prescriptions\n                    ]}\n                >\n                    <Consultations\n                        patient={this.state.patient}\n                        onConsultationClick={this.handleConsultationClick}\n                        onNewConsultationClick={this.handleNewConsultationClick}\n                    />\n                    <Vaccins\n                        patient={this.state.patient}\n                        onUpdateVaccin={this.handleUpdateVaccin}\n                    />\n                    <Prescriptions\n                        patient={this.state.patient}\n                        structure={Settings.structure}\n                    />\n                </TabStrip>\n            </section>\n        </div>)\n    }\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport PatientShortDesc from '../patient-short-desc'\nimport { IPatientSummary } from \"../../types\"\n\nimport \"./patient-summary-button.css\"\n\nconst Touchable = Tfw.View.Touchable\n\ninterface IPatientSummaryButtonProps {\n    className?: string | string[]\n    patientSummary: IPatientSummary\n    onClick(patientSummary: IPatientSummary): void\n}\n\nexport default class PatientSummaryButton extends React.Component<IPatientSummaryButtonProps, {}> {\n    private handleClick = () => {\n        this.props.onClick({ ...this.props.patientSummary })\n    }\n\n    render() {\n        const classes = [\n            'view-PatientSummaryButton',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n\n        return (<div className={classes.join(' ')}>\n            <Touchable\n                className=\"thm-bg1 item\"\n                onClick={this.handleClick}\n            >\n                <PatientShortDesc patient={this.props.patientSummary} />\n            </Touchable>\n        </div>)\n    }\n}\n","import { IPatientSummary } from \"../../../types\"\n\nexport default class PatientsExport {\n    private _filteredList: IPatientSummary[]\n    // patientSummaries and footPrints must keep the same order!\n    private patientSummaries: IPatientSummary[]\n    private readonly footPrints: IPatientFootPrint[]\n\n    constructor(patientSummaries: IPatientSummary[]) {\n        this.patientSummaries = patientSummaries\n        this._filteredList = patientSummaries.slice()\n        this.footPrints = patientSummaries.map(p => ({\n            id: p.id,\n            firstName: simplifyName(p.firstname),\n            lastName: simplifyName(p.lastname)\n        }))\n    }\n\n    filter(lastName: string, firstName: string) {\n        const simpleLastName = simplifyName(lastName)\n        const simpleFirstName = simplifyName(firstName)\n\n        this._filteredList = this.patientSummaries.filter(\n            (patientSummary: IPatientSummary, idx: number) => {\n                const item = this.footPrints[idx]\n                return match(item.lastName, simpleLastName)\n                    && match(item.firstName, simpleFirstName)\n            }\n        )\n    }\n\n    get filteredList() { return this._filteredList.slice() }\n}\n\ninterface IPatientFootPrint {\n    id: string\n    firstName: string\n    lastName: string\n}\n\n\nconst NOT_FOUND = -1\n\n\nfunction match(value: string, test: string): boolean {\n    if (test.length === 0) return true\n    return value.indexOf(test) !== NOT_FOUND\n}\n\n\nconst LETTERS_TO_KEEP = \"abcdefghijklmnopqrstuvwxyz\"\nconst LETTERS_TO_CHANGE = [\n    [\"àáäâã\", \"a\"],\n    [\"èéëêẽ\", \"e\"],\n    [\"ìíïîĩ\", \"i\"],\n    [\"òóöôõ\", \"o\"],\n    [\"ùúüûũ\", \"u\"],\n    [\"ç\", \"c\"],\n    [\"€\", \"e\"],\n    [\"ñ\", \"n\"]\n]\n\nfunction simplifyName(name: string): string {\n    let out = \"\"\n    for (const letter of name.toLowerCase()) {\n        const replacement = findReplacement(letter)\n        if (replacement) {\n            out += replacement\n        }\n        else if (LETTERS_TO_KEEP.indexOf(letter) !== -1) {\n            out += letter\n        }\n    }\n    return out\n}\n\n\n/**\n * Look if the letter can be changed by another one.\n * This is used to get rid of accents and other cedillas.\n * @param letter - Must be in lower case.\n * @return `null` if no replacement has been found.\n */\nfunction findReplacement(letter: string): string | null {\n    for (const map of LETTERS_TO_CHANGE) {\n        const [candidates, replacement] = map\n        if (candidates.indexOf(letter) !== NOT_FOUND) {\n            return replacement\n        }\n    }\n    return null\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport PatientForm from '../../patient-form'\nimport State from '../../../state'\nimport Translate from '../../../translate'\nimport { IPatientSummary } from \"../../../types\"\nimport PatientSummaryButton from '../../patient-summary-button'\nimport PatientsFilter from './patients-filter'\nimport PatientManager from '../../../manager/patient'\nimport PatientService from '../../../service/patient'\nimport Package from '../../../../package.json'\nimport DateUtil from '../../../date-util'\nimport Settings from '../../../settings'\n\nimport \"./patients.css\"\n\nconst Button = Tfw.View.Button\nconst List = Tfw.View.List\n\nconst FILTER_DEBOUNCING = 350\n\ninterface IPatientsProps {\n    className?: string\n    patient: IPatientSummary\n    patients: IPatientSummary[]\n    onPatientChange(patient: IPatientSummary): void\n    onPatientClick(patient: IPatientSummary): void\n}\ninterface IPatientsState {\n    filteredPatients: IPatientSummary[]\n}\n\nexport default class Patients extends React.Component<IPatientsProps, IPatientsState> {\n    private oldPatient = \"\"\n    private oldPatients = \"\"\n    private patientsFilter?: PatientsFilter\n\n    state = {\n        filteredPatients: this.props.patients\n    }\n\n    private refreshPatientsFilter() {\n        const { patient, patients } = this.props\n        const newPatient = JSON.stringify(patient)\n        const newPatients = JSON.stringify(patients)\n        if (this.oldPatient !== newPatient || this.oldPatients !== newPatients) {\n            this.oldPatient = newPatient\n            this.oldPatients = newPatients\n            this.patientsFilter = new PatientsFilter(patients)\n            this.filter()\n        }\n    }\n\n    componentDidMount = this.refreshPatientsFilter\n    componentDidUpdate = this.refreshPatientsFilter\n\n    private filter = Tfw.Async.Debouncer(() => {\n        const { patientsFilter } = this\n        if (patientsFilter) {\n            const { patient } = this.props\n            patientsFilter.filter(patient.lastname, patient.firstname)\n            this.setState({\n                filteredPatients: patientsFilter.filteredList\n            })\n        }\n    }, FILTER_DEBOUNCING)\n\n    private handlePatientChange = (patientSummary: IPatientSummary) => {\n        this.props.onPatientChange(patientSummary)\n    }\n\n    private renderPatientSummaryButton = (patientSummary: IPatientSummary) => {\n        return <PatientSummaryButton\n            patientSummary={patientSummary}\n            onClick={this.handlePatientSummaryClick}\n        />\n    }\n\n    private handlePatientSummaryClick = (patientSummary: IPatientSummary) => {\n        console.info(\"patientSummary=\", patientSummary)\n        this.props.onPatientChange(patientSummary)\n        this.props.onPatientClick(patientSummary)\n    }\n\n    private handleAddNewPatient = async () => {\n        const patient = PatientManager.createPatientFromSummary(\n            this.props.patient\n        )\n        await Tfw.Factory.Dialog.wait(\n            Translate.addPatient,\n            new Promise(async (resolve) => {\n                await PatientService.setPatient(patient)\n                const patientSummaries = await PatientService.getAllPatients()\n                State.setPatients(patientSummaries)\n                resolve()\n            })\n        )\n        this.props.onPatientClick(PatientManager.getSummary(patient))\n    }\n\n    render() {\n        const { patientsFilter } = this\n        if (!patientsFilter) return null\n\n        const classes = [\n            'view-page-Patients',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n        const { patient } = this.props\n        const { filteredPatients } = this.state\n\n        return (<div className={classes.join(' ')}>\n            <header className=\"thm-bgPD thm-ele-nav\">\n                <Button\n                    icon=\"close\"\n                    small={true}\n                    warning={true}\n                    label=\"Quitter\"\n                    onClick={() => process.exit(0)}\n                />\n                <div>WebSoins Consultations v{Package.version}</div>\n                <Button\n                    label={Translate.importPatients}\n                    small={true}\n                    icon=\"import\"\n                    onClick={() => State.setPage(\"import-patients\")}\n                />\n            </header>\n            <section>\n                <div>\n                    <div className=\"patients-form thm-bg2 thm-ele-button\">\n                        <h1>Données démographiques du patient</h1>\n                        <PatientForm\n                            patientSummary={patient}\n                            onChange={this.handlePatientChange}\n                        />\n                        <p className={filteredPatients.length === 0 ? 'hide' : ''}>\n                            Si le <b>patient existe déjà</b> dans la colonne de droite,\n                            <b>cliquez dessus</b> pour voir ses anciennes consultations\n                            et éventuellement en ajouter une nouvelle.\n                        </p>\n                        <Button\n                            icon=\"add\"\n                            wide={true}\n                            label={Translate.addPatient}\n                            enabled={canAddNewPatient(patient)}\n                            warning={true}\n                            onClick={this.handleAddNewPatient}\n                        />\n                    </div>\n                    <div className=\"remote-server\">{\n                        Settings.remoteServer\n                    }</div>\n                </div>\n                <div className=\"patients-list\">\n                    <h1>Patients correspondant au filtre: &nbsp;\n                        <big>{filteredPatients.length}</big>\n                        <small> / {this.props.patients.length}</small></h1>\n                    <List\n                        className=\"list\"\n                        itemHeight={32}\n                        items={this.state.filteredPatients}\n                        mapper={this.renderPatientSummaryButton}\n                    />\n                </div>\n            </section>\n        </div>)\n    }\n}\n\nfunction canAddNewPatient(patient: IPatientSummary): boolean {\n    if (patient.lastname.trim().length === 0) return false\n    if (patient.firstname.trim().length === 0) return false\n    if (patient.country.trim().length === 0) return false\n    // We cannot add the patient if he/she is born in 1000 or before.\n    if (!DateUtil.isDefinedDate(patient.birth)) return false\n\n    return true\n}\n","import FileSystem from './file-system'\nimport PatientService from './patient'\nimport PatientManager from '../manager/patient'\nimport { IPatient, IPatientSummary, IRecord } from '../types'\n\nexport default class PatientImport {\n    static async create(patientsFilePath: string): Promise<PatientImport> {\n        const content = await FileSystem.readText(patientsFilePath)\n        const path = patientsFilePath.substr(\n            0, patientsFilePath.length - \"patients.json\".length)\n        return new PatientImport(content, path)\n    }\n\n    private readonly _patientsCount: number\n    private readonly _records: { [key: string]: IRecord }\n\n    private constructor(content: string, private path: string) {\n        try {\n            const patients = JSON.parse(content)\n            if (typeof patients.count !== 'number') {\n                throw Error('Wrong file format: missing \"count\" attribute!')\n            }\n            this._patientsCount = patients.count\n            if (typeof patients.records !== 'object') {\n                throw Error('Wrong file format: missing \"records\" attribute!')\n            }\n            if (Array.isArray(patients.records)) {\n                throw Error('Wrong file format: \"records\" must not be an array!')\n            }\n            this._records = patients.records\n            console.info(\"patients=\", patients)\n        } catch (ex) {\n            console.log(ex)\n            throw Error('Unable to parse \"patients.json\" content!')\n        }\n    }\n\n    get patientsCount() { return this._patientsCount }\n\n    getPatientBio(index: number): IPatientSummary {\n        const records: { [key: string]: IRecord } = this._records\n        const keys = Object.keys(records)\n        const key = keys[index]\n        if (!key) throw Error(`Invalid patient index #${index}!`)\n        return PatientManager.getSummaryFromRecord(records[key])\n    }\n\n    async getPatient(key: string): Promise<IPatient> {\n        const patient = await PatientService.getPatient(key, this.path)\n        return patient\n    }\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\nimport State from '../../../state'\nimport PatientShortDesc from '../../patient-short-desc'\nimport PatientService from '../../../service/patient'\nimport PatientImportService from '../../../service/patient-import'\nimport { IPatientSummary } from \"../../../types\"\n\n\nimport \"./import-patient.css\"\n\nconst Button = Tfw.View.Button\nconst InputFile = Tfw.View.InputFile\nconst Progress = Tfw.View.Progress\nconst Flex = Tfw.Layout.Flex\nconst Dialog = Tfw.Factory.Dialog\n\ninterface IImportPatientProps {\n    className?: string | string[]\n}\ninterface IImportPatientState {\n    progress: number\n    count: number\n    patient?: IPatientSummary\n    addedPatientsCount: number\n    rejectedPatientsCount: number\n}\n\nexport default class ImportPatient extends React.Component<IImportPatientProps, IImportPatientState> {\n    state = {\n        progress: 0,\n        count: 0,\n        patient: undefined,\n        addedPatientsCount: 0,\n        rejectedPatientsCount: 0\n    }\n\n    private handleFilesClick = async (files: FileList) => {\n        if (files.length !== 1) {\n            await Dialog.error(\"Veuillez sélectionner un et un seul fichier.\")\n            return\n        }\n\n        // We untype this because we have the `path` attribute\n        // thanks to NodeWebkit.\n        const file = (files.item(0) as unknown) as any\n        if (!file) return\n        console.info(\"file=\", file)\n        if (file.name !== 'patients.json') {\n            await Dialog.error('Vous devez sélectionner un fichier nommé \"patients.json\".')\n            return\n        }\n\n        this.setState(\n            { progress: 0.000001 },\n            () => this.importPatients(file.path)\n        )\n    }\n\n    private async importPatients(path: string) {\n        const importer = await PatientImportService.create(path)\n        let addedPatientsCount = 0\n        let rejectedPatientsCount = 0\n        this.setState({\n            count: importer.patientsCount,\n            addedPatientsCount,\n            rejectedPatientsCount\n        })\n\n        for (let patientIndex = 0; patientIndex < importer.patientsCount; patientIndex++) {\n            this.setState({\n                progress: patientIndex / importer.patientsCount\n            })\n            try {\n                const patientBio = importer.getPatientBio(patientIndex)\n                this.setState({ patient: patientBio })\n                console.info(\"patientBio=\", patientBio)\n                const key = patientBio.id\n                const patient = await importer.getPatient(key)\n                console.info(\"patient=\", patient)\n                if (PatientService.exists(patient.id)) {\n                    rejectedPatientsCount++\n                    this.setState({ rejectedPatientsCount })\n                } else {\n                    addedPatientsCount++\n                    this.setState({ addedPatientsCount })\n                    await PatientService.setPatient(patient)\n                }\n            } catch (ex) {\n                console.error(ex)\n            }\n        }\n        this.setState({ progress: 1 })\n    }\n\n    private handleBack = async () => {\n        State.setPage(\"patients\")\n        const patients = await PatientService.getAllPatients()\n        console.info(\"patients=\", patients)\n        State.setPatients(patients)\n    }\n\n    render() {\n        const classes = [\n            'view-page-ImportPatient', 'thm-bg1',\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n        const { progress, count, patient } = this.state\n        const isWorking = progress > 0 && progress < 1\n\n        return (<div className={classes.join(' ')}>\n            <Flex>\n                <Button\n                    className=\"back-button\"\n                    icon=\"left\"\n                    label=\"Retour\"\n                    enabled={!isWorking}\n                    warning={true}\n                    onClick={this.handleBack}\n                />\n                <p>\n                    Utilisez cet outil pour récupérer des patients depuis une autre\n                    base de donnée.<br />\n                    Seuls les patients que vous n'avez pas déjà dans votre base\n                    seront importés.\n                </p>\n                <InputFile\n                    accept=\".json\"\n                    icon=\"user\"\n                    label='Importer le fichier \"patients.json\"'\n                    wide={true}\n                    enabled={!isWorking && count === 0}\n                    onClick={this.handleFilesClick}\n                />\n            </Flex>\n            <div className={`progress ${count > 0 ? \"show\" : \"hide\"}`}>\n                <Progress\n                    label={`Importation de ${count} patient${count > 1 ? \"s\" : \"\"} (${Math.floor(0.5 + 100 * progress)}%)`}\n                    value={progress}\n                    wide={true}\n                    height=\"2rem\"\n                />\n                {\n                    patient &&\n                    <div className=\"patient-desc\">\n                        <PatientShortDesc patient={patient} />\n                    </div>\n                }\n            </div>\n            <Flex>\n                <div>\n                    <p>Patients importés :</p>\n                    <big>{this.state.addedPatientsCount}</big>\n                </div>\n                <div>\n                    <p>Patients déjà existants :</p>\n                    <big>{this.state.rejectedPatientsCount}</big>\n                </div>\n            </Flex>\n        </div>)\n    }\n}\n","import React from \"react\"\nimport Tfw from 'tfw'\n\nimport Splash from './splash'\nimport PageConsultation from '../view/page/consultation'\nimport PagePatient from '../view/page/patient'\nimport PagePatients from '../view/page/patients'\nimport PageImportPatients from '../view/page/import-patient'\nimport { IPatientSummary, IPatient, IConsultation } from '../types'\n\nimport \"./app.css\"\n\nconst Stack = Tfw.Layout.Stack\n\ninterface IAppProps {\n    className?: string[]\n    page: string\n    consultationId: string\n    patient: IPatientSummary\n    patients: IPatientSummary[]\n    onPatientChange(patientSummary: IPatientSummary): void\n    onPatientClick(patientSummary: IPatientSummary): void\n    onEndOfConsultationEdition(consultation: IConsultation | null, patient?: IPatient): void\n}\n\nexport default class App extends React.Component<IAppProps, {}> {\n    componentDidMount() {\n        Splash.hide()\n    }\n\n    handlePatientChange = (patientSummary: IPatientSummary) => {\n        this.props.onPatientChange(patientSummary)\n    }\n\n    handlePatientClick = (patientSummary: IPatientSummary) => {\n        this.props.onPatientClick(patientSummary)\n    }\n\n    handleEndOfConsultationEdition = (consultation: IConsultation | null, patient?: IPatient) => {\n        this.props.onEndOfConsultationEdition(consultation, patient)\n    }\n\n    render() {\n        const classes = [\n            'App', \"thm-bg0\",\n            ...Tfw.Converter.StringArray(this.props.className, [])\n        ]\n\n        return (<div className={classes.join(' ')}>\n            <Stack\n                fullscreen={true}\n                scrollable={true}\n                value={this.props.page}\n            >\n                <PageConsultation\n                    key=\"consultation\"\n                    consultationId={this.props.consultationId}\n                    patientSummary={this.props.patient}\n                    onBack={this.handleEndOfConsultationEdition}\n                />\n                <PagePatient\n                    key=\"patient\"\n                    patientSummary={this.props.patient}\n                />\n                <PagePatients\n                    key=\"patients\"\n                    patient={this.props.patient}\n                    patients={this.props.patients}\n                    onPatientChange={this.handlePatientChange}\n                    onPatientClick={this.handlePatientClick}\n                />\n                <PageImportPatients\n                    key=\"import-patients\"\n                />\n            </Stack>\n        </div>)\n    }\n}\n","import { connect } from 'react-redux'\nimport State from '../state'\nimport { IAppState, IPatientSummary, IPatient, IConsultation } from \"../types\"\nimport AppView from \"./app\"\nimport PatientManager from '../manager/patient'\nimport PatientService from '../service/patient'\n\nfunction mapStateToProps(state: IAppState) {\n    return {\n        consultationId: state.consultationId,\n        page: state.page,\n        patient: state.patient,\n        patients: state.patients\n    }\n}\n\nfunction mapDispatchToProps(dispatch: any) {\n    return {\n        onPatientChange(patientSummary: IPatientSummary) {\n            State.setPatient(patientSummary)\n        },\n        onPatientClick(patientSummary: IPatientSummary) {\n            State.setPatient(patientSummary)\n            State.setPage(\"patient\")\n        },\n        async onEndOfConsultationEdition(consultation: IConsultation | null, patient?: IPatient) {\n            if (consultation && patient) {\n                // Save the consultation.\n                PatientManager.updateConsultation(patient, consultation)\n                await PatientService.setPatient(patient)\n            }\n            State.setPage(\"patient\")\n        }\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppView);\n","import Tfw from 'tfw'\r\nimport { IFormField } from '../../types'\r\n\r\nconst _ = Tfw.Intl.make(require(\"./parser.json\"));\r\n\r\ninterface IFormFieldWithPath extends IFormField {\r\n    path: string[]\r\n}\r\n\r\n/**\r\n * Le fichier `types.org` définit tous  les types de données complexe.\r\n * Il  n'y a  pas  de type  très contraignant,  tous  les textes  sont\r\n * libres, mais on propose des listes pour faciliter la saisie. Chaque\r\n * élément  de cette  liste est  muni d'un  identifiant (précédé  d'un\r\n * dièse `#`).\r\n * Un type peut être hiérarchique. Par exemple, une adresse propose un\r\n * pays, une région,  un district, ... Les  propositions dépendent des\r\n * choix  précédents. Ainsi,  la liste  des propositions  de districts\r\n * dépend de la région sélectionnée.\r\n *\r\n * Le  parsing du  fichier `types.org`  se  fait ligne  par ligne.  On\r\n * ignore tous  les espaces/tabulations en  début de ligne.  Le nombre\r\n * d'astérisques  `*`  qui  commencent  une ligne  indique  le  niveau\r\n * hiérarchique.\r\n * Au  niveau 1,  on trouve  l'identifiant du  type qui  doit toujours\r\n * commencer par un dièse `#`.\r\n *\r\n * Voici un  exemple de  fichier en  entrée et de  comment on  doit le\r\n * traduire.\r\n * ```\r\n * #GENDER\r\n * * #H Homme\r\n * * #F Femme\r\n *\r\n * #LOCALIZATION\r\n * * Cameroun\r\n * ** Littoral\r\n * *** District 9\r\n * **** Village 1\r\n * **** Village 2\r\n * **** Village 3\r\n * *** Un peu plus loin\r\n * **** Village A\r\n * **** Village B\r\n * ** Centre\r\n * *** Pas tout près\r\n * **** Village Toto\r\n * *** Au fin fond du...\r\n * **** Village Alpha\r\n * **** Village Beta\r\n * **** Village Gama\r\n * ```\r\n *\r\n * ```\r\n * {\r\n *   \"#GENDER\": {\r\n *     \"#H\": { \"caption\": \"Homme\" },\r\n *     \"#F\": { \"caption\": \"Femme\" }\r\n *   },\r\n *   \"#LOCALIZATION\": {\r\n *     \"Cameroun\": { \"caption\": \"Cameroun\", \"children\": {\r\n *       \"Littoral\": { \"caption\": \"Littoral\", \"children\": {\r\n *         ...\r\n *       }},\r\n *       \"Centre\": { \"caption\": \"Centre\", \"children\": {\r\n *         ...\r\n *       }},\r\n *       ...\r\n *     }}\r\n *   }\r\n * }\r\n * ```\r\n */\r\n\r\n\r\nconst RX_LINE = /^(#[A-Z0-9-]+)?([^\\(@]*)(\\([^\\)]*\\)\\+?)?(@[A-Z0-9,-]+)?/;\r\n\r\n/**\r\n * If there is an error, silents it and return `{}`.\r\n */\r\nfunction parseLazy(code: string): { [key: string]: IFormField } {\r\n    try {\r\n        return parse(code)\r\n    } catch (ex) {\r\n        console.error(ex)\r\n        return {}\r\n    }\r\n}\r\n\r\nfunction parse(code: string): { [key: string]: IFormField } {\r\n    const types: { [key: string]: IFormField } = {};\r\n    const levels = [types];\r\n    if (typeof code !== 'string') code = `${code}`;\r\n    code.split('\\n').forEach(function(line, lineNumber) {\r\n        try {\r\n            line = line.trim();\r\n            // Ignorer les lignes vides.\r\n            if (line.length === 0) return;\r\n            // Ignorer les commentaires.\r\n            if (line.substr(0, 2) === '//') return;\r\n            if (line.charAt(0) !== '*') throw _('err-1');\r\n\r\n            // Calculer le niveau hiérarchique `level`.\r\n            const level = computeLevel(line);\r\n            line = line.substr(level).trim();\r\n\r\n            if (level > levels.length) {\r\n                throw _('err-2', line, levels.length - 1, level);\r\n            }\r\n            while (levels.length > level) {\r\n                levels.pop();\r\n            }\r\n            const item: IFormField = parseLine(line);\r\n            if (typeof levels[levels.length - 1][item.id] !== 'undefined') {\r\n                throw _('err-3', item.id);\r\n            }\r\n            levels[levels.length - 1][item.id] = item;\r\n            levels.push(item.children || {});\r\n        }\r\n        catch (ex) {\r\n            throw { lineNumber: lineNumber + 1, message: ex };\r\n        }\r\n    });\r\n    return types;\r\n};\r\n\r\n\r\n/**\r\n * @param   {string} line - Line to parse.\r\n * @returns {number} Number of leading '*' in the line.\r\n */\r\nfunction computeLevel(line: string): number {\r\n    let level = 0;\r\n    while (line.charAt(0) == '*') {\r\n        line = line.substr(1);\r\n        level++;\r\n    }\r\n    return level;\r\n}\r\n\r\n\r\nfunction parseLine(line: string): IFormField {\r\n    const item: IFormField = {\r\n        id: \"\",\r\n        caption: \"\",\r\n        children: {},\r\n        tags: []\r\n    }\r\n    const m = RX_LINE.exec(line.trim())\r\n    if (!m) return item\r\n\r\n    if (m[2]) {\r\n        item.caption = m[2].trim()\r\n    }\r\n    if (m[1]) {\r\n        item.id = m[1].trim()\r\n    } else {\r\n        if (!item.caption) {\r\n            console.error(\"line:\", line)\r\n            console.error(\"item:\", item)\r\n            throw Error(\"Missing id and caption!\")\r\n        }\r\n        item.id = item.caption.toUpperCase()\r\n    }\r\n    if (m[3]) {\r\n        item.type = m[3].substr(1, m[3].length - 2).trim()\r\n    }\r\n    if (m[4]) {\r\n        item.tags = m[4].trim()\r\n            .substr(1)\r\n            .split(',')\r\n            .map(v => v.trim())\r\n    }\r\n    return item\r\n}\r\n\r\n\r\n/**\r\n * @param {object} forms\r\n * {\r\n *   CONCLUSION: {\r\n *     caption: \"Conclusion\",\r\n *     children: {\r\n *       \"#SURGERY-GYN\": {\r\n *         caption: \"Chirurgie\",\r\n *         id: \"#SURGERY-GYN\",\r\n *         type: \"#SURGERY-GYN\"\r\n *       }\r\n *     }\r\n *   },\r\n *   ...\r\n * }\r\n * @return `[{ id:\"#SURGERY-GYN\", caption:\"Chirurgie\", path:[\"Conclusion\", \"Chirurgie\"] }, ...]`\r\n */\r\nfunction flattenFormsFields(\r\n    forms: { [key: string]: IFormField }\r\n): IFormField[] {\r\n    var list: IFormFieldWithPath[] = [];\r\n    recursiveFlattenFormsFields(forms, list, []);\r\n    list.sort(function(a, b) {\r\n        var captionA = a.caption;\r\n        var captionB = b.caption;\r\n        if (captionA < captionB) return -1;\r\n        if (captionA > captionB) return +1;\r\n        return 0;\r\n    });\r\n    return list;\r\n}\r\n\r\n\r\nfunction recursiveFlattenFormsFields(\r\n    children: { [key: string]: IFormField },\r\n    list: IFormFieldWithPath[],\r\n    path: string[]\r\n) {\r\n    Object.keys(children).forEach(function(key) {\r\n        var child = children[key];\r\n        if (typeof child.id === 'string' && child.id.charAt(0) === '#') {\r\n            // Leave.\r\n            list.push({\r\n                id: child.id,\r\n                caption: child.caption,\r\n                children: {},\r\n                tags: [],\r\n                path: path.slice()\r\n            });\r\n        }\r\n        else if (child.children) {\r\n            // Node.\r\n            path.push(child.caption);\r\n            recursiveFlattenFormsFields(child.children, list, path);\r\n            path.pop();\r\n        }\r\n    });\r\n}\r\n\r\n\r\nexport default { parse, parseLazy, flattenFormsFields }\r\n","import Tfw from 'tfw'\nimport Parser from \"../../manager/structure/parser\"\n\nimport { IPatientField, IFormField, IVaccins } from \"../../types\"\nimport { IStructureService } from './types'\n\nexport default {\n    parse,\n    parseExams,\n    parseFormFields,\n    parsePatient,\n    parseVaccins\n}\n\n\nfunction parse(def: string): { [key: string]: IFormField } {\n    try {\n        return Parser.parse(def)\n    }\n    catch (ex) {\n        console.error(\"[service/structure/parse] \", ex)\n        console.log(def)\n        throw Error(ex)\n    }\n}\n\nfunction parseExams(examsDef: string): { [key: string]: { [key: string]: string[] } } {\n    const exams: { [key: string]: { [key: string]: string[] } } = {}\n\n    try {\n        const raw: { [key: string]: IFormField } = Parser.parseLazy(examsDef)\n        for (const sectionKey of Object.keys(raw)) {\n            const section: IFormField = raw[sectionKey]\n            const sectionName = section.caption\n            const examsSection: { [key: string]: string[] } = {}\n            exams[sectionName] = examsSection\n            for (const subSectionKey of Object.keys(section.children)) {\n                const subSection = section.children[subSectionKey]\n                const subSectionName = subSection.caption\n                const examsSubSection: string[] = []\n                examsSection[subSectionName] = examsSubSection\n                for (const key of Object.keys(subSection.children)) {\n                    const field = subSection.children[key]\n                    examsSubSection.push(field.caption)\n                }\n                if (examsSubSection.length === 0) {\n                    examsSubSection.push(subSectionName)\n                }\n            }\n        }\n    }\n    catch (ex) {\n        console.error(\"[parseExams] \", ex);\n        console.log(\"examsDef=\", examsDef)\n    }\n\n    return exams\n}\n\nfunction parseVaccins(stringifiedVaccins: string): IVaccins {\n    const vaccins: IVaccins = {}\n    try {\n        const raw: { [key: string]: IFormField } =\n            Parser.parse(stringifiedVaccins)\n        for (const id of Object.keys(raw)) {\n            vaccins[id] = { caption: raw[id].caption }\n        }\n    }\n    catch (ex) {\n        console.error(\"[parseVaccins] \", ex);\n    }\n    return vaccins\n}\n\nfunction parsePatient(stringifiedPatientDef: string): IPatientField[] {\n    try {\n        const raw: { [key: string]: IFormField } =\n            Parser.parse(stringifiedPatientDef)\n        const patients: IPatientField[] = Object.keys(raw)\n            .map((id: string) => {\n                const patient = raw[id];\n                return {\n                    id,\n                    type: patient.type || \"\",\n                    caption: Tfw.Intl.toIntl(patient.caption) || \"\"\n                }\n            });\n        return patients;\n    }\n    catch (ex) {\n        console.error(\"[parsePatient] \", ex);\n    }\n    return [];\n}\n\ninterface IFlatField {\n    type: string\n    caption: string\n}\n\nfunction parseFormFields(structure: IStructureService): { [key: string]: IFlatField } {\n    const result: { [key: string]: IFlatField } = {}\n    const fringe: Array<{ [key: string]: IFormField }> =\n        [parse(structure.forms)]\n\n    while (fringe.length > 0) {\n        const item = fringe.shift()\n        if (!item) continue\n        for (const name of Object.keys(item)) {\n            const value = item[name]\n            result[name] = {\n                type: \"\",\n                caption: Tfw.Intl.toText(Tfw.Intl.toIntl(value.caption))\n            }\n            if (value.type) result[name].type = value.type\n            if (value.children) {\n                fringe.push(value.children)\n            }\n        }\n    }\n    return result\n}\n","import Tfw from 'tfw'\nimport Settings from '../../settings'\nimport Parser from './parser'\nimport { IStructureService } from './types'\nimport { IStructure, ITypes } from \"../../types\"\n\n\nexport default {\n    async getFromRemote(): Promise<IStructure | null> {\n        const organizationId: number = Settings.organizationId\n        const structureId: number = Settings.structureId\n        const WebService = Tfw.WebService.create(\n            Settings.remoteServer\n        )\n        try {\n            const structures: IStructureService[] =\n                await WebService.exec(\"structure.list\", organizationId);\n            const structure = structures.find(\r\n                (structure: IStructureService) => structure.id === structureId\r\n            )\r\n            if (!structure) return null\r\n            console.info(\"Structure (raw)=\", structure)\r\n            const parsedStructure: IStructure = {\n                id: structure.id,\n                organizationId,\n                name: structure.name,\n                patientFields: Parser.parsePatient(structure.patient),\n                formFields: Parser.parseFormFields(structure),\n                //exams: parse(structure.exams),\n                //vaccins: parse(structure.vaccins),\n                forms: Parser.parse(structure.forms),\n                types: Parser.parse(structure.types) as ITypes,\n                vaccins: Parser.parseVaccins(structure.vaccins),\n                exams: Parser.parseExams(structure.exams),\n                sources: {\n                    exams: structure.exams,\n                    vaccins: structure.vaccins,\n                    patient: structure.patient,\n                    forms: structure.forms,\n                    types: structure.types\n                }\n            }\r\n            console.info(\"Structure (parsed)=\", parsedStructure)\r\n            return parsedStructure\r\n        } catch (ex) {\r\n            console.error(ex)\r\n            return null\r\n        }\r\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import Tfw from 'tfw'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport './index.css'\nimport App from './app'\nimport State from './state'\nimport Settings from './settings'\nimport PatientService from './service/patient'\nimport StructureService from './service/structure'\nimport * as serviceWorker from './serviceWorker'\n\nTfw.Theme.register(\"soin\", {\n    white: \"#fda\", black: \"#420\",\n    bg0: \"#ffcb97\", bg1: \"#ffdab3\", bg2: \"#ffe6cc\", bg3: \"#fff3e6\",\n    bgP: \"#804924\", bgPL: \"#b36633\", bgPD: \"#4d2c16\",\n    bgS: \"#ff9f30\", bgSD: \"#ff7f00\", bgSL: \"#ffbf60\"\n})\nTfw.Theme.apply(\"soin\")\nTfw.Font.loadJosefin()\n\nasync function start() {\n    window.addEventListener(\"keyup\", (evt) => {\n        if (evt.key === \"F11\") {\n            evt.preventDefault()\n            //const nw = window['nw'] as any\n            const win = nw.Window.get()\n            win.toggleFullscreen()\n        }\n    }, true)\n    console.info(\"process.env=\", process.env)\n    await Settings.initialize()\n    const patients = await PatientService.getAllPatients()\n    console.info(\"patients=\", patients)\n    State.setPatients(patients)\n    const structure = await StructureService.getFromRemote()\n    if (structure) {\n        // Update structure from network.\n        Settings.structure = structure\n    }\n\n    ReactDOM.render(\n        <Provider store={State.store}>\n            <React.StrictMode>\n                <App />\n            </React.StrictMode>\n        </Provider>,\n        document.getElementById('root')\n    )\n}\n\nstart()\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}